name: "Coastal Sailing - Protocol Agnostic"
description: "Sensor-based coastal sailing scenario that works with both NMEA 0183 and NMEA 2000 protocols. Define sensors by physical properties only - the bridge code handles protocol-specific message generation."
duration: 600  # 10 minutes
version: "3.0"
category: "comprehensive"
bridge_mode: "nmea0183"  # Can be: nmea0183 | nmea2000 | hybrid

# PROTOCOL-AGNOSTIC SENSOR DEFINITIONS
# Physical sensors with data generation and physical properties
# No NMEA 0183 or NMEA 2000 references - bridge code handles protocol mapping
sensors:
  # ========== DEPTH SENSOR ==========
  - type: depth_sensor
    instance: 0
    name: "Primary Depth Sounder"
    update_rate: 2  # Hz
    physical_properties:
      transducer_depth: 1.8        # meters below waterline (maps to DPT offset or PGN 128267 byte[8])
      keel_offset: 0.5              # meters below transducer (for DBK calculation)
      max_range: 100.0              # meters
      mounting_location: "bow"
    data_generation:
      depth:
        type: "tidal_cycle"
        base_depth: 9.1             # Mean depth in meters
        tidal_range: 7.6            # ±7.6 meters variation (1.5-16.7 meters range)
        tidal_period: 600           # Full tidal cycle over scenario duration
        min: 1.5
        max: 30.5

  # ========== SPEED SENSOR ==========
  - type: speed_sensor
    instance: 0
    name: "Paddle Wheel Speed Log"
    update_rate: 1  # Hz
    physical_properties:
      sensor_type: "paddle_wheel"
      mounting_location: "hull_center"
      calibration_factor: 0.98      # Speed multiplier (maps to VHW/VTG adjustment or PGN 128259 scaling)
    data_generation:
      speed:
        type: "polar_sailing"
        base_speed: 5.5             # knots
        tidal_current: 1.2          # knots current effect
        leeway_factor: 0.95
        min: 0.5
        max: 9.5

  # ========== WIND SENSOR ==========
  - type: wind_sensor
    instance: 0
    name: "Masthead Wind Instrument"
    update_rate: 2  # Hz
    physical_properties:
      sensor_height: 12.5           # meters above deck (maps to PGN 130306 byte[6])
      mounting_location: "masthead"
      reference_type: "apparent"    # Maps to MWV.reference or PGN 130306 byte[5]
    data_generation:
      wind_speed:
        type: "coastal_wind"
        base: 14                    # knots
        thermal_effect: 4           # ±4 knots thermal variation
        gusts: 0.3                  # 30% gust factor
        min: 8
        max: 22
      wind_angle:
        type: "coastal_variation"
        base: 120                   # degrees
        thermal_shift: 30           # degrees
        variation_period: 300       # 5-minute thermal cycles

  # ========== GPS SENSOR ==========
  - type: gps_sensor
    instance: 0
    name: "Primary GPS Antenna"
    update_rate: 1  # Hz (RMC), 5 Hz (GGA fast updates)
    physical_properties:
      antenna_height: 3.2           # meters above water
      horizontal_accuracy: 2.5      # meters (maps to GGA.hdop or PGN 129025)
      mounting_location: "stern_arch"
    data_generation:
      latitude:
        type: "coastal_track"
        start: 41.4800
        waypoints:
          - {lat: 41.4800, time: 0}
          - {lat: 41.4850, time: 150}
          - {lat: 41.4900, time: 300}
          - {lat: 41.4950, time: 450}
          - {lat: 41.5000, time: 600}
      longitude:
        type: "coastal_track"
        start: -81.6900
        waypoints:
          - {lon: -81.6900, time: 0}
          - {lon: -81.6800, time: 150}
          - {lon: -81.6750, time: 300}
          - {lon: -81.6700, time: 450}
          - {lon: -81.6650, time: 600}

  # ========== HEADING SENSOR ==========
  - type: heading_sensor
    instance: 0
    name: "Fluxgate Compass"
    update_rate: 5  # Hz
    physical_properties:
      sensor_type: "fluxgate"
      deviation: -2.5               # degrees (maps to HDG.deviation or PGN 127250 byte[4-5])
      variation: -12.0              # degrees west (maps to HDG.variation or PGN 127250 byte[6-7])
      mounting_location: "below_deck_center"
    data_generation:
      heading:
        type: "sine_wave"
        base: 180                   # degrees
        amplitude: 5                # ±5 degrees for course corrections
        period: 60                  # 1-minute cycle
        min: 0
        max: 360

  # ========== WATER TEMPERATURE SENSOR ==========
  - type: temperature_sensor
    instance: 0
    name: "Water Temperature Sensor"
    update_rate: 0.2  # Hz (every 5 seconds)
    physical_properties:
      sensor_location: "sea_water"  # Maps to MTW (0183) or PGN 130310 source byte (2000)
      sensor_depth: 0.8             # meters below waterline
      calibration_offset: -0.5      # °C (maps to applied adjustment)
    data_generation:
      temperature:
        type: "gaussian"
        mean: 18.5                  # °C
        std_dev: 1.2
        min: 14.0
        max: 24.0

  # ========== ENGINE SENSOR ==========
  - type: engine_sensor
    instance: 0
    name: "Main Diesel Engine"
    update_rate: 1  # Hz
    physical_properties:
      engine_instance: 0            # 0=port/single, 1=starboard (maps to RPM.source or PGN 127488 byte[0])
      rpm_calibration: 1.02         # RPM multiplier
      sensor_types: ["rpm", "coolant_temp", "oil_pressure", "alternator_voltage", "fuel_rate"]
    data_generation:
      rpm:
        type: "sine_wave"
        base: 1800                  # RPM
        amplitude: 200              # ±200 RPM
        period: 120                 # 2-minute cycle
        min: 500
        max: 3200

  # ========== BATTERY SENSORS (2x) ==========
  - type: battery_sensor
    instance: 0
    name: "House Battery Bank"
    update_rate: 0.5  # Hz (every 2 seconds)
    physical_properties:
      battery_instance: 0           # Maps to XDR.transducer_name (0183) or PGN 127508 byte[0] (2000)
      nominal_voltage: 12           # V
      capacity: 400                 # Ah
    data_generation:
      voltage:
        type: "sine_wave"
        base: 12.6                  # V
        amplitude: 0.4              # ±0.4V
        period: 300
        min: 11.8
        max: 14.4
      current:
        type: "gaussian"
        mean: -15.0                 # A (negative = discharging)
        std_dev: 5.0
        min: -40.0
        max: 20.0
      temperature:
        type: "gaussian"
        mean: 298.15                # K (25°C)
        std_dev: 2.0
        min: 288.15
        max: 308.15

  - type: battery_sensor
    instance: 1
    name: "Starter Battery"
    update_rate: 0.5  # Hz
    physical_properties:
      battery_instance: 1
      nominal_voltage: 12
      capacity: 100
    data_generation:
      voltage:
        type: "gaussian"
        mean: 14.2                  # V (charging)
        std_dev: 0.2
        min: 12.0
        max: 14.8
      current:
        type: "gaussian"
        mean: 8.0                   # A (charging)
        std_dev: 2.0
        min: -10.0
        max: 30.0
      temperature:
        type: "gaussian"
        mean: 298.15
        std_dev: 1.5
        min: 290.15
        max: 305.15

  # ========== TANK SENSORS (4x) ==========
  - type: tank_sensor
    instance: 0
    name: "Fuel Tank - Starboard"
    update_rate: 0.1  # Hz (every 10 seconds)
    physical_properties:
      tank_instance: 0              # Maps to PGN 127505 byte[0]
      fluid_type: "fuel"            # Maps to PGN 127505 byte[1] (0=fuel, 1=water, 2=gray, 3=black)
      capacity: 150                 # Liters (maps to PGN 127505 byte[2-5])
      sensor_type: "capacitive"
    data_generation:
      level:
        type: "linear_decline"
        start: 85.0                 # % full
        end: 82.0                   # % full (3% decline over scenario)
        min: 0
        max: 100

  - type: tank_sensor
    instance: 1
    name: "Fuel Tank - Port"
    update_rate: 0.1  # Hz
    physical_properties:
      tank_instance: 1
      fluid_type: "fuel"
      capacity: 150
      sensor_type: "capacitive"
    data_generation:
      level:
        type: "linear_decline"
        start: 82.0
        end: 79.0
        min: 0
        max: 100

  - type: tank_sensor
    instance: 2
    name: "Fresh Water Tank"
    update_rate: 0.1  # Hz
    physical_properties:
      tank_instance: 2
      fluid_type: "fresh_water"
      capacity: 200
      sensor_type: "ultrasonic"
    data_generation:
      level:
        type: "gaussian"
        mean: 65.0
        std_dev: 2.0
        min: 60.0
        max: 70.0

  - type: tank_sensor
    instance: 3
    name: "Gray Water Tank"
    update_rate: 0.1  # Hz
    physical_properties:
      tank_instance: 3
      fluid_type: "gray_water"
      capacity: 80
      sensor_type: "resistive"
    data_generation:
      level:
        type: "linear"
        start: 15.0
        end: 20.0
        min: 0
        max: 100

  # ========== RUDDER SENSOR ==========
  - type: rudder_sensor
    instance: 0
    name: "Rudder Position Sensor"
    update_rate: 2  # Hz
    physical_properties:
      rudder_instance: 0            # 0=main rudder (maps to RSA.position or PGN 127245 byte[0])
      max_angle: 35                 # degrees
      calibration_offset: 0.5       # degrees (zero position adjustment)
    data_generation:
      angle:
        type: "sine_wave"
        base: 0                     # degrees (centered)
        amplitude: 8                # ±8 degrees
        period: 45                  # 45-second steering cycle
        min: -35
        max: 35

# IMPLEMENTATION NOTES:
# ======================
# 1. The bridge code (scenario.js) reads this sensors: array
# 2. For each sensor, it looks up the sensor type in SENSOR_TYPE_REGISTRY
# 3. Based on bridge_mode (nmea0183/nmea2000/hybrid), it routes to appropriate generators
# 4. Physical properties are mapped to protocol-specific fields:
#    - transducer_depth → DPT.offset (0183) or PGN 128267 byte[8] (2000)
#    - reference_type → MWV.reference (0183) or PGN 130306 byte[5] (2000)
#    - fluid_type → none (0183) or PGN 127505 byte[1] (2000)
# 5. Data generation remains protocol-agnostic - same tidal_cycle works for both DBT and PGN 128267
