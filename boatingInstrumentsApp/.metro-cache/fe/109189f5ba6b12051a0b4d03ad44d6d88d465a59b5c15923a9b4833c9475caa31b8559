{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":99,"index":99}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"./injection","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":158},"end":{"line":4,"column":67,"index":225}}],"key":"Ri12V5UvvLPFQrEealibULxq4mg=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.useDOMImperativeHandle = useDOMImperativeHandle;\n  var _react = require(_dependencyMap[0], \"react\");\n  /**\n   * A React `useImperativeHandle` like hook for DOM components.\n   *\n   */\n  function useDOMImperativeHandle(ref, init, deps) {\n    const isTargetWeb =\n    // @ts-expect-error: Added via react-native-webview\n    typeof window.ReactNativeWebView === 'undefined' &&\n    // @ts-expect-error: Added via expo/dom\n    typeof window.$$EXPO_INITIAL_PROPS === 'undefined';\n    const stubHandlerFactory = (0, _react.useCallback)(() => ({}), deps ?? []);\n\n    // This standard useImperativeHandle hook is serving for web\n    (0, _react.useImperativeHandle)(ref, isTargetWeb ? init : stubHandlerFactory, deps);\n\n    // This `globalThis._domRefProxy` is serving for native\n    (0, _react.useEffect)(() => {\n      if (!isTargetWeb) {\n        globalThis._domRefProxy = init();\n        // TODO(@kitten): Type `ReactNativeWebView` and the message data\n        // @ts-expect-error: Added via react-native-webview\n        window.ReactNativeWebView.postMessage(JSON.stringify({\n          type: require(_dependencyMap[1], \"./injection\").REGISTER_DOM_IMPERATIVE_HANDLE_PROPS,\n          data: Object.keys(globalThis._domRefProxy)\n        }));\n      }\n      return () => {\n        if (!isTargetWeb) {\n          globalThis._domRefProxy = undefined;\n        }\n      };\n    }, deps);\n  }\n});","lineCount":40,"map":[[6,2,1,0],[6,6,1,0,"_react"],[6,12,1,0],[6,15,1,0,"require"],[6,22,1,0],[6,23,1,0,"_dependencyMap"],[6,37,1,0],[7,2,10,0],[8,0,11,0],[9,0,12,0],[10,0,13,0],[11,2,14,7],[11,11,14,16,"useDOMImperativeHandle"],[11,33,14,38,"useDOMImperativeHandle"],[11,34,15,2,"ref"],[11,37,15,13],[11,39,16,2,"init"],[11,43,16,15],[11,45,17,2,"deps"],[11,49,17,23],[11,51,18,2],[12,4,19,2],[12,10,19,8,"isTargetWeb"],[12,21,19,19],[13,4,20,4],[14,4,21,4],[14,11,21,11,"window"],[14,17,21,17],[14,18,21,18,"ReactNativeWebView"],[14,36,21,36],[14,41,21,41],[14,52,21,52],[15,4,22,4],[16,4,23,4],[16,11,23,11,"window"],[16,17,23,17],[16,18,23,18,"$$EXPO_INITIAL_PROPS"],[16,38,23,38],[16,43,23,43],[16,54,23,54],[17,4,25,2],[17,10,25,8,"stubHandlerFactory"],[17,28,25,26],[17,31,25,29],[17,35,25,29,"useCallback"],[17,53,25,40],[17,55,25,41],[17,62,25,48],[17,63,25,49],[17,64,25,50],[17,65,25,56],[17,67,25,58,"deps"],[17,71,25,62],[17,75,25,66],[17,77,25,68],[17,78,25,69],[19,4,27,2],[20,4,28,2],[20,8,28,2,"useImperativeHandle"],[20,34,28,21],[20,36,28,22,"ref"],[20,39,28,25],[20,41,28,27,"isTargetWeb"],[20,52,28,38],[20,55,28,41,"init"],[20,59,28,45],[20,62,28,48,"stubHandlerFactory"],[20,80,28,66],[20,82,28,68,"deps"],[20,86,28,72],[20,87,28,73],[22,4,30,2],[23,4,31,2],[23,8,31,2,"useEffect"],[23,24,31,11],[23,26,31,12],[23,32,31,18],[24,6,32,4],[24,10,32,8],[24,11,32,9,"isTargetWeb"],[24,22,32,20],[24,24,32,22],[25,8,33,6,"globalThis"],[25,18,33,16],[25,19,33,17,"_domRefProxy"],[25,31,33,29],[25,34,33,32,"init"],[25,38,33,36],[25,39,33,37],[25,40,33,38],[26,8,34,6],[27,8,35,6],[28,8,36,6,"window"],[28,14,36,12],[28,15,36,13,"ReactNativeWebView"],[28,33,36,31],[28,34,36,32,"postMessage"],[28,45,36,43],[28,46,37,8,"JSON"],[28,50,37,12],[28,51,37,13,"stringify"],[28,60,37,22],[28,61,37,23],[29,10,38,10,"type"],[29,14,38,14],[29,16,38,16,"REGISTER_DOM_IMPERATIVE_HANDLE_PROPS"],[29,42,38,16],[29,43,38,16,"REGISTER_DOM_IMPERATIVE_HANDLE_PROPS"],[29,94,38,52],[30,10,39,10,"data"],[30,14,39,14],[30,16,39,16,"Object"],[30,22,39,22],[30,23,39,23,"keys"],[30,27,39,27],[30,28,39,28,"globalThis"],[30,38,39,38],[30,39,39,39,"_domRefProxy"],[30,51,39,58],[31,8,40,8],[31,9,40,9],[31,10,41,6],[31,11,41,7],[32,6,42,4],[33,6,43,4],[33,13,43,11],[33,19,43,17],[34,8,44,6],[34,12,44,10],[34,13,44,11,"isTargetWeb"],[34,24,44,22],[34,26,44,24],[35,10,45,8,"globalThis"],[35,20,45,18],[35,21,45,19,"_domRefProxy"],[35,33,45,31],[35,36,45,34,"undefined"],[35,45,45,43],[36,8,46,6],[37,6,47,4],[37,7,47,5],[38,4,48,2],[38,5,48,3],[38,7,48,5,"deps"],[38,11,48,9],[38,12,48,10],[39,2,49,0],[40,0,49,1],[40,3]],"functionMap":{"names":["<global>","useDOMImperativeHandle","stubHandlerFactory","useEffect$argument_0","<anonymous>"],"mappings":"AAA;OCa;yCCW,eD;YEM;WCY;KDI;GFC;CDC"}},"type":"js/module"}]}