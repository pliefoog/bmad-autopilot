{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"kslwqCIsh6ew+I1KeA1rlVRjsAk=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"expo-asset","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":35,"index":35}},{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":35,"index":35}},{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":35,"index":35}},{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":35,"index":35}},{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":35,"index":35}},{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":35,"index":35}},{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":35,"index":35}},{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":35,"index":35}},{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":35,"index":35}}],"key":"ZXJFWHziJpBZf3W7vl00wXf6fd8=","exportNames":["*"],"imports":9}},{"name":"expo-modules-core","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":36},"end":{"line":2,"column":45,"index":81}}],"key":"fU8WLIPqoAGygnPbZ/QJiQQfXEY=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = require(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\").default;\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.resolveSource = resolveSource;\n  exports.resolveSourceWithDownload = resolveSourceWithDownload;\n  var _asyncToGenerator2 = _interopRequireDefault(require(_dependencyMap[1], \"@babel/runtime/helpers/asyncToGenerator\"));\n  function getAssetFromSource(source) {\n    if (!source) {\n      return null;\n    }\n    if (source instanceof require(_dependencyMap[2], \"expo-asset\").Asset) {\n      return source;\n    }\n    if (typeof source === 'number') {\n      return require(_dependencyMap[2], \"expo-asset\").Asset.fromModule(source);\n    }\n    if (typeof source === 'object') {\n      if ('assetId' in source && typeof source.assetId === 'number') {\n        return require(_dependencyMap[2], \"expo-asset\").Asset.fromModule(source.assetId);\n      }\n      if ('uri' in source && typeof source.uri === 'string') {\n        return require(_dependencyMap[2], \"expo-asset\").Asset.fromURI(source.uri);\n      }\n    }\n    if (typeof source === 'string') {\n      return require(_dependencyMap[2], \"expo-asset\").Asset.fromURI(source);\n    }\n    return null;\n  }\n  function createSourceFromAsset(asset) {\n    var extras = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var uri = asset.localUri ?? asset.uri;\n    var result = {\n      uri\n    };\n    if (extras.assetId != null) {\n      result.assetId = extras.assetId;\n    }\n    if (extras.headers) {\n      result.headers = extras.headers;\n    }\n    return result;\n  }\n  function resolveSource(source) {\n    if (source == null) {\n      return null;\n    }\n    if (source instanceof require(_dependencyMap[2], \"expo-asset\").Asset) {\n      return createSourceFromAsset(source);\n    }\n    if (typeof source === 'string') {\n      return {\n        uri: source\n      };\n    }\n    if (typeof source === 'number') {\n      var asset = require(_dependencyMap[2], \"expo-asset\").Asset.fromModule(source);\n      return createSourceFromAsset(asset, {\n        assetId: source\n      });\n    }\n    if (typeof source === 'object') {\n      if ('assetId' in source && typeof source.assetId === 'number') {\n        var _asset = require(_dependencyMap[2], \"expo-asset\").Asset.fromModule(source.assetId);\n        return {\n          ...source,\n          uri: _asset.localUri ?? _asset.uri\n        };\n      }\n      if ('uri' in source && typeof source.uri === 'string') {\n        return source;\n      }\n    }\n    return source ?? null;\n  }\n  /**\n   * Resolves and optionally downloads an audio source before loading.\n   * Similar to expo-av's getNativeSourceAndFullInitialStatusForLoadAsync but simplified for expo-audio.\n   */\n  function resolveSourceWithDownload(_x) {\n    return _resolveSourceWithDownload.apply(this, arguments);\n  }\n  function _resolveSourceWithDownload() {\n    _resolveSourceWithDownload = (0, _asyncToGenerator2.default)(function* (source) {\n      var asset = getAssetFromSource(source);\n      var fallbackSource = resolveSource(source);\n      if (asset) {\n        var assetToDownload = asset;\n        try {\n          // iOS AVPlayer fails to load the asset if the type is not set or can't be inferred\n          // since this is an audio asset, we can safely set the type to mp3 or any other audio type\n          // and iOS will be able to download and play the asset\n          // Since expo-asset caches, this will only run once per asset, as long as the asset is not deleted from the cache\n          if (!assetToDownload.type) {\n            assetToDownload = new (require(_dependencyMap[2], \"expo-asset\").Asset)({\n              name: asset.name,\n              type: 'mp3',\n              uri: asset.uri\n            });\n          }\n          // FYI: downloadAsync is a no-op on web and immediately returns a promise that resolves to the original url\n          // TODO(@hirbod): evaluate if we should implement downloadAsync for web instead\n          yield assetToDownload.downloadAsync();\n          // Use the local URI if available after download\n          if (assetToDownload.localUri) {\n            var finalUri = assetToDownload.localUri;\n            // On web, we need to fetch the audio file and create a blob URL\n            // this fully downloads the file to the user's device memory and makes it available for the user to play\n            // fetch() is subject to CORS restrictions, so we need to document this for the users on web\n            // TODO(@hirbod): evaluate if we should implement a downloadAsync for web instead of using fetch here\n            if (require(_dependencyMap[3], \"expo-modules-core\").Platform.OS === 'web') {\n              var response = yield fetch(assetToDownload.localUri);\n              var blob = yield response.blob();\n              finalUri = URL.createObjectURL(blob);\n            }\n            if (fallbackSource && typeof fallbackSource === 'object') {\n              return {\n                ...fallbackSource,\n                uri: finalUri\n              };\n            }\n            return {\n              uri: finalUri\n            };\n          } else {\n            console.warn('No localUri found, asset may not have downloaded properly, returning the original source');\n          }\n        } catch (error) {\n          // If download fails, fall back to original source\n          console.warn('expo-audio: Failed to download asset, falling back to original source:', error);\n        }\n      }\n      // Fallback to normal resolution\n      return fallbackSource;\n    });\n    return _resolveSourceWithDownload.apply(this, arguments);\n  }\n});","lineCount":140,"map":[[9,2,3,0],[9,11,3,9,"getAssetFromSource"],[9,29,3,27,"getAssetFromSource"],[9,30,3,28,"source"],[9,36,3,34],[9,38,3,36],[10,4,4,4],[10,8,4,8],[10,9,4,9,"source"],[10,15,4,15],[10,17,4,17],[11,6,5,8],[11,13,5,15],[11,17,5,19],[12,4,6,4],[13,4,7,4],[13,8,7,8,"source"],[13,14,7,14],[13,26,7,26,"Asset"],[13,52,7,26],[13,53,7,26,"Asset"],[13,72,7,31],[13,74,7,33],[14,6,8,8],[14,13,8,15,"source"],[14,19,8,21],[15,4,9,4],[16,4,10,4],[16,8,10,8],[16,15,10,15,"source"],[16,21,10,21],[16,26,10,26],[16,34,10,34],[16,36,10,36],[17,6,11,8],[17,13,11,15,"Asset"],[17,39,11,15],[17,40,11,15,"Asset"],[17,59,11,20],[17,60,11,21,"fromModule"],[17,70,11,31],[17,71,11,32,"source"],[17,77,11,38],[17,78,11,39],[18,4,12,4],[19,4,13,4],[19,8,13,8],[19,15,13,15,"source"],[19,21,13,21],[19,26,13,26],[19,34,13,34],[19,36,13,36],[20,6,14,8],[20,10,14,12],[20,19,14,21],[20,23,14,25,"source"],[20,29,14,31],[20,33,14,35],[20,40,14,42,"source"],[20,46,14,48],[20,47,14,49,"assetId"],[20,54,14,56],[20,59,14,61],[20,67,14,69],[20,69,14,71],[21,8,15,12],[21,15,15,19,"Asset"],[21,41,15,19],[21,42,15,19,"Asset"],[21,61,15,24],[21,62,15,25,"fromModule"],[21,72,15,35],[21,73,15,36,"source"],[21,79,15,42],[21,80,15,43,"assetId"],[21,87,15,50],[21,88,15,51],[22,6,16,8],[23,6,17,8],[23,10,17,12],[23,15,17,17],[23,19,17,21,"source"],[23,25,17,27],[23,29,17,31],[23,36,17,38,"source"],[23,42,17,44],[23,43,17,45,"uri"],[23,46,17,48],[23,51,17,53],[23,59,17,61],[23,61,17,63],[24,8,18,12],[24,15,18,19,"Asset"],[24,41,18,19],[24,42,18,19,"Asset"],[24,61,18,24],[24,62,18,25,"fromURI"],[24,69,18,32],[24,70,18,33,"source"],[24,76,18,39],[24,77,18,40,"uri"],[24,80,18,43],[24,81,18,44],[25,6,19,8],[26,4,20,4],[27,4,21,4],[27,8,21,8],[27,15,21,15,"source"],[27,21,21,21],[27,26,21,26],[27,34,21,34],[27,36,21,36],[28,6,22,8],[28,13,22,15,"Asset"],[28,39,22,15],[28,40,22,15,"Asset"],[28,59,22,20],[28,60,22,21,"fromURI"],[28,67,22,28],[28,68,22,29,"source"],[28,74,22,35],[28,75,22,36],[29,4,23,4],[30,4,24,4],[30,11,24,11],[30,15,24,15],[31,2,25,0],[32,2,26,0],[32,11,26,9,"createSourceFromAsset"],[32,32,26,30,"createSourceFromAsset"],[32,33,26,31,"asset"],[32,38,26,36],[32,40,26,51],[33,4,26,51],[33,8,26,38,"extras"],[33,14,26,44],[33,17,26,44,"arguments"],[33,26,26,44],[33,27,26,44,"length"],[33,33,26,44],[33,41,26,44,"arguments"],[33,50,26,44],[33,58,26,44,"undefined"],[33,67,26,44],[33,70,26,44,"arguments"],[33,79,26,44],[33,85,26,47],[33,86,26,48],[33,87,26,49],[34,4,27,4],[34,8,27,10,"uri"],[34,11,27,13],[34,14,27,16,"asset"],[34,19,27,21],[34,20,27,22,"localUri"],[34,28,27,30],[34,32,27,34,"asset"],[34,37,27,39],[34,38,27,40,"uri"],[34,41,27,43],[35,4,28,4],[35,8,28,10,"result"],[35,14,28,16],[35,17,28,19],[36,6,28,21,"uri"],[37,4,28,25],[37,5,28,26],[38,4,29,4],[38,8,29,8,"extras"],[38,14,29,14],[38,15,29,15,"assetId"],[38,22,29,22],[38,26,29,26],[38,30,29,30],[38,32,29,32],[39,6,30,8,"result"],[39,12,30,14],[39,13,30,15,"assetId"],[39,20,30,22],[39,23,30,25,"extras"],[39,29,30,31],[39,30,30,32,"assetId"],[39,37,30,39],[40,4,31,4],[41,4,32,4],[41,8,32,8,"extras"],[41,14,32,14],[41,15,32,15,"headers"],[41,22,32,22],[41,24,32,24],[42,6,33,8,"result"],[42,12,33,14],[42,13,33,15,"headers"],[42,20,33,22],[42,23,33,25,"extras"],[42,29,33,31],[42,30,33,32,"headers"],[42,37,33,39],[43,4,34,4],[44,4,35,4],[44,11,35,11,"result"],[44,17,35,17],[45,2,36,0],[46,2,37,7],[46,11,37,16,"resolveSource"],[46,24,37,29,"resolveSource"],[46,25,37,30,"source"],[46,31,37,36],[46,33,37,38],[47,4,38,4],[47,8,38,8,"source"],[47,14,38,14],[47,18,38,18],[47,22,38,22],[47,24,38,24],[48,6,39,8],[48,13,39,15],[48,17,39,19],[49,4,40,4],[50,4,41,4],[50,8,41,8,"source"],[50,14,41,14],[50,26,41,26,"Asset"],[50,52,41,26],[50,53,41,26,"Asset"],[50,72,41,31],[50,74,41,33],[51,6,42,8],[51,13,42,15,"createSourceFromAsset"],[51,34,42,36],[51,35,42,37,"source"],[51,41,42,43],[51,42,42,44],[52,4,43,4],[53,4,44,4],[53,8,44,8],[53,15,44,15,"source"],[53,21,44,21],[53,26,44,26],[53,34,44,34],[53,36,44,36],[54,6,45,8],[54,13,45,15],[55,8,45,17,"uri"],[55,11,45,20],[55,13,45,22,"source"],[56,6,45,29],[56,7,45,30],[57,4,46,4],[58,4,47,4],[58,8,47,8],[58,15,47,15,"source"],[58,21,47,21],[58,26,47,26],[58,34,47,34],[58,36,47,36],[59,6,48,8],[59,10,48,14,"asset"],[59,15,48,19],[59,18,48,22,"Asset"],[59,44,48,22],[59,45,48,22,"Asset"],[59,64,48,27],[59,65,48,28,"fromModule"],[59,75,48,38],[59,76,48,39,"source"],[59,82,48,45],[59,83,48,46],[60,6,49,8],[60,13,49,15,"createSourceFromAsset"],[60,34,49,36],[60,35,49,37,"asset"],[60,40,49,42],[60,42,49,44],[61,8,49,46,"assetId"],[61,15,49,53],[61,17,49,55,"source"],[62,6,49,62],[62,7,49,63],[62,8,49,64],[63,4,50,4],[64,4,51,4],[64,8,51,8],[64,15,51,15,"source"],[64,21,51,21],[64,26,51,26],[64,34,51,34],[64,36,51,36],[65,6,52,8],[65,10,52,12],[65,19,52,21],[65,23,52,25,"source"],[65,29,52,31],[65,33,52,35],[65,40,52,42,"source"],[65,46,52,48],[65,47,52,49,"assetId"],[65,54,52,56],[65,59,52,61],[65,67,52,69],[65,69,52,71],[66,8,53,12],[66,12,53,18,"asset"],[66,18,53,23],[66,21,53,26,"Asset"],[66,47,53,26],[66,48,53,26,"Asset"],[66,67,53,31],[66,68,53,32,"fromModule"],[66,78,53,42],[66,79,53,43,"source"],[66,85,53,49],[66,86,53,50,"assetId"],[66,93,53,57],[66,94,53,58],[67,8,54,12],[67,15,54,19],[68,10,55,16],[68,13,55,19,"source"],[68,19,55,25],[69,10,56,16,"uri"],[69,13,56,19],[69,15,56,21,"asset"],[69,21,56,26],[69,22,56,27,"localUri"],[69,30,56,35],[69,34,56,39,"asset"],[69,40,56,44],[69,41,56,45,"uri"],[70,8,57,12],[70,9,57,13],[71,6,58,8],[72,6,59,8],[72,10,59,12],[72,15,59,17],[72,19,59,21,"source"],[72,25,59,27],[72,29,59,31],[72,36,59,38,"source"],[72,42,59,44],[72,43,59,45,"uri"],[72,46,59,48],[72,51,59,53],[72,59,59,61],[72,61,59,63],[73,8,60,12],[73,15,60,19,"source"],[73,21,60,25],[74,6,61,8],[75,4,62,4],[76,4,63,4],[76,11,63,11,"source"],[76,17,63,17],[76,21,63,21],[76,25,63,25],[77,2,64,0],[78,2,65,0],[79,0,66,0],[80,0,67,0],[81,0,68,0],[82,2,65,0],[82,11,69,22,"resolveSourceWithDownload"],[82,36,69,47,"resolveSourceWithDownload"],[82,37,69,47,"_x"],[82,39,69,47],[83,4,69,47],[83,11,69,47,"_resolveSourceWithDownload"],[83,37,69,47],[83,38,69,47,"apply"],[83,43,69,47],[83,50,69,47,"arguments"],[83,59,69,47],[84,2,69,47],[85,2,69,47],[85,11,69,47,"_resolveSourceWithDownload"],[85,38,69,47],[86,4,69,47,"_resolveSourceWithDownload"],[86,30,69,47],[86,37,69,47,"_asyncToGenerator2"],[86,55,69,47],[86,56,69,47,"default"],[86,63,69,47],[86,65,69,7],[86,76,69,48,"source"],[86,82,69,54],[86,84,69,56],[87,6,70,4],[87,10,70,10,"asset"],[87,15,70,15],[87,18,70,18,"getAssetFromSource"],[87,36,70,36],[87,37,70,37,"source"],[87,43,70,43],[87,44,70,44],[88,6,71,4],[88,10,71,10,"fallbackSource"],[88,24,71,24],[88,27,71,27,"resolveSource"],[88,40,71,40],[88,41,71,41,"source"],[88,47,71,47],[88,48,71,48],[89,6,72,4],[89,10,72,8,"asset"],[89,15,72,13],[89,17,72,15],[90,8,73,8],[90,12,73,12,"assetToDownload"],[90,27,73,27],[90,30,73,30,"asset"],[90,35,73,35],[91,8,74,8],[91,12,74,12],[92,10,75,12],[93,10,76,12],[94,10,77,12],[95,10,78,12],[96,10,79,12],[96,14,79,16],[96,15,79,17,"assetToDownload"],[96,30,79,32],[96,31,79,33,"type"],[96,35,79,37],[96,37,79,39],[97,12,80,16,"assetToDownload"],[97,27,80,31],[97,30,80,34],[97,35,80,38,"Asset"],[97,61,80,38],[97,62,80,38,"Asset"],[97,81,80,43],[97,83,80,44],[98,14,81,20,"name"],[98,18,81,24],[98,20,81,26,"asset"],[98,25,81,31],[98,26,81,32,"name"],[98,30,81,36],[99,14,82,20,"type"],[99,18,82,24],[99,20,82,26],[99,25,82,31],[100,14,83,20,"uri"],[100,17,83,23],[100,19,83,25,"asset"],[100,24,83,30],[100,25,83,31,"uri"],[101,12,84,16],[101,13,84,17],[101,14,84,18],[102,10,85,12],[103,10,86,12],[104,10,87,12],[105,10,88,12],[105,16,88,18,"assetToDownload"],[105,31,88,33],[105,32,88,34,"downloadAsync"],[105,45,88,47],[105,46,88,48],[105,47,88,49],[106,10,89,12],[107,10,90,12],[107,14,90,16,"assetToDownload"],[107,29,90,31],[107,30,90,32,"localUri"],[107,38,90,40],[107,40,90,42],[108,12,91,16],[108,16,91,20,"finalUri"],[108,24,91,28],[108,27,91,31,"assetToDownload"],[108,42,91,46],[108,43,91,47,"localUri"],[108,51,91,55],[109,12,92,16],[110,12,93,16],[111,12,94,16],[112,12,95,16],[113,12,96,16],[113,16,96,20,"Platform"],[113,42,96,20],[113,43,96,20,"Platform"],[113,72,96,28],[113,73,96,29,"OS"],[113,75,96,31],[113,80,96,36],[113,85,96,41],[113,87,96,43],[114,14,97,20],[114,18,97,26,"response"],[114,26,97,34],[114,35,97,43,"fetch"],[114,40,97,48],[114,41,97,49,"assetToDownload"],[114,56,97,64],[114,57,97,65,"localUri"],[114,65,97,73],[114,66,97,74],[115,14,98,20],[115,18,98,26,"blob"],[115,22,98,30],[115,31,98,39,"response"],[115,39,98,47],[115,40,98,48,"blob"],[115,44,98,52],[115,45,98,53],[115,46,98,54],[116,14,99,20,"finalUri"],[116,22,99,28],[116,25,99,31,"URL"],[116,28,99,34],[116,29,99,35,"createObjectURL"],[116,44,99,50],[116,45,99,51,"blob"],[116,49,99,55],[116,50,99,56],[117,12,100,16],[118,12,101,16],[118,16,101,20,"fallbackSource"],[118,30,101,34],[118,34,101,38],[118,41,101,45,"fallbackSource"],[118,55,101,59],[118,60,101,64],[118,68,101,72],[118,70,101,74],[119,14,102,20],[119,21,102,27],[120,16,103,24],[120,19,103,27,"fallbackSource"],[120,33,103,41],[121,16,104,24,"uri"],[121,19,104,27],[121,21,104,29,"finalUri"],[122,14,105,20],[122,15,105,21],[123,12,106,16],[124,12,107,16],[124,19,107,23],[125,14,107,25,"uri"],[125,17,107,28],[125,19,107,30,"finalUri"],[126,12,107,39],[126,13,107,40],[127,10,108,12],[127,11,108,13],[127,17,109,17],[128,12,110,16,"console"],[128,19,110,23],[128,20,110,24,"warn"],[128,24,110,28],[128,25,110,29],[128,115,110,119],[128,116,110,120],[129,10,111,12],[130,8,112,8],[130,9,112,9],[130,10,113,8],[130,17,113,15,"error"],[130,22,113,20],[130,24,113,22],[131,10,114,12],[132,10,115,12,"console"],[132,17,115,19],[132,18,115,20,"warn"],[132,22,115,24],[132,23,115,25],[132,95,115,97],[132,97,115,99,"error"],[132,102,115,104],[132,103,115,105],[133,8,116,8],[134,6,117,4],[135,6,118,4],[136,6,119,4],[136,13,119,11,"fallbackSource"],[136,27,119,25],[137,4,120,0],[137,5,120,1],[138,4,120,1],[138,11,120,1,"_resolveSourceWithDownload"],[138,37,120,1],[138,38,120,1,"apply"],[138,43,120,1],[138,50,120,1,"arguments"],[138,59,120,1],[139,2,120,1],[140,0,120,1],[140,3]],"functionMap":{"names":["<global>","getAssetFromSource","createSourceFromAsset","resolveSource","resolveSourceWithDownload"],"mappings":"AAA;ACE;CDsB;AEC;CFU;OGC;CH2B;OIK;CJmD"}},"type":"js/module"}]}