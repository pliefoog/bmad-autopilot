{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":15},"end":{"line":3,"column":31,"index":46}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}},{"name":"./NavigationBuilderContext.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":47},"end":{"line":4,"column":73,"index":120}}],"key":"vvb+tbs8cGp9hlTxgL5PZCjRz5E=","exportNames":["*"],"imports":1}},{"name":"./NavigationRouteContext.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":121},"end":{"line":5,"column":69,"index":190}}],"key":"AWXnpGNA5UkH1qQUM7hLv2L9KzI=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.shouldPreventRemove = void 0;\n  exports.useOnPreventRemove = useOnPreventRemove;\n  var React = _interopRequireWildcard(require(_dependencyMap[0], \"react\"));\n  function _interopRequireWildcard(e, t) { if (\"function\" == typeof WeakMap) var r = new WeakMap(), n = new WeakMap(); return (_interopRequireWildcard = function (e, t) { if (!t && e && e.__esModule) return e; var o, i, f = { __proto__: null, default: e }; if (null === e || \"object\" != typeof e && \"function\" != typeof e) return f; if (o = t ? n : r) { if (o.has(e)) return o.get(e); o.set(e, f); } for (const t in e) \"default\" !== t && {}.hasOwnProperty.call(e, t) && ((i = (o = Object.defineProperty) && Object.getOwnPropertyDescriptor(e, t)) && (i.get || i.set) ? o(f, t, i) : f[t] = e[t]); return f; })(e, t); }\n  const VISITED_ROUTE_KEYS = Symbol('VISITED_ROUTE_KEYS');\n  const shouldPreventRemove = (emitter, beforeRemoveListeners, currentRoutes, nextRoutes, action) => {\n    const nextRouteKeys = nextRoutes.map(route => route.key);\n\n    // Call these in reverse order so last screens handle the event first\n    const removedRoutes = currentRoutes.filter(route => !nextRouteKeys.includes(route.key)).reverse();\n    const visitedRouteKeys =\n    // @ts-expect-error: add this property to mark that we've already emitted this action\n    action[VISITED_ROUTE_KEYS] ?? new Set();\n    const beforeRemoveAction = {\n      ...action,\n      [VISITED_ROUTE_KEYS]: visitedRouteKeys\n    };\n    for (const route of removedRoutes) {\n      if (visitedRouteKeys.has(route.key)) {\n        // Skip if we've already emitted this action for this screen\n        continue;\n      }\n\n      // First, we need to check if any child screens want to prevent it\n      const isPrevented = beforeRemoveListeners[route.key]?.(beforeRemoveAction);\n      if (isPrevented) {\n        return true;\n      }\n      visitedRouteKeys.add(route.key);\n      const event = emitter.emit({\n        type: 'beforeRemove',\n        target: route.key,\n        data: {\n          action: beforeRemoveAction\n        },\n        canPreventDefault: true\n      });\n      if (event.defaultPrevented) {\n        return true;\n      }\n    }\n    return false;\n  };\n  exports.shouldPreventRemove = shouldPreventRemove;\n  function useOnPreventRemove({\n    getState,\n    emitter,\n    beforeRemoveListeners\n  }) {\n    const {\n      addKeyedListener\n    } = React.useContext(require(_dependencyMap[1], \"./NavigationBuilderContext.js\").NavigationBuilderContext);\n    const route = React.useContext(require(_dependencyMap[2], \"./NavigationRouteContext.js\").NavigationRouteContext);\n    const routeKey = route?.key;\n    React.useEffect(() => {\n      if (routeKey) {\n        return addKeyedListener?.('beforeRemove', routeKey, action => {\n          const state = getState();\n          return shouldPreventRemove(emitter, beforeRemoveListeners, state.routes, [], action);\n        });\n      }\n    }, [addKeyedListener, beforeRemoveListeners, emitter, getState, routeKey]);\n  }\n});","lineCount":70,"map":[[2,2,1,0],[2,14,1,12],[4,2,1,13,"Object"],[4,8,1,13],[4,9,1,13,"defineProperty"],[4,23,1,13],[4,24,1,13,"exports"],[4,31,1,13],[5,4,1,13,"value"],[5,9,1,13],[6,2,1,13],[7,2,1,13,"exports"],[7,9,1,13],[7,10,1,13,"shouldPreventRemove"],[7,29,1,13],[8,2,1,13,"exports"],[8,9,1,13],[8,10,1,13,"useOnPreventRemove"],[8,28,1,13],[8,31,1,13,"useOnPreventRemove"],[8,49,1,13],[9,2,3,0],[9,6,3,0,"React"],[9,11,3,0],[9,14,3,0,"_interopRequireWildcard"],[9,37,3,0],[9,38,3,0,"require"],[9,45,3,0],[9,46,3,0,"_dependencyMap"],[9,60,3,0],[10,2,3,31],[10,11,3,31,"_interopRequireWildcard"],[10,35,3,31,"e"],[10,36,3,31],[10,38,3,31,"t"],[10,39,3,31],[10,68,3,31,"WeakMap"],[10,75,3,31],[10,81,3,31,"r"],[10,82,3,31],[10,89,3,31,"WeakMap"],[10,96,3,31],[10,100,3,31,"n"],[10,101,3,31],[10,108,3,31,"WeakMap"],[10,115,3,31],[10,127,3,31,"_interopRequireWildcard"],[10,150,3,31],[10,162,3,31,"_interopRequireWildcard"],[10,163,3,31,"e"],[10,164,3,31],[10,166,3,31,"t"],[10,167,3,31],[10,176,3,31,"t"],[10,177,3,31],[10,181,3,31,"e"],[10,182,3,31],[10,186,3,31,"e"],[10,187,3,31],[10,188,3,31,"__esModule"],[10,198,3,31],[10,207,3,31,"e"],[10,208,3,31],[10,214,3,31,"o"],[10,215,3,31],[10,217,3,31,"i"],[10,218,3,31],[10,220,3,31,"f"],[10,221,3,31],[10,226,3,31,"__proto__"],[10,235,3,31],[10,243,3,31,"default"],[10,250,3,31],[10,252,3,31,"e"],[10,253,3,31],[10,270,3,31,"e"],[10,271,3,31],[10,294,3,31,"e"],[10,295,3,31],[10,320,3,31,"e"],[10,321,3,31],[10,330,3,31,"f"],[10,331,3,31],[10,337,3,31,"o"],[10,338,3,31],[10,341,3,31,"t"],[10,342,3,31],[10,345,3,31,"n"],[10,346,3,31],[10,349,3,31,"r"],[10,350,3,31],[10,358,3,31,"o"],[10,359,3,31],[10,360,3,31,"has"],[10,363,3,31],[10,364,3,31,"e"],[10,365,3,31],[10,375,3,31,"o"],[10,376,3,31],[10,377,3,31,"get"],[10,380,3,31],[10,381,3,31,"e"],[10,382,3,31],[10,385,3,31,"o"],[10,386,3,31],[10,387,3,31,"set"],[10,390,3,31],[10,391,3,31,"e"],[10,392,3,31],[10,394,3,31,"f"],[10,395,3,31],[10,411,3,31,"t"],[10,412,3,31],[10,416,3,31,"e"],[10,417,3,31],[10,433,3,31,"t"],[10,434,3,31],[10,441,3,31,"hasOwnProperty"],[10,455,3,31],[10,456,3,31,"call"],[10,460,3,31],[10,461,3,31,"e"],[10,462,3,31],[10,464,3,31,"t"],[10,465,3,31],[10,472,3,31,"i"],[10,473,3,31],[10,477,3,31,"o"],[10,478,3,31],[10,481,3,31,"Object"],[10,487,3,31],[10,488,3,31,"defineProperty"],[10,502,3,31],[10,507,3,31,"Object"],[10,513,3,31],[10,514,3,31,"getOwnPropertyDescriptor"],[10,538,3,31],[10,539,3,31,"e"],[10,540,3,31],[10,542,3,31,"t"],[10,543,3,31],[10,550,3,31,"i"],[10,551,3,31],[10,552,3,31,"get"],[10,555,3,31],[10,559,3,31,"i"],[10,560,3,31],[10,561,3,31,"set"],[10,564,3,31],[10,568,3,31,"o"],[10,569,3,31],[10,570,3,31,"f"],[10,571,3,31],[10,573,3,31,"t"],[10,574,3,31],[10,576,3,31,"i"],[10,577,3,31],[10,581,3,31,"f"],[10,582,3,31],[10,583,3,31,"t"],[10,584,3,31],[10,588,3,31,"e"],[10,589,3,31],[10,590,3,31,"t"],[10,591,3,31],[10,602,3,31,"f"],[10,603,3,31],[10,608,3,31,"e"],[10,609,3,31],[10,611,3,31,"t"],[10,612,3,31],[11,2,6,0],[11,8,6,6,"VISITED_ROUTE_KEYS"],[11,26,6,24],[11,29,6,27,"Symbol"],[11,35,6,33],[11,36,6,34],[11,56,6,54],[11,57,6,55],[12,2,7,7],[12,8,7,13,"shouldPreventRemove"],[12,27,7,32],[12,30,7,35,"shouldPreventRemove"],[12,31,7,36,"emitter"],[12,38,7,43],[12,40,7,45,"beforeRemoveListeners"],[12,61,7,66],[12,63,7,68,"currentRoutes"],[12,76,7,81],[12,78,7,83,"nextRoutes"],[12,88,7,93],[12,90,7,95,"action"],[12,96,7,101],[12,101,7,106],[13,4,8,2],[13,10,8,8,"nextRouteKeys"],[13,23,8,21],[13,26,8,24,"nextRoutes"],[13,36,8,34],[13,37,8,35,"map"],[13,40,8,38],[13,41,8,39,"route"],[13,46,8,44],[13,50,8,48,"route"],[13,55,8,53],[13,56,8,54,"key"],[13,59,8,57],[13,60,8,58],[15,4,10,2],[16,4,11,2],[16,10,11,8,"removedRoutes"],[16,23,11,21],[16,26,11,24,"currentRoutes"],[16,39,11,37],[16,40,11,38,"filter"],[16,46,11,44],[16,47,11,45,"route"],[16,52,11,50],[16,56,11,54],[16,57,11,55,"nextRouteKeys"],[16,70,11,68],[16,71,11,69,"includes"],[16,79,11,77],[16,80,11,78,"route"],[16,85,11,83],[16,86,11,84,"key"],[16,89,11,87],[16,90,11,88],[16,91,11,89],[16,92,11,90,"reverse"],[16,99,11,97],[16,100,11,98],[16,101,11,99],[17,4,12,2],[17,10,12,8,"visitedRouteKeys"],[17,26,12,24],[18,4,13,2],[19,4,14,2,"action"],[19,10,14,8],[19,11,14,9,"VISITED_ROUTE_KEYS"],[19,29,14,27],[19,30,14,28],[19,34,14,32],[19,38,14,36,"Set"],[19,41,14,39],[19,42,14,40],[19,43,14,41],[20,4,15,2],[20,10,15,8,"beforeRemoveAction"],[20,28,15,26],[20,31,15,29],[21,6,16,4],[21,9,16,7,"action"],[21,15,16,13],[22,6,17,4],[22,7,17,5,"VISITED_ROUTE_KEYS"],[22,25,17,23],[22,28,17,26,"visitedRouteKeys"],[23,4,18,2],[23,5,18,3],[24,4,19,2],[24,9,19,7],[24,15,19,13,"route"],[24,20,19,18],[24,24,19,22,"removedRoutes"],[24,37,19,35],[24,39,19,37],[25,6,20,4],[25,10,20,8,"visitedRouteKeys"],[25,26,20,24],[25,27,20,25,"has"],[25,30,20,28],[25,31,20,29,"route"],[25,36,20,34],[25,37,20,35,"key"],[25,40,20,38],[25,41,20,39],[25,43,20,41],[26,8,21,6],[27,8,22,6],[28,6,23,4],[30,6,25,4],[31,6,26,4],[31,12,26,10,"isPrevented"],[31,23,26,21],[31,26,26,24,"beforeRemoveListeners"],[31,47,26,45],[31,48,26,46,"route"],[31,53,26,51],[31,54,26,52,"key"],[31,57,26,55],[31,58,26,56],[31,61,26,59,"beforeRemoveAction"],[31,79,26,77],[31,80,26,78],[32,6,27,4],[32,10,27,8,"isPrevented"],[32,21,27,19],[32,23,27,21],[33,8,28,6],[33,15,28,13],[33,19,28,17],[34,6,29,4],[35,6,30,4,"visitedRouteKeys"],[35,22,30,20],[35,23,30,21,"add"],[35,26,30,24],[35,27,30,25,"route"],[35,32,30,30],[35,33,30,31,"key"],[35,36,30,34],[35,37,30,35],[36,6,31,4],[36,12,31,10,"event"],[36,17,31,15],[36,20,31,18,"emitter"],[36,27,31,25],[36,28,31,26,"emit"],[36,32,31,30],[36,33,31,31],[37,8,32,6,"type"],[37,12,32,10],[37,14,32,12],[37,28,32,26],[38,8,33,6,"target"],[38,14,33,12],[38,16,33,14,"route"],[38,21,33,19],[38,22,33,20,"key"],[38,25,33,23],[39,8,34,6,"data"],[39,12,34,10],[39,14,34,12],[40,10,35,8,"action"],[40,16,35,14],[40,18,35,16,"beforeRemoveAction"],[41,8,36,6],[41,9,36,7],[42,8,37,6,"canPreventDefault"],[42,25,37,23],[42,27,37,25],[43,6,38,4],[43,7,38,5],[43,8,38,6],[44,6,39,4],[44,10,39,8,"event"],[44,15,39,13],[44,16,39,14,"defaultPrevented"],[44,32,39,30],[44,34,39,32],[45,8,40,6],[45,15,40,13],[45,19,40,17],[46,6,41,4],[47,4,42,2],[48,4,43,2],[48,11,43,9],[48,16,43,14],[49,2,44,0],[49,3,44,1],[50,2,44,2,"exports"],[50,9,44,2],[50,10,44,2,"shouldPreventRemove"],[50,29,44,2],[50,32,44,2,"shouldPreventRemove"],[50,51,44,2],[51,2,45,7],[51,11,45,16,"useOnPreventRemove"],[51,29,45,34,"useOnPreventRemove"],[51,30,45,35],[52,4,46,2,"getState"],[52,12,46,10],[53,4,47,2,"emitter"],[53,11,47,9],[54,4,48,2,"beforeRemoveListeners"],[55,2,49,0],[55,3,49,1],[55,5,49,3],[56,4,50,2],[56,10,50,8],[57,6,51,4,"addKeyedListener"],[58,4,52,2],[58,5,52,3],[58,8,52,6,"React"],[58,13,52,11],[58,14,52,12,"useContext"],[58,24,52,22],[58,25,52,23,"NavigationBuilderContext"],[58,51,52,23],[58,52,52,23,"NavigationBuilderContext"],[58,109,52,47],[58,110,52,48],[59,4,53,2],[59,10,53,8,"route"],[59,15,53,13],[59,18,53,16,"React"],[59,23,53,21],[59,24,53,22,"useContext"],[59,34,53,32],[59,35,53,33,"NavigationRouteContext"],[59,61,53,33],[59,62,53,33,"NavigationRouteContext"],[59,115,53,55],[59,116,53,56],[60,4,54,2],[60,10,54,8,"routeKey"],[60,18,54,16],[60,21,54,19,"route"],[60,26,54,24],[60,28,54,26,"key"],[60,31,54,29],[61,4,55,2,"React"],[61,9,55,7],[61,10,55,8,"useEffect"],[61,19,55,17],[61,20,55,18],[61,26,55,24],[62,6,56,4],[62,10,56,8,"routeKey"],[62,18,56,16],[62,20,56,18],[63,8,57,6],[63,15,57,13,"addKeyedListener"],[63,31,57,29],[63,34,57,32],[63,48,57,46],[63,50,57,48,"routeKey"],[63,58,57,56],[63,60,57,58,"action"],[63,66,57,64],[63,70,57,68],[64,10,58,8],[64,16,58,14,"state"],[64,21,58,19],[64,24,58,22,"getState"],[64,32,58,30],[64,33,58,31],[64,34,58,32],[65,10,59,8],[65,17,59,15,"shouldPreventRemove"],[65,36,59,34],[65,37,59,35,"emitter"],[65,44,59,42],[65,46,59,44,"beforeRemoveListeners"],[65,67,59,65],[65,69,59,67,"state"],[65,74,59,72],[65,75,59,73,"routes"],[65,81,59,79],[65,83,59,81],[65,85,59,83],[65,87,59,85,"action"],[65,93,59,91],[65,94,59,92],[66,8,60,6],[66,9,60,7],[66,10,60,8],[67,6,61,4],[68,4,62,2],[68,5,62,3],[68,7,62,5],[68,8,62,6,"addKeyedListener"],[68,24,62,22],[68,26,62,24,"beforeRemoveListeners"],[68,47,62,45],[68,49,62,47,"emitter"],[68,56,62,54],[68,58,62,56,"getState"],[68,66,62,64],[68,68,62,66,"routeKey"],[68,76,62,74],[68,77,62,75],[68,78,62,76],[69,2,63,0],[70,0,63,1],[70,3]],"functionMap":{"names":["<global>","shouldPreventRemove","nextRoutes.map$argument_0","currentRoutes.filter$argument_0","useOnPreventRemove","React.useEffect$argument_0","addKeyedListener$argument_2"],"mappings":"AAA;mCCM;uCCC,kBD;6CEG,2CF;CDiC;OIC;kBCU;0DCE;ODG;GDE;CJC"}},"type":"js/module"}]}