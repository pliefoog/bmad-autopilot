{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"kslwqCIsh6ew+I1KeA1rlVRjsAk=","exportNames":["*"],"imports":1}},{"name":"../useLayoutEffect","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":11,"column":0,"index":255},"end":{"line":11,"column":49,"index":304}}],"key":"ZNO83OGsE7bbgM7VHgfD880OI4U=","exportNames":["*"],"imports":1}},{"name":"../useStable","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":12,"column":0,"index":305},"end":{"line":12,"column":37,"index":342}}],"key":"XW9XStik11xeI23ft/PR9tQzPOs=","exportNames":["*"],"imports":1}},{"name":"../addEventListener","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":10,"column":0,"index":199},"end":{"line":10,"column":55,"index":254}}],"key":"4xvCwHsxCKw+bkXrhCHsTztm4zw=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = require(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.default = useEvent;\n  var _useLayoutEffect = _interopRequireDefault(require(_dependencyMap[1], \"../useLayoutEffect\"));\n  var _useStable = _interopRequireDefault(require(_dependencyMap[2], \"../useStable\"));\n  /**\n   * Copyright (c) Meta Platforms, Inc. and affiliates.\n   *\n   * This source code is licensed under the MIT license found in the\n   * LICENSE file in the root directory of this source tree.\n   *\n   * \n   */\n\n  /**\n   * This can be used with any event type include custom events.\n   *\n   * const click = useEvent('click', options);\n   * useEffect(() => {\n   *   click.setListener(target, onClick);\n   *   return () => click.clear();\n   * }).\n   */\n  function useEvent(eventType, options) {\n    var targetListeners = (0, _useStable.default)(() => new Map());\n    var addListener = (0, _useStable.default)(() => {\n      return (target, callback) => {\n        var removeTargetListener = targetListeners.get(target);\n        if (removeTargetListener != null) {\n          removeTargetListener();\n        }\n        if (callback == null) {\n          targetListeners.delete(target);\n          callback = () => {};\n        }\n        var removeEventListener = (0, require(_dependencyMap[3], \"../addEventListener\").addEventListener)(target, eventType, callback, options);\n        targetListeners.set(target, removeEventListener);\n        return removeEventListener;\n      };\n    });\n    (0, _useLayoutEffect.default)(() => {\n      return () => {\n        targetListeners.forEach(removeListener => {\n          removeListener();\n        });\n        targetListeners.clear();\n      };\n    }, [targetListeners]);\n    return addListener;\n  }\n});","lineCount":54,"map":[[7,2,11,0],[7,6,11,0,"_useLayoutEffect"],[7,22,11,0],[7,25,11,0,"_interopRequireDefault"],[7,47,11,0],[7,48,11,0,"require"],[7,55,11,0],[7,56,11,0,"_dependencyMap"],[7,70,11,0],[8,2,12,0],[8,6,12,0,"_useStable"],[8,16,12,0],[8,19,12,0,"_interopRequireDefault"],[8,41,12,0],[8,42,12,0,"require"],[8,49,12,0],[8,50,12,0,"_dependencyMap"],[8,64,12,0],[9,2,1,0],[10,0,2,0],[11,0,3,0],[12,0,4,0],[13,0,5,0],[14,0,6,0],[15,0,7,0],[16,0,8,0],[18,2,13,0],[19,0,14,0],[20,0,15,0],[21,0,16,0],[22,0,17,0],[23,0,18,0],[24,0,19,0],[25,0,20,0],[26,0,21,0],[27,2,22,15],[27,11,22,24,"useEvent"],[27,19,22,32,"useEvent"],[27,20,22,33,"eventType"],[27,29,22,42],[27,31,22,44,"options"],[27,38,22,51],[27,40,22,53],[28,4,23,2],[28,8,23,6,"targetListeners"],[28,23,23,21],[28,26,23,24],[28,30,23,24,"useStable"],[28,48,23,33],[28,50,23,34],[28,56,23,40],[28,60,23,44,"Map"],[28,63,23,47],[28,64,23,48],[28,65,23,49],[28,66,23,50],[29,4,24,2],[29,8,24,6,"addListener"],[29,19,24,17],[29,22,24,20],[29,26,24,20,"useStable"],[29,44,24,29],[29,46,24,30],[29,52,24,36],[30,6,25,4],[30,13,25,11],[30,14,25,12,"target"],[30,20,25,18],[30,22,25,20,"callback"],[30,30,25,28],[30,35,25,33],[31,8,26,6],[31,12,26,10,"removeTargetListener"],[31,32,26,30],[31,35,26,33,"targetListeners"],[31,50,26,48],[31,51,26,49,"get"],[31,54,26,52],[31,55,26,53,"target"],[31,61,26,59],[31,62,26,60],[32,8,27,6],[32,12,27,10,"removeTargetListener"],[32,32,27,30],[32,36,27,34],[32,40,27,38],[32,42,27,40],[33,10,28,8,"removeTargetListener"],[33,30,28,28],[33,31,28,29],[33,32,28,30],[34,8,29,6],[35,8,30,6],[35,12,30,10,"callback"],[35,20,30,18],[35,24,30,22],[35,28,30,26],[35,30,30,28],[36,10,31,8,"targetListeners"],[36,25,31,23],[36,26,31,24,"delete"],[36,32,31,30],[36,33,31,31,"target"],[36,39,31,37],[36,40,31,38],[37,10,32,8,"callback"],[37,18,32,16],[37,21,32,19,"callback"],[37,22,32,19],[37,27,32,25],[37,28,32,26],[37,29,32,27],[38,8,33,6],[39,8,34,6],[39,12,34,10,"removeEventListener"],[39,31,34,29],[39,34,34,32],[39,38,34,32,"addEventListener"],[39,64,34,32],[39,65,34,32,"addEventListener"],[39,104,34,48],[39,106,34,49,"target"],[39,112,34,55],[39,114,34,57,"eventType"],[39,123,34,66],[39,125,34,68,"callback"],[39,133,34,76],[39,135,34,78,"options"],[39,142,34,85],[39,143,34,86],[40,8,35,6,"targetListeners"],[40,23,35,21],[40,24,35,22,"set"],[40,27,35,25],[40,28,35,26,"target"],[40,34,35,32],[40,36,35,34,"removeEventListener"],[40,55,35,53],[40,56,35,54],[41,8,36,6],[41,15,36,13,"removeEventListener"],[41,34,36,32],[42,6,37,4],[42,7,37,5],[43,4,38,2],[43,5,38,3],[43,6,38,4],[44,4,39,2],[44,8,39,2,"useLayoutEffect"],[44,32,39,17],[44,34,39,18],[44,40,39,24],[45,6,40,4],[45,13,40,11],[45,19,40,17],[46,8,41,6,"targetListeners"],[46,23,41,21],[46,24,41,22,"forEach"],[46,31,41,29],[46,32,41,30,"removeListener"],[46,46,41,44],[46,50,41,48],[47,10,42,8,"removeListener"],[47,24,42,22],[47,25,42,23],[47,26,42,24],[48,8,43,6],[48,9,43,7],[48,10,43,8],[49,8,44,6,"targetListeners"],[49,23,44,21],[49,24,44,22,"clear"],[49,29,44,27],[49,30,44,28],[49,31,44,29],[50,6,45,4],[50,7,45,5],[51,4,46,2],[51,5,46,3],[51,7,46,5],[51,8,46,6,"targetListeners"],[51,23,46,21],[51,24,46,22],[51,25,46,23],[52,4,47,2],[52,11,47,9,"addListener"],[52,22,47,20],[53,2,48,0],[54,0,48,1],[54,3]],"functionMap":{"names":["<global>","useEvent","useStable$argument_0","<anonymous>","callback","useLayoutEffect$argument_0","targetListeners.forEach$argument_0"],"mappings":"AAA;eCqB;kCCC,eD;8BCC;WCC;mBCO,QD;KDK;GDC;kBIC;WFC;8BGC;OHE;KEE;GJC"}},"type":"js/module"}]}