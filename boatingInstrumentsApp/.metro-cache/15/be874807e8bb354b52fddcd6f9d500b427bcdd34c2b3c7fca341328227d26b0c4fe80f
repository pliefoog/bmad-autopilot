{"dependencies":[{"name":"./PlatformChecker.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":89},"end":{"line":4,"column":54,"index":143}}],"key":"6AA7RQghlqlrd3hVWNoLh/rI420=","exportNames":["*"],"imports":1}},{"name":"./core.js","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":15},"end":{"line":3,"column":73,"index":88}},{"start":{"line":3,"column":0,"index":15},"end":{"line":3,"column":73,"index":88}},{"start":{"line":3,"column":0,"index":15},"end":{"line":3,"column":73,"index":88}},{"start":{"line":3,"column":0,"index":15},"end":{"line":3,"column":73,"index":88}},{"start":{"line":3,"column":0,"index":15},"end":{"line":3,"column":73,"index":88}}],"key":"mJVVi7YU3vDVLm6ZethtbJGh1KY=","exportNames":["*"],"imports":5}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  'use strict';\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.WorkletEventHandler = void 0;\n  const SHOULD_BE_USE_WEB = (0, require(_dependencyMap[0], \"./PlatformChecker.js\").shouldBeUseWeb)();\n  // In JS implementation (e.g. for web) we don't use Reanimated's\n  // event emitter, therefore we have to handle here\n  // the event that came from React Native and convert it.\n  function jsListener(eventName, handler) {\n    return evt => {\n      handler({\n        ...evt.nativeEvent,\n        eventName\n      });\n    };\n  }\n  class WorkletEventHandlerNative {\n    #viewTags;\n    #registrations; // keys are viewTags, values are arrays of registration ID's for each viewTag\n    constructor(worklet, eventNames) {\n      this.worklet = worklet;\n      this.eventNames = eventNames;\n      this.#viewTags = new Set();\n      this.#registrations = new Map();\n    }\n    updateEventHandler(newWorklet, newEvents) {\n      // Update worklet and event names\n      this.worklet = newWorklet;\n      this.eventNames = newEvents;\n\n      // Detach all events\n      this.#registrations.forEach(registrationIDs => {\n        registrationIDs.forEach(id => (0, require(_dependencyMap[1], \"./core.js\").unregisterEventHandler)(id));\n        // No need to remove registrationIDs from map, since it gets overwritten when attaching\n      });\n\n      // Attach new events with new worklet\n      Array.from(this.#viewTags).forEach(tag => {\n        const newRegistrations = this.eventNames.map(eventName => (0, require(_dependencyMap[1], \"./core.js\").registerEventHandler)(this.worklet, eventName, tag));\n        this.#registrations.set(tag, newRegistrations);\n      });\n    }\n    registerForEvents(viewTag, fallbackEventName) {\n      this.#viewTags.add(viewTag);\n      const newRegistrations = this.eventNames.map(eventName => (0, require(_dependencyMap[1], \"./core.js\").registerEventHandler)(this.worklet, eventName, viewTag));\n      this.#registrations.set(viewTag, newRegistrations);\n      if (this.eventNames.length === 0 && fallbackEventName) {\n        const newRegistration = (0, require(_dependencyMap[1], \"./core.js\").registerEventHandler)(this.worklet, fallbackEventName, viewTag);\n        this.#registrations.set(viewTag, [newRegistration]);\n      }\n    }\n    unregisterFromEvents(viewTag) {\n      this.#viewTags.delete(viewTag);\n      this.#registrations.get(viewTag)?.forEach(id => {\n        (0, require(_dependencyMap[1], \"./core.js\").unregisterEventHandler)(id);\n      });\n      this.#registrations.delete(viewTag);\n    }\n  }\n  class WorkletEventHandlerWeb {\n    constructor(worklet, eventNames = []) {\n      this.worklet = worklet;\n      this.eventNames = eventNames;\n      this.listeners = {};\n      this.setupWebListeners();\n    }\n    setupWebListeners() {\n      this.listeners = {};\n      this.eventNames.forEach(eventName => {\n        this.listeners[eventName] = jsListener(eventName, this.worklet);\n      });\n    }\n    updateEventHandler(newWorklet, newEvents) {\n      // Update worklet and event names\n      this.worklet = newWorklet;\n      this.eventNames = newEvents;\n      this.setupWebListeners();\n    }\n    registerForEvents(_viewTag, _fallbackEventName) {\n      // noop\n    }\n    unregisterFromEvents(_viewTag) {\n      // noop\n    }\n  }\n  const WorkletEventHandler = exports.WorkletEventHandler = SHOULD_BE_USE_WEB ? WorkletEventHandlerWeb : WorkletEventHandlerNative;\n});","lineCount":90,"map":[[2,2,1,0],[2,14,1,12],[4,2,1,13,"Object"],[4,8,1,13],[4,9,1,13,"defineProperty"],[4,23,1,13],[4,24,1,13,"exports"],[4,31,1,13],[5,4,1,13,"value"],[5,9,1,13],[6,2,1,13],[7,2,1,13,"exports"],[7,9,1,13],[7,10,1,13,"WorkletEventHandler"],[7,29,1,13],[8,2,5,0],[8,8,5,6,"SHOULD_BE_USE_WEB"],[8,25,5,23],[8,28,5,26],[8,32,5,26,"shouldBeUseWeb"],[8,58,5,26],[8,59,5,26,"shouldBeUseWeb"],[8,97,5,40],[8,99,5,41],[8,100,5,42],[9,2,6,0],[10,2,7,0],[11,2,8,0],[12,2,9,0],[12,11,9,9,"jsListener"],[12,21,9,19,"jsListener"],[12,22,9,20,"eventName"],[12,31,9,29],[12,33,9,31,"handler"],[12,40,9,38],[12,42,9,40],[13,4,10,2],[13,11,10,9,"evt"],[13,14,10,12],[13,18,10,16],[14,6,11,4,"handler"],[14,13,11,11],[14,14,11,12],[15,8,12,6],[15,11,12,9,"evt"],[15,14,12,12],[15,15,12,13,"nativeEvent"],[15,26,12,24],[16,8,13,6,"eventName"],[17,6,14,4],[17,7,14,5],[17,8,14,6],[18,4,15,2],[18,5,15,3],[19,2,16,0],[20,2,17,0],[20,8,17,6,"WorkletEventHandlerNative"],[20,33,17,31],[20,34,17,32],[21,4,18,2],[21,5,18,3,"viewTags"],[21,13,18,11],[22,4,19,2],[22,5,19,3,"registrations"],[22,18,19,16],[22,19,19,17],[22,20,19,18],[23,4,20,2,"constructor"],[23,15,20,13,"constructor"],[23,16,20,14,"worklet"],[23,23,20,21],[23,25,20,23,"eventNames"],[23,35,20,33],[23,37,20,35],[24,6,21,4],[24,10,21,8],[24,11,21,9,"worklet"],[24,18,21,16],[24,21,21,19,"worklet"],[24,28,21,26],[25,6,22,4],[25,10,22,8],[25,11,22,9,"eventNames"],[25,21,22,19],[25,24,22,22,"eventNames"],[25,34,22,32],[26,6,23,4],[26,10,23,8],[26,11,23,9],[26,12,23,10,"viewTags"],[26,20,23,18],[26,23,23,21],[26,27,23,25,"Set"],[26,30,23,28],[26,31,23,29],[26,32,23,30],[27,6,24,4],[27,10,24,8],[27,11,24,9],[27,12,24,10,"registrations"],[27,25,24,23],[27,28,24,26],[27,32,24,30,"Map"],[27,35,24,33],[27,36,24,34],[27,37,24,35],[28,4,25,2],[29,4,26,2,"updateEventHandler"],[29,22,26,20,"updateEventHandler"],[29,23,26,21,"newWorklet"],[29,33,26,31],[29,35,26,33,"newEvents"],[29,44,26,42],[29,46,26,44],[30,6,27,4],[31,6,28,4],[31,10,28,8],[31,11,28,9,"worklet"],[31,18,28,16],[31,21,28,19,"newWorklet"],[31,31,28,29],[32,6,29,4],[32,10,29,8],[32,11,29,9,"eventNames"],[32,21,29,19],[32,24,29,22,"newEvents"],[32,33,29,31],[34,6,31,4],[35,6,32,4],[35,10,32,8],[35,11,32,9],[35,12,32,10,"registrations"],[35,25,32,23],[35,26,32,24,"forEach"],[35,33,32,31],[35,34,32,32,"registrationIDs"],[35,49,32,47],[35,53,32,51],[36,8,33,6,"registrationIDs"],[36,23,33,21],[36,24,33,22,"forEach"],[36,31,33,29],[36,32,33,30,"id"],[36,34,33,32],[36,38,33,36],[36,42,33,36,"unregisterEventHandler"],[36,68,33,36],[36,69,33,36,"unregisterEventHandler"],[36,104,33,58],[36,106,33,59,"id"],[36,108,33,61],[36,109,33,62],[36,110,33,63],[37,8,34,6],[38,6,35,4],[38,7,35,5],[38,8,35,6],[40,6,37,4],[41,6,38,4,"Array"],[41,11,38,9],[41,12,38,10,"from"],[41,16,38,14],[41,17,38,15],[41,21,38,19],[41,22,38,20],[41,23,38,21,"viewTags"],[41,31,38,29],[41,32,38,30],[41,33,38,31,"forEach"],[41,40,38,38],[41,41,38,39,"tag"],[41,44,38,42],[41,48,38,46],[42,8,39,6],[42,14,39,12,"newRegistrations"],[42,30,39,28],[42,33,39,31],[42,37,39,35],[42,38,39,36,"eventNames"],[42,48,39,46],[42,49,39,47,"map"],[42,52,39,50],[42,53,39,51,"eventName"],[42,62,39,60],[42,66,39,64],[42,70,39,64,"registerEventHandler"],[42,96,39,64],[42,97,39,64,"registerEventHandler"],[42,130,39,84],[42,132,39,85],[42,136,39,89],[42,137,39,90,"worklet"],[42,144,39,97],[42,146,39,99,"eventName"],[42,155,39,108],[42,157,39,110,"tag"],[42,160,39,113],[42,161,39,114],[42,162,39,115],[43,8,40,6],[43,12,40,10],[43,13,40,11],[43,14,40,12,"registrations"],[43,27,40,25],[43,28,40,26,"set"],[43,31,40,29],[43,32,40,30,"tag"],[43,35,40,33],[43,37,40,35,"newRegistrations"],[43,53,40,51],[43,54,40,52],[44,6,41,4],[44,7,41,5],[44,8,41,6],[45,4,42,2],[46,4,43,2,"registerForEvents"],[46,21,43,19,"registerForEvents"],[46,22,43,20,"viewTag"],[46,29,43,27],[46,31,43,29,"fallbackEventName"],[46,48,43,46],[46,50,43,48],[47,6,44,4],[47,10,44,8],[47,11,44,9],[47,12,44,10,"viewTags"],[47,20,44,18],[47,21,44,19,"add"],[47,24,44,22],[47,25,44,23,"viewTag"],[47,32,44,30],[47,33,44,31],[48,6,45,4],[48,12,45,10,"newRegistrations"],[48,28,45,26],[48,31,45,29],[48,35,45,33],[48,36,45,34,"eventNames"],[48,46,45,44],[48,47,45,45,"map"],[48,50,45,48],[48,51,45,49,"eventName"],[48,60,45,58],[48,64,45,62],[48,68,45,62,"registerEventHandler"],[48,94,45,62],[48,95,45,62,"registerEventHandler"],[48,128,45,82],[48,130,45,83],[48,134,45,87],[48,135,45,88,"worklet"],[48,142,45,95],[48,144,45,97,"eventName"],[48,153,45,106],[48,155,45,108,"viewTag"],[48,162,45,115],[48,163,45,116],[48,164,45,117],[49,6,46,4],[49,10,46,8],[49,11,46,9],[49,12,46,10,"registrations"],[49,25,46,23],[49,26,46,24,"set"],[49,29,46,27],[49,30,46,28,"viewTag"],[49,37,46,35],[49,39,46,37,"newRegistrations"],[49,55,46,53],[49,56,46,54],[50,6,47,4],[50,10,47,8],[50,14,47,12],[50,15,47,13,"eventNames"],[50,25,47,23],[50,26,47,24,"length"],[50,32,47,30],[50,37,47,35],[50,38,47,36],[50,42,47,40,"fallbackEventName"],[50,59,47,57],[50,61,47,59],[51,8,48,6],[51,14,48,12,"newRegistration"],[51,29,48,27],[51,32,48,30],[51,36,48,30,"registerEventHandler"],[51,62,48,30],[51,63,48,30,"registerEventHandler"],[51,96,48,50],[51,98,48,51],[51,102,48,55],[51,103,48,56,"worklet"],[51,110,48,63],[51,112,48,65,"fallbackEventName"],[51,129,48,82],[51,131,48,84,"viewTag"],[51,138,48,91],[51,139,48,92],[52,8,49,6],[52,12,49,10],[52,13,49,11],[52,14,49,12,"registrations"],[52,27,49,25],[52,28,49,26,"set"],[52,31,49,29],[52,32,49,30,"viewTag"],[52,39,49,37],[52,41,49,39],[52,42,49,40,"newRegistration"],[52,57,49,55],[52,58,49,56],[52,59,49,57],[53,6,50,4],[54,4,51,2],[55,4,52,2,"unregisterFromEvents"],[55,24,52,22,"unregisterFromEvents"],[55,25,52,23,"viewTag"],[55,32,52,30],[55,34,52,32],[56,6,53,4],[56,10,53,8],[56,11,53,9],[56,12,53,10,"viewTags"],[56,20,53,18],[56,21,53,19,"delete"],[56,27,53,25],[56,28,53,26,"viewTag"],[56,35,53,33],[56,36,53,34],[57,6,54,4],[57,10,54,8],[57,11,54,9],[57,12,54,10,"registrations"],[57,25,54,23],[57,26,54,24,"get"],[57,29,54,27],[57,30,54,28,"viewTag"],[57,37,54,35],[57,38,54,36],[57,40,54,38,"forEach"],[57,47,54,45],[57,48,54,46,"id"],[57,50,54,48],[57,54,54,52],[58,8,55,6],[58,12,55,6,"unregisterEventHandler"],[58,38,55,6],[58,39,55,6,"unregisterEventHandler"],[58,74,55,28],[58,76,55,29,"id"],[58,78,55,31],[58,79,55,32],[59,6,56,4],[59,7,56,5],[59,8,56,6],[60,6,57,4],[60,10,57,8],[60,11,57,9],[60,12,57,10,"registrations"],[60,25,57,23],[60,26,57,24,"delete"],[60,32,57,30],[60,33,57,31,"viewTag"],[60,40,57,38],[60,41,57,39],[61,4,58,2],[62,2,59,0],[63,2,60,0],[63,8,60,6,"WorkletEventHandlerWeb"],[63,30,60,28],[63,31,60,29],[64,4,61,2,"constructor"],[64,15,61,13,"constructor"],[64,16,61,14,"worklet"],[64,23,61,21],[64,25,61,23,"eventNames"],[64,35,61,33],[64,38,61,36],[64,40,61,38],[64,42,61,40],[65,6,62,4],[65,10,62,8],[65,11,62,9,"worklet"],[65,18,62,16],[65,21,62,19,"worklet"],[65,28,62,26],[66,6,63,4],[66,10,63,8],[66,11,63,9,"eventNames"],[66,21,63,19],[66,24,63,22,"eventNames"],[66,34,63,32],[67,6,64,4],[67,10,64,8],[67,11,64,9,"listeners"],[67,20,64,18],[67,23,64,21],[67,24,64,22],[67,25,64,23],[68,6,65,4],[68,10,65,8],[68,11,65,9,"setupWebListeners"],[68,28,65,26],[68,29,65,27],[68,30,65,28],[69,4,66,2],[70,4,67,2,"setupWebListeners"],[70,21,67,19,"setupWebListeners"],[70,22,67,19],[70,24,67,22],[71,6,68,4],[71,10,68,8],[71,11,68,9,"listeners"],[71,20,68,18],[71,23,68,21],[71,24,68,22],[71,25,68,23],[72,6,69,4],[72,10,69,8],[72,11,69,9,"eventNames"],[72,21,69,19],[72,22,69,20,"forEach"],[72,29,69,27],[72,30,69,28,"eventName"],[72,39,69,37],[72,43,69,41],[73,8,70,6],[73,12,70,10],[73,13,70,11,"listeners"],[73,22,70,20],[73,23,70,21,"eventName"],[73,32,70,30],[73,33,70,31],[73,36,70,34,"jsListener"],[73,46,70,44],[73,47,70,45,"eventName"],[73,56,70,54],[73,58,70,56],[73,62,70,60],[73,63,70,61,"worklet"],[73,70,70,68],[73,71,70,69],[74,6,71,4],[74,7,71,5],[74,8,71,6],[75,4,72,2],[76,4,73,2,"updateEventHandler"],[76,22,73,20,"updateEventHandler"],[76,23,73,21,"newWorklet"],[76,33,73,31],[76,35,73,33,"newEvents"],[76,44,73,42],[76,46,73,44],[77,6,74,4],[78,6,75,4],[78,10,75,8],[78,11,75,9,"worklet"],[78,18,75,16],[78,21,75,19,"newWorklet"],[78,31,75,29],[79,6,76,4],[79,10,76,8],[79,11,76,9,"eventNames"],[79,21,76,19],[79,24,76,22,"newEvents"],[79,33,76,31],[80,6,77,4],[80,10,77,8],[80,11,77,9,"setupWebListeners"],[80,28,77,26],[80,29,77,27],[80,30,77,28],[81,4,78,2],[82,4,79,2,"registerForEvents"],[82,21,79,19,"registerForEvents"],[82,22,79,20,"_viewTag"],[82,30,79,28],[82,32,79,30,"_fallbackEventName"],[82,50,79,48],[82,52,79,50],[83,6,80,4],[84,4,80,4],[85,4,82,2,"unregisterFromEvents"],[85,24,82,22,"unregisterFromEvents"],[85,25,82,23,"_viewTag"],[85,33,82,31],[85,35,82,33],[86,6,83,4],[87,4,83,4],[88,2,85,0],[89,2,86,7],[89,8,86,13,"WorkletEventHandler"],[89,27,86,32],[89,30,86,32,"exports"],[89,37,86,32],[89,38,86,32,"WorkletEventHandler"],[89,57,86,32],[89,60,86,35,"SHOULD_BE_USE_WEB"],[89,77,86,52],[89,80,86,55,"WorkletEventHandlerWeb"],[89,102,86,77],[89,105,86,80,"WorkletEventHandlerNative"],[89,130,86,105],[90,0,86,106],[90,3]],"functionMap":{"names":["<global>","jsListener","<anonymous>","WorkletEventHandlerNative","WorkletEventHandlerNative#constructor","WorkletEventHandlerNative#updateEventHandler","forEach$argument_0","registrationIDs.forEach$argument_0","Array.from.forEach$argument_0","eventNames.map$argument_0","WorkletEventHandlerNative#registerForEvents","WorkletEventHandlerNative#unregisterFromEvents","get.forEach$argument_0","WorkletEventHandlerWeb","WorkletEventHandlerWeb#constructor","WorkletEventHandlerWeb#setupWebListeners","eventNames.forEach$argument_0","WorkletEventHandlerWeb#updateEventHandler","WorkletEventHandlerWeb#registerForEvents","WorkletEventHandlerWeb#unregisterFromEvents"],"mappings":"AAA;ACQ;SCC;GDK;CDC;AGC;ECG;GDK;EEC;gCCM;8BCC,gCD;KDE;uCGG;mDCC,+DD;KHE;GFC;EOC;iDDE,mEC;GPM;EQC;8CCE;KDE;GRE;CHC;AaC;ECC;GDK;EEC;4BCE;KDE;GFC;EIC;GJK;EKC;GLE;EMC;GNE;CbC"}},"type":"js/module"}]}