{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"kslwqCIsh6ew+I1KeA1rlVRjsAk=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/asyncToGenerator","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"YisBBiy2Xm9DEVdFebZ2nbgAHBo=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/objectWithoutProperties","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"fnQVLibs90KHiJ7y48fLgPWzDS0=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/slicedToArray","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"5y7e5+zC7teYEEC6niD9f5zII1M=","exportNames":["*"],"imports":1}},{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":52},"end":{"line":5,"column":65,"index":117}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  // Copyright Â© 2024 650 Industries.\n\n  'use client';\n\n  var _interopRequireDefault = require(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\").default;\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.createPermissionHook = createPermissionHook;\n  var _asyncToGenerator2 = _interopRequireDefault(require(_dependencyMap[1], \"@babel/runtime/helpers/asyncToGenerator\"));\n  var _objectWithoutProperties2 = _interopRequireDefault(require(_dependencyMap[2], \"@babel/runtime/helpers/objectWithoutProperties\"));\n  var _slicedToArray2 = _interopRequireDefault(require(_dependencyMap[3], \"@babel/runtime/helpers/slicedToArray\"));\n  var _react = require(_dependencyMap[4], \"react\");\n  var _excluded = [\"get\", \"request\"];\n  // These types are identical, but improves the readability for suggestions in editors\n\n  /**\n   * Get or request permission for protected functionality within the app.\n   * It uses separate permission requesters to interact with a single permission.\n   * By default, the hook will only retrieve the permission status.\n   */\n  function usePermission(methods, options) {\n    var isMounted = (0, _react.useRef)(true);\n    var _useState = (0, _react.useState)(null),\n      _useState2 = (0, _slicedToArray2.default)(_useState, 2),\n      status = _useState2[0],\n      setStatus = _useState2[1];\n    var _ref = options || {},\n      _ref$get = _ref.get,\n      get = _ref$get === void 0 ? true : _ref$get,\n      _ref$request = _ref.request,\n      request = _ref$request === void 0 ? false : _ref$request,\n      permissionOptions = (0, _objectWithoutProperties2.default)(_ref, _excluded);\n    var getPermission = (0, _react.useCallback)(/*#__PURE__*/(0, _asyncToGenerator2.default)(function* () {\n      var response;\n      if (Object.keys(permissionOptions).length > 0) {\n        response = yield methods.getMethod(permissionOptions);\n      } else {\n        response = yield methods.getMethod();\n      }\n      if (isMounted.current) setStatus(response);\n      return response;\n    }), [methods.getMethod]);\n    var requestPermission = (0, _react.useCallback)(/*#__PURE__*/(0, _asyncToGenerator2.default)(function* () {\n      var response;\n      if (Object.keys(permissionOptions).length > 0) {\n        response = yield methods.requestMethod(permissionOptions);\n      } else {\n        response = yield methods.requestMethod();\n      }\n      if (isMounted.current) setStatus(response);\n      return response;\n    }), [methods.requestMethod]);\n    (0, _react.useEffect)(function runMethods() {\n      if (request) requestPermission();\n      if (!request && get) getPermission();\n    }, [get, request, requestPermission, getPermission]);\n\n    // Workaround for unmounting components receiving state updates\n    (0, _react.useEffect)(function didMount() {\n      isMounted.current = true;\n      return () => {\n        isMounted.current = false;\n      };\n    }, []);\n    return [status, requestPermission, getPermission];\n  }\n\n  /**\n   * Create a new permission hook with the permission methods built-in.\n   * This can be used to quickly create specific permission hooks in every module.\n   */\n  function createPermissionHook(methods) {\n    return options => usePermission(methods, options);\n  }\n});","lineCount":77,"map":[[2,2,1,0],[4,2,3,0],[4,14,3,12],[6,2,3,13],[6,6,3,13,"_interopRequireDefault"],[6,28,3,13],[6,31,3,13,"require"],[6,38,3,13],[6,39,3,13,"_dependencyMap"],[6,53,3,13],[6,106,3,13,"default"],[6,113,3,13],[7,2,3,13,"Object"],[7,8,3,13],[7,9,3,13,"defineProperty"],[7,23,3,13],[7,24,3,13,"exports"],[7,31,3,13],[8,4,3,13,"value"],[8,9,3,13],[9,2,3,13],[10,2,3,13,"exports"],[10,9,3,13],[10,10,3,13,"createPermissionHook"],[10,30,3,13],[10,33,3,13,"createPermissionHook"],[10,53,3,13],[11,2,3,13],[11,6,3,13,"_asyncToGenerator2"],[11,24,3,13],[11,27,3,13,"_interopRequireDefault"],[11,49,3,13],[11,50,3,13,"require"],[11,57,3,13],[11,58,3,13,"_dependencyMap"],[11,72,3,13],[12,2,3,13],[12,6,3,13,"_objectWithoutProperties2"],[12,31,3,13],[12,34,3,13,"_interopRequireDefault"],[12,56,3,13],[12,57,3,13,"require"],[12,64,3,13],[12,65,3,13,"_dependencyMap"],[12,79,3,13],[13,2,3,13],[13,6,3,13,"_slicedToArray2"],[13,21,3,13],[13,24,3,13,"_interopRequireDefault"],[13,46,3,13],[13,47,3,13,"require"],[13,54,3,13],[13,55,3,13,"_dependencyMap"],[13,69,3,13],[14,2,5,0],[14,6,5,0,"_react"],[14,12,5,0],[14,15,5,0,"require"],[14,22,5,0],[14,23,5,0,"_dependencyMap"],[14,37,5,0],[15,2,5,65],[15,6,5,65,"_excluded"],[15,15,5,65],[16,2,9,0],[18,2,29,0],[19,0,30,0],[20,0,31,0],[21,0,32,0],[22,0,33,0],[23,2,34,0],[23,11,34,9,"usePermission"],[23,24,34,22,"usePermission"],[23,25,35,2,"methods"],[23,32,35,53],[23,34,36,2,"options"],[23,41,36,42],[23,43,37,93],[24,4,38,2],[24,8,38,8,"isMounted"],[24,17,38,17],[24,20,38,20],[24,24,38,20,"useRef"],[24,37,38,26],[24,39,38,27],[24,43,38,31],[24,44,38,32],[25,4,39,2],[25,8,39,2,"_useState"],[25,17,39,2],[25,20,39,30],[25,24,39,30,"useState"],[25,39,39,38],[25,41,39,58],[25,45,39,62],[25,46,39,63],[26,6,39,63,"_useState2"],[26,16,39,63],[26,23,39,63,"_slicedToArray2"],[26,38,39,63],[26,39,39,63,"default"],[26,46,39,63],[26,48,39,63,"_useState"],[26,57,39,63],[27,6,39,9,"status"],[27,12,39,15],[27,15,39,15,"_useState2"],[27,25,39,15],[28,6,39,17,"setStatus"],[28,15,39,26],[28,18,39,26,"_useState2"],[28,28,39,26],[29,4,40,2],[29,8,40,2,"_ref"],[29,12,40,2],[29,15,40,64,"options"],[29,22,40,71],[29,26,40,75],[29,27,40,76],[29,28,40,77],[30,6,40,77,"_ref$get"],[30,14,40,77],[30,17,40,77,"_ref"],[30,21,40,77],[30,22,40,10,"get"],[30,25,40,13],[31,6,40,10,"get"],[31,9,40,13],[31,12,40,13,"_ref$get"],[31,20,40,13],[31,34,40,16],[31,38,40,20],[31,41,40,20,"_ref$get"],[31,49,40,20],[32,6,40,20,"_ref$request"],[32,18,40,20],[32,21,40,20,"_ref"],[32,25,40,20],[32,26,40,22,"request"],[32,33,40,29],[33,6,40,22,"request"],[33,13,40,29],[33,16,40,29,"_ref$request"],[33,28,40,29],[33,42,40,32],[33,47,40,37],[33,50,40,37,"_ref$request"],[33,62,40,37],[34,6,40,42,"permissionOptions"],[34,23,40,59],[34,30,40,59,"_objectWithoutProperties2"],[34,55,40,59],[34,56,40,59,"default"],[34,63,40,59],[34,65,40,59,"_ref"],[34,69,40,59],[34,71,40,59,"_excluded"],[34,80,40,59],[35,4,42,2],[35,8,42,8,"getPermission"],[35,21,42,21],[35,24,42,24],[35,28,42,24,"useCallback"],[35,46,42,35],[35,65,42,35,"_asyncToGenerator2"],[35,83,42,35],[35,84,42,35,"default"],[35,91,42,35],[35,93,42,36],[35,106,42,48],[36,6,43,4],[36,10,43,8,"response"],[36,18,43,28],[37,6,44,4],[37,10,44,8,"Object"],[37,16,44,14],[37,17,44,15,"keys"],[37,21,44,19],[37,22,44,20,"permissionOptions"],[37,39,44,37],[37,40,44,38],[37,41,44,39,"length"],[37,47,44,45],[37,50,44,48],[37,51,44,49],[37,53,44,51],[38,8,45,6,"response"],[38,16,45,14],[38,25,45,23,"methods"],[38,32,45,30],[38,33,45,31,"getMethod"],[38,42,45,40],[38,43,45,41,"permissionOptions"],[38,60,45,69],[38,61,45,70],[39,6,46,4],[39,7,46,5],[39,13,46,11],[40,8,47,6,"response"],[40,16,47,14],[40,25,47,23,"methods"],[40,32,47,30],[40,33,47,31,"getMethod"],[40,42,47,40],[40,43,47,41],[40,44,47,42],[41,6,48,4],[42,6,49,4],[42,10,49,8,"isMounted"],[42,19,49,17],[42,20,49,18,"current"],[42,27,49,25],[42,29,49,27,"setStatus"],[42,38,49,36],[42,39,49,37,"response"],[42,47,49,45],[42,48,49,46],[43,6,50,4],[43,13,50,11,"response"],[43,21,50,19],[44,4,51,2],[44,5,51,3],[44,8,51,5],[44,9,51,6,"methods"],[44,16,51,13],[44,17,51,14,"getMethod"],[44,26,51,23],[44,27,51,24],[44,28,51,25],[45,4,53,2],[45,8,53,8,"requestPermission"],[45,25,53,25],[45,28,53,28],[45,32,53,28,"useCallback"],[45,50,53,39],[45,69,53,39,"_asyncToGenerator2"],[45,87,53,39],[45,88,53,39,"default"],[45,95,53,39],[45,97,53,40],[45,110,53,52],[46,6,54,4],[46,10,54,8,"response"],[46,18,54,28],[47,6,55,4],[47,10,55,8,"Object"],[47,16,55,14],[47,17,55,15,"keys"],[47,21,55,19],[47,22,55,20,"permissionOptions"],[47,39,55,37],[47,40,55,38],[47,41,55,39,"length"],[47,47,55,45],[47,50,55,48],[47,51,55,49],[47,53,55,51],[48,8,56,6,"response"],[48,16,56,14],[48,25,56,23,"methods"],[48,32,56,30],[48,33,56,31,"requestMethod"],[48,46,56,44],[48,47,56,45,"permissionOptions"],[48,64,56,73],[48,65,56,74],[49,6,57,4],[49,7,57,5],[49,13,57,11],[50,8,58,6,"response"],[50,16,58,14],[50,25,58,23,"methods"],[50,32,58,30],[50,33,58,31,"requestMethod"],[50,46,58,44],[50,47,58,45],[50,48,58,46],[51,6,59,4],[52,6,60,4],[52,10,60,8,"isMounted"],[52,19,60,17],[52,20,60,18,"current"],[52,27,60,25],[52,29,60,27,"setStatus"],[52,38,60,36],[52,39,60,37,"response"],[52,47,60,45],[52,48,60,46],[53,6,61,4],[53,13,61,11,"response"],[53,21,61,19],[54,4,62,2],[54,5,62,3],[54,8,62,5],[54,9,62,6,"methods"],[54,16,62,13],[54,17,62,14,"requestMethod"],[54,30,62,27],[54,31,62,28],[54,32,62,29],[55,4,64,2],[55,8,64,2,"useEffect"],[55,24,64,11],[55,26,65,4],[55,35,65,13,"runMethods"],[55,45,65,23,"runMethods"],[55,46,65,23],[55,48,65,26],[56,6,66,6],[56,10,66,10,"request"],[56,17,66,17],[56,19,66,19,"requestPermission"],[56,36,66,36],[56,37,66,37],[56,38,66,38],[57,6,67,6],[57,10,67,10],[57,11,67,11,"request"],[57,18,67,18],[57,22,67,22,"get"],[57,25,67,25],[57,27,67,27,"getPermission"],[57,40,67,40],[57,41,67,41],[57,42,67,42],[58,4,68,4],[58,5,68,5],[58,7,69,4],[58,8,69,5,"get"],[58,11,69,8],[58,13,69,10,"request"],[58,20,69,17],[58,22,69,19,"requestPermission"],[58,39,69,36],[58,41,69,38,"getPermission"],[58,54,69,51],[58,55,70,2],[58,56,70,3],[60,4,72,2],[61,4,73,2],[61,8,73,2,"useEffect"],[61,24,73,11],[61,26,73,12],[61,35,73,21,"didMount"],[61,43,73,29,"didMount"],[61,44,73,29],[61,46,73,32],[62,6,74,4,"isMounted"],[62,15,74,13],[62,16,74,14,"current"],[62,23,74,21],[62,26,74,24],[62,30,74,28],[63,6,75,4],[63,13,75,11],[63,19,75,17],[64,8,76,6,"isMounted"],[64,17,76,15],[64,18,76,16,"current"],[64,25,76,23],[64,28,76,26],[64,33,76,31],[65,6,77,4],[65,7,77,5],[66,4,78,2],[66,5,78,3],[66,7,78,5],[66,9,78,7],[66,10,78,8],[67,4,80,2],[67,11,80,9],[67,12,80,10,"status"],[67,18,80,16],[67,20,80,18,"requestPermission"],[67,37,80,35],[67,39,80,37,"getPermission"],[67,52,80,50],[67,53,80,51],[68,2,81,0],[70,2,83,0],[71,0,84,0],[72,0,85,0],[73,0,86,0],[74,2,87,7],[74,11,87,16,"createPermissionHook"],[74,31,87,36,"createPermissionHook"],[74,32,88,2,"methods"],[74,39,88,53],[74,41,89,2],[75,4,90,2],[75,11,90,10,"options"],[75,18,90,50],[75,22,91,4,"usePermission"],[75,35,91,17],[75,36,91,39,"methods"],[75,43,91,46],[75,45,91,48,"options"],[75,52,91,55],[75,53,91,56],[76,2,92,0],[77,0,92,1],[77,3]],"functionMap":{"names":["<global>","usePermission","getPermission","requestPermission","runMethods","didMount","<anonymous>","createPermissionHook"],"mappings":"AAA;ACiC;oCCQ;GDS;wCEE;GFS;IGG;KHG;YIK;WCE;KDE;GJC;CDG;OOM;SDG;wDCC;CPC"}},"type":"js/module"}]}