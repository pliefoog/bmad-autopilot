{"dependencies":[{"name":"./gesture","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":15},"end":{"line":3,"column":49,"index":64}},{"start":{"line":3,"column":0,"index":15},"end":{"line":3,"column":49,"index":64}}],"key":"o5NgfUJQHKr9PBMfvlu69EXuwZE=","exportNames":["*"],"imports":2}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.SimultaneousGesture = exports.ExclusiveGesture = exports.ComposedGesture = void 0;\n  function extendRelation(currentRelation, extendWith) {\n    if (currentRelation === undefined) {\n      return [...extendWith];\n    } else {\n      return [...currentRelation, ...extendWith];\n    }\n  }\n  class ComposedGesture extends require(_dependencyMap[0], \"./gesture\").Gesture {\n    gestures = [];\n    simultaneousGestures = [];\n    requireGesturesToFail = [];\n    constructor(...gestures) {\n      super();\n      this.gestures = gestures;\n    }\n    prepareSingleGesture(gesture, simultaneousGestures, requireGesturesToFail) {\n      if (gesture instanceof require(_dependencyMap[0], \"./gesture\").BaseGesture) {\n        const newConfig = {\n          ...gesture.config\n        };\n\n        // No need to extend `blocksHandlers` here, because it's not changed in composition.\n        // The same effect is achieved by reversing the order of 2 gestures in `Exclusive`\n        newConfig.simultaneousWith = extendRelation(newConfig.simultaneousWith, simultaneousGestures);\n        newConfig.requireToFail = extendRelation(newConfig.requireToFail, requireGesturesToFail);\n        gesture.config = newConfig;\n      } else if (gesture instanceof ComposedGesture) {\n        gesture.simultaneousGestures = simultaneousGestures;\n        gesture.requireGesturesToFail = requireGesturesToFail;\n        gesture.prepare();\n      }\n    }\n    prepare() {\n      for (const gesture of this.gestures) {\n        this.prepareSingleGesture(gesture, this.simultaneousGestures, this.requireGesturesToFail);\n      }\n    }\n    initialize() {\n      for (const gesture of this.gestures) {\n        gesture.initialize();\n      }\n    }\n    toGestureArray() {\n      return this.gestures.flatMap(gesture => gesture.toGestureArray());\n    }\n  }\n  exports.ComposedGesture = ComposedGesture;\n  class SimultaneousGesture extends ComposedGesture {\n    prepare() {\n      // This piece of magic works something like this:\n      // for every gesture in the array\n      const simultaneousArrays = this.gestures.map(gesture =>\n      // we take the array it's in\n      this.gestures\n      // and make a copy without it\n      .filter(x => x !== gesture)\n      // then we flatmap the result to get list of raw (not composed) gestures\n      // this way we don't make the gestures simultaneous with themselves, which is\n      // important when the gesture is `ExclusiveGesture` - we don't want to make\n      // exclusive gestures simultaneous\n      .flatMap(x => x.toGestureArray()));\n      for (let i = 0; i < this.gestures.length; i++) {\n        this.prepareSingleGesture(this.gestures[i], simultaneousArrays[i], this.requireGesturesToFail);\n      }\n    }\n  }\n  exports.SimultaneousGesture = SimultaneousGesture;\n  class ExclusiveGesture extends ComposedGesture {\n    prepare() {\n      // Transforms the array of gestures into array of grouped raw (not composed) gestures\n      // i.e. [gesture1, gesture2, ComposedGesture(gesture3, gesture4)] -> [[gesture1], [gesture2], [gesture3, gesture4]]\n      const gestureArrays = this.gestures.map(gesture => gesture.toGestureArray());\n      let requireToFail = [];\n      for (let i = 0; i < this.gestures.length; i++) {\n        this.prepareSingleGesture(this.gestures[i], this.simultaneousGestures, this.requireGesturesToFail.concat(requireToFail));\n\n        // Every group gets to wait for all groups before it\n        requireToFail = requireToFail.concat(gestureArrays[i]);\n      }\n    }\n  }\n  exports.ExclusiveGesture = ExclusiveGesture;\n});","lineCount":90,"map":[[2,2,1,0],[2,14,1,12],[4,2,1,13,"Object"],[4,8,1,13],[4,9,1,13,"defineProperty"],[4,23,1,13],[4,24,1,13,"exports"],[4,31,1,13],[5,4,1,13,"value"],[5,9,1,13],[6,2,1,13],[7,2,1,13,"exports"],[7,9,1,13],[7,10,1,13,"SimultaneousGesture"],[7,29,1,13],[7,32,1,13,"exports"],[7,39,1,13],[7,40,1,13,"ExclusiveGesture"],[7,56,1,13],[7,59,1,13,"exports"],[7,66,1,13],[7,67,1,13,"ComposedGesture"],[7,82,1,13],[8,2,4,0],[8,11,4,9,"extendRelation"],[8,25,4,23,"extendRelation"],[8,26,4,24,"currentRelation"],[8,41,4,39],[8,43,4,41,"extendWith"],[8,53,4,51],[8,55,4,53],[9,4,5,2],[9,8,5,6,"currentRelation"],[9,23,5,21],[9,28,5,26,"undefined"],[9,37,5,35],[9,39,5,37],[10,6,6,4],[10,13,6,11],[10,14,6,12],[10,17,6,15,"extendWith"],[10,27,6,25],[10,28,6,26],[11,4,7,2],[11,5,7,3],[11,11,7,9],[12,6,8,4],[12,13,8,11],[12,14,8,12],[12,17,8,15,"currentRelation"],[12,32,8,30],[12,34,8,32],[12,37,8,35,"extendWith"],[12,47,8,45],[12,48,8,46],[13,4,9,2],[14,2,10,0],[15,2,11,7],[15,8,11,13,"ComposedGesture"],[15,23,11,28],[15,32,11,37,"Gesture"],[15,58,11,37],[15,59,11,37,"Gesture"],[15,79,11,44],[15,80,11,45],[16,4,12,2,"gestures"],[16,12,12,10],[16,15,12,13],[16,17,12,15],[17,4,13,2,"simultaneousGestures"],[17,24,13,22],[17,27,13,25],[17,29,13,27],[18,4,14,2,"requireGesturesToFail"],[18,25,14,23],[18,28,14,26],[18,30,14,28],[19,4,15,2,"constructor"],[19,15,15,13,"constructor"],[19,16,15,14],[19,19,15,17,"gestures"],[19,27,15,25],[19,29,15,27],[20,6,16,4],[20,11,16,9],[20,12,16,10],[20,13,16,11],[21,6,17,4],[21,10,17,8],[21,11,17,9,"gestures"],[21,19,17,17],[21,22,17,20,"gestures"],[21,30,17,28],[22,4,18,2],[23,4,19,2,"prepareSingleGesture"],[23,24,19,22,"prepareSingleGesture"],[23,25,19,23,"gesture"],[23,32,19,30],[23,34,19,32,"simultaneousGestures"],[23,54,19,52],[23,56,19,54,"requireGesturesToFail"],[23,77,19,75],[23,79,19,77],[24,6,20,4],[24,10,20,8,"gesture"],[24,17,20,15],[24,29,20,27,"BaseGesture"],[24,55,20,27],[24,56,20,27,"BaseGesture"],[24,80,20,38],[24,82,20,40],[25,8,21,6],[25,14,21,12,"newConfig"],[25,23,21,21],[25,26,21,24],[26,10,22,8],[26,13,22,11,"gesture"],[26,20,22,18],[26,21,22,19,"config"],[27,8,23,6],[27,9,23,7],[29,8,25,6],[30,8,26,6],[31,8,27,6,"newConfig"],[31,17,27,15],[31,18,27,16,"simultaneousWith"],[31,34,27,32],[31,37,27,35,"extendRelation"],[31,51,27,49],[31,52,27,50,"newConfig"],[31,61,27,59],[31,62,27,60,"simultaneousWith"],[31,78,27,76],[31,80,27,78,"simultaneousGestures"],[31,100,27,98],[31,101,27,99],[32,8,28,6,"newConfig"],[32,17,28,15],[32,18,28,16,"requireToFail"],[32,31,28,29],[32,34,28,32,"extendRelation"],[32,48,28,46],[32,49,28,47,"newConfig"],[32,58,28,56],[32,59,28,57,"requireToFail"],[32,72,28,70],[32,74,28,72,"requireGesturesToFail"],[32,95,28,93],[32,96,28,94],[33,8,29,6,"gesture"],[33,15,29,13],[33,16,29,14,"config"],[33,22,29,20],[33,25,29,23,"newConfig"],[33,34,29,32],[34,6,30,4],[34,7,30,5],[34,13,30,11],[34,17,30,15,"gesture"],[34,24,30,22],[34,36,30,34,"ComposedGesture"],[34,51,30,49],[34,53,30,51],[35,8,31,6,"gesture"],[35,15,31,13],[35,16,31,14,"simultaneousGestures"],[35,36,31,34],[35,39,31,37,"simultaneousGestures"],[35,59,31,57],[36,8,32,6,"gesture"],[36,15,32,13],[36,16,32,14,"requireGesturesToFail"],[36,37,32,35],[36,40,32,38,"requireGesturesToFail"],[36,61,32,59],[37,8,33,6,"gesture"],[37,15,33,13],[37,16,33,14,"prepare"],[37,23,33,21],[37,24,33,22],[37,25,33,23],[38,6,34,4],[39,4,35,2],[40,4,36,2,"prepare"],[40,11,36,9,"prepare"],[40,12,36,9],[40,14,36,12],[41,6,37,4],[41,11,37,9],[41,17,37,15,"gesture"],[41,24,37,22],[41,28,37,26],[41,32,37,30],[41,33,37,31,"gestures"],[41,41,37,39],[41,43,37,41],[42,8,38,6],[42,12,38,10],[42,13,38,11,"prepareSingleGesture"],[42,33,38,31],[42,34,38,32,"gesture"],[42,41,38,39],[42,43,38,41],[42,47,38,45],[42,48,38,46,"simultaneousGestures"],[42,68,38,66],[42,70,38,68],[42,74,38,72],[42,75,38,73,"requireGesturesToFail"],[42,96,38,94],[42,97,38,95],[43,6,39,4],[44,4,40,2],[45,4,41,2,"initialize"],[45,14,41,12,"initialize"],[45,15,41,12],[45,17,41,15],[46,6,42,4],[46,11,42,9],[46,17,42,15,"gesture"],[46,24,42,22],[46,28,42,26],[46,32,42,30],[46,33,42,31,"gestures"],[46,41,42,39],[46,43,42,41],[47,8,43,6,"gesture"],[47,15,43,13],[47,16,43,14,"initialize"],[47,26,43,24],[47,27,43,25],[47,28,43,26],[48,6,44,4],[49,4,45,2],[50,4,46,2,"toGestureArray"],[50,18,46,16,"toGestureArray"],[50,19,46,16],[50,21,46,19],[51,6,47,4],[51,13,47,11],[51,17,47,15],[51,18,47,16,"gestures"],[51,26,47,24],[51,27,47,25,"flatMap"],[51,34,47,32],[51,35,47,33,"gesture"],[51,42,47,40],[51,46,47,44,"gesture"],[51,53,47,51],[51,54,47,52,"toGestureArray"],[51,68,47,66],[51,69,47,67],[51,70,47,68],[51,71,47,69],[52,4,48,2],[53,2,49,0],[54,2,49,1,"exports"],[54,9,49,1],[54,10,49,1,"ComposedGesture"],[54,25,49,1],[54,28,49,1,"ComposedGesture"],[54,43,49,1],[55,2,50,7],[55,8,50,13,"SimultaneousGesture"],[55,27,50,32],[55,36,50,41,"ComposedGesture"],[55,51,50,56],[55,52,50,57],[56,4,51,2,"prepare"],[56,11,51,9,"prepare"],[56,12,51,9],[56,14,51,12],[57,6,52,4],[58,6,53,4],[59,6,54,4],[59,12,54,10,"simultaneousArrays"],[59,30,54,28],[59,33,54,31],[59,37,54,35],[59,38,54,36,"gestures"],[59,46,54,44],[59,47,54,45,"map"],[59,50,54,48],[59,51,54,49,"gesture"],[59,58,54,56],[60,6,55,4],[61,6,56,4],[61,10,56,8],[61,11,56,9,"gestures"],[62,6,57,4],[63,6,57,4],[63,7,58,5,"filter"],[63,13,58,11],[63,14,58,12,"x"],[63,15,58,13],[63,19,58,17,"x"],[63,20,58,18],[63,25,58,23,"gesture"],[63,32,58,30],[64,6,59,4],[65,6,60,4],[66,6,61,4],[67,6,62,4],[68,6,62,4],[68,7,63,5,"flatMap"],[68,14,63,12],[68,15,63,13,"x"],[68,16,63,14],[68,20,63,18,"x"],[68,21,63,19],[68,22,63,20,"toGestureArray"],[68,36,63,34],[68,37,63,35],[68,38,63,36],[68,39,63,37],[68,40,63,38],[69,6,64,4],[69,11,64,9],[69,15,64,13,"i"],[69,16,64,14],[69,19,64,17],[69,20,64,18],[69,22,64,20,"i"],[69,23,64,21],[69,26,64,24],[69,30,64,28],[69,31,64,29,"gestures"],[69,39,64,37],[69,40,64,38,"length"],[69,46,64,44],[69,48,64,46,"i"],[69,49,64,47],[69,51,64,49],[69,53,64,51],[70,8,65,6],[70,12,65,10],[70,13,65,11,"prepareSingleGesture"],[70,33,65,31],[70,34,65,32],[70,38,65,36],[70,39,65,37,"gestures"],[70,47,65,45],[70,48,65,46,"i"],[70,49,65,47],[70,50,65,48],[70,52,65,50,"simultaneousArrays"],[70,70,65,68],[70,71,65,69,"i"],[70,72,65,70],[70,73,65,71],[70,75,65,73],[70,79,65,77],[70,80,65,78,"requireGesturesToFail"],[70,101,65,99],[70,102,65,100],[71,6,66,4],[72,4,67,2],[73,2,68,0],[74,2,68,1,"exports"],[74,9,68,1],[74,10,68,1,"SimultaneousGesture"],[74,29,68,1],[74,32,68,1,"SimultaneousGesture"],[74,51,68,1],[75,2,69,7],[75,8,69,13,"ExclusiveGesture"],[75,24,69,29],[75,33,69,38,"ComposedGesture"],[75,48,69,53],[75,49,69,54],[76,4,70,2,"prepare"],[76,11,70,9,"prepare"],[76,12,70,9],[76,14,70,12],[77,6,71,4],[78,6,72,4],[79,6,73,4],[79,12,73,10,"gestureArrays"],[79,25,73,23],[79,28,73,26],[79,32,73,30],[79,33,73,31,"gestures"],[79,41,73,39],[79,42,73,40,"map"],[79,45,73,43],[79,46,73,44,"gesture"],[79,53,73,51],[79,57,73,55,"gesture"],[79,64,73,62],[79,65,73,63,"toGestureArray"],[79,79,73,77],[79,80,73,78],[79,81,73,79],[79,82,73,80],[80,6,74,4],[80,10,74,8,"requireToFail"],[80,23,74,21],[80,26,74,24],[80,28,74,26],[81,6,75,4],[81,11,75,9],[81,15,75,13,"i"],[81,16,75,14],[81,19,75,17],[81,20,75,18],[81,22,75,20,"i"],[81,23,75,21],[81,26,75,24],[81,30,75,28],[81,31,75,29,"gestures"],[81,39,75,37],[81,40,75,38,"length"],[81,46,75,44],[81,48,75,46,"i"],[81,49,75,47],[81,51,75,49],[81,53,75,51],[82,8,76,6],[82,12,76,10],[82,13,76,11,"prepareSingleGesture"],[82,33,76,31],[82,34,76,32],[82,38,76,36],[82,39,76,37,"gestures"],[82,47,76,45],[82,48,76,46,"i"],[82,49,76,47],[82,50,76,48],[82,52,76,50],[82,56,76,54],[82,57,76,55,"simultaneousGestures"],[82,77,76,75],[82,79,76,77],[82,83,76,81],[82,84,76,82,"requireGesturesToFail"],[82,105,76,103],[82,106,76,104,"concat"],[82,112,76,110],[82,113,76,111,"requireToFail"],[82,126,76,124],[82,127,76,125],[82,128,76,126],[84,8,78,6],[85,8,79,6,"requireToFail"],[85,21,79,19],[85,24,79,22,"requireToFail"],[85,37,79,35],[85,38,79,36,"concat"],[85,44,79,42],[85,45,79,43,"gestureArrays"],[85,58,79,56],[85,59,79,57,"i"],[85,60,79,58],[85,61,79,59],[85,62,79,60],[86,6,80,4],[87,4,81,2],[88,2,82,0],[89,2,82,1,"exports"],[89,9,82,1],[89,10,82,1,"ExclusiveGesture"],[89,26,82,1],[89,29,82,1,"ExclusiveGesture"],[89,45,82,1],[90,0,82,1],[90,3]],"functionMap":{"names":["<global>","extendRelation","ComposedGesture","ComposedGesture#constructor","ComposedGesture#prepareSingleGesture","ComposedGesture#prepare","ComposedGesture#initialize","ComposedGesture#toGestureArray","gestures.flatMap$argument_0","SimultaneousGesture","SimultaneousGesture#prepare","gestures.map$argument_0","gestures.filter$argument_0","gestures.filter.flatMap$argument_0","ExclusiveGesture","ExclusiveGesture#prepare"],"mappings":"AAA;ACG;CDM;OEC;ECI;GDG;EEC;GFgB;EGC;GHI;EIC;GJI;EKC;iCCC,mCD;GLC;CFC;OSC;ECC;iDCG;YCI,kBD;aEK,uBF,CD;GDI;CTC;OcC;ECC;4CJG,mCI;GDQ;CdC"}},"type":"js/module"}]}