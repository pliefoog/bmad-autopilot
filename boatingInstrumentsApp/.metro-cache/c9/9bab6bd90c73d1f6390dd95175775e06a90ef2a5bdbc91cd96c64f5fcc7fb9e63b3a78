{"dependencies":[{"name":"../config/dragConfig","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":9,"column":0,"index":238},"end":{"line":9,"column":51,"index":289}},{"start":{"line":9,"column":0,"index":238},"end":{"line":9,"column":51,"index":289}}],"key":"P53iWuZVqIvCVou4YdlcCf8uUgE=","exportNames":["*"],"imports":2}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.calculateHoverIndex = calculateHoverIndex;\n  exports.calculateTargetPage = calculateTargetPage;\n  exports.calculateWidgetPosition = calculateWidgetPosition;\n  exports.isDragSignificant = isDragSignificant;\n  /**\n   * Drag-and-Drop Helper Functions\n   *\n   * Utility functions for calculating drag positions, hover indices,\n   * and managing drag state during widget reordering.\n   */\n\n  /**\n   * Calculate which grid cell is being hovered over during drag\n   *\n   * @param absoluteX - Absolute X coordinate on screen\n   * @param absoluteY - Absolute Y coordinate on screen\n   * @param gridState - Current responsive grid configuration\n   * @param pageIndex - Current page index\n   * @returns Grid index (0-based) or -1 if outside grid\n   */\n  function calculateHoverIndex(absoluteX, absoluteY, gridState, pageIndex) {\n    const {\n      layout\n    } = gridState;\n    const {\n      cellWidth,\n      cellHeight,\n      containerWidth,\n      containerHeight,\n      cols,\n      rows\n    } = layout;\n\n    // absoluteX and absoluteY are screen coordinates (not scroll-adjusted)\n    // They're always relative to the visible viewport, regardless of which page is showing\n    const relativeX = absoluteX;\n    const relativeY = absoluteY;\n\n    // Check if outside grid bounds\n    if (relativeX < 0 || relativeX > containerWidth || relativeY < 0 || relativeY > containerHeight) {\n      return -1;\n    }\n\n    // Calculate grid cell\n    const col = Math.floor(relativeX / cellWidth);\n    const row = Math.floor(relativeY / cellHeight);\n\n    // Validate column/row bounds\n    if (col < 0 || col >= cols || row < 0 || row >= rows) {\n      return -1;\n    }\n\n    // Convert to linear index within this page\n    const indexInPage = row * cols + col;\n\n    // Calculate widgets per page\n    const widgetsPerPage = cols * rows;\n\n    // Convert to global widget array index by adding page offset\n    return pageIndex * widgetsPerPage + indexInPage;\n  }\n\n  /**\n   * Calculate which page is being hovered based on edge zones\n   *\n   * @param absoluteX - Absolute X coordinate on screen\n   * @param currentPage - Current page index\n   * @param totalPages - Total number of pages\n   * @param scrollViewWidth - Width of scroll view\n   * @returns Target page index or current page if not in edge zone\n   */\n  function calculateTargetPage(absoluteX, currentPage, totalPages, scrollViewWidth) {\n    const edgeZoneWidth = scrollViewWidth * (require(_dependencyMap[0], \"../config/dragConfig\").DRAG_CONFIG.EDGE_ZONE_WIDTH_PERCENT / 100);\n\n    // Check left edge (previous page)\n    if (absoluteX < edgeZoneWidth && currentPage > 0) {\n      return currentPage - 1;\n    }\n\n    // Check right edge (next page)\n    if (absoluteX > scrollViewWidth - edgeZoneWidth && currentPage < totalPages - 1) {\n      return currentPage + 1;\n    }\n    return currentPage;\n  }\n\n  /**\n   * Check if drag movement exceeds minimum threshold\n   * Prevents accidental reordering from tiny movements\n   *\n   * @param translationX - Horizontal translation\n   * @param translationY - Vertical translation\n   * @returns true if movement exceeds threshold\n   */\n  function isDragSignificant(translationX, translationY) {\n    const distance = Math.sqrt(translationX ** 2 + translationY ** 2);\n    return distance >= require(_dependencyMap[0], \"../config/dragConfig\").DRAG_CONFIG.MIN_DRAG_DISTANCE;\n  }\n\n  /**\n   * Calculate absolute widget position from page layout\n   *\n   * @param widgetIndex - Widget index within page\n   * @param gridState - Current responsive grid configuration\n   * @param pageIndex - Page index\n   * @returns Absolute x, y coordinates\n   */\n  function calculateWidgetPosition(widgetIndex, gridState, pageIndex) {\n    const {\n      layout,\n      cols\n    } = gridState;\n    const {\n      cellWidth,\n      cellHeight,\n      containerWidth\n    } = layout;\n    const row = Math.floor(widgetIndex / cols);\n    const col = widgetIndex % cols;\n    return {\n      x: pageIndex * containerWidth + col * cellWidth,\n      y: row * cellHeight\n    };\n  }\n});","lineCount":129,"map":[[9,2,1,0],[10,0,2,0],[11,0,3,0],[12,0,4,0],[13,0,5,0],[14,0,6,0],[16,2,11,0],[17,0,12,0],[18,0,13,0],[19,0,14,0],[20,0,15,0],[21,0,16,0],[22,0,17,0],[23,0,18,0],[24,0,19,0],[25,2,20,7],[25,11,20,16,"calculateHoverIndex"],[25,30,20,35,"calculateHoverIndex"],[25,31,21,2,"absoluteX"],[25,40,21,19],[25,42,22,2,"absoluteY"],[25,51,22,19],[25,53,23,2,"gridState"],[25,62,23,32],[25,64,24,2,"pageIndex"],[25,73,24,19],[25,75,25,10],[26,4,26,2],[26,10,26,8],[27,6,26,10,"layout"],[28,4,26,17],[28,5,26,18],[28,8,26,21,"gridState"],[28,17,26,30],[29,4,27,2],[29,10,27,8],[30,6,27,10,"cellWidth"],[30,15,27,19],[31,6,27,21,"cellHeight"],[31,16,27,31],[32,6,27,33,"containerWidth"],[32,20,27,47],[33,6,27,49,"containerHeight"],[33,21,27,64],[34,6,27,66,"cols"],[34,10,27,70],[35,6,27,72,"rows"],[36,4,27,77],[36,5,27,78],[36,8,27,81,"layout"],[36,14,27,87],[38,4,29,2],[39,4,30,2],[40,4,31,2],[40,10,31,8,"relativeX"],[40,19,31,17],[40,22,31,20,"absoluteX"],[40,31,31,29],[41,4,32,2],[41,10,32,8,"relativeY"],[41,19,32,17],[41,22,32,20,"absoluteY"],[41,31,32,29],[43,4,34,2],[44,4,35,2],[44,8,35,6,"relativeX"],[44,17,35,15],[44,20,35,18],[44,21,35,19],[44,25,35,23,"relativeX"],[44,34,35,32],[44,37,35,35,"containerWidth"],[44,51,35,49],[44,55,35,53,"relativeY"],[44,64,35,62],[44,67,35,65],[44,68,35,66],[44,72,35,70,"relativeY"],[44,81,35,79],[44,84,35,82,"containerHeight"],[44,99,35,97],[44,101,35,99],[45,6,36,4],[45,13,36,11],[45,14,36,12],[45,15,36,13],[46,4,37,2],[48,4,39,2],[49,4,40,2],[49,10,40,8,"col"],[49,13,40,11],[49,16,40,14,"Math"],[49,20,40,18],[49,21,40,19,"floor"],[49,26,40,24],[49,27,40,25,"relativeX"],[49,36,40,34],[49,39,40,37,"cellWidth"],[49,48,40,46],[49,49,40,47],[50,4,41,2],[50,10,41,8,"row"],[50,13,41,11],[50,16,41,14,"Math"],[50,20,41,18],[50,21,41,19,"floor"],[50,26,41,24],[50,27,41,25,"relativeY"],[50,36,41,34],[50,39,41,37,"cellHeight"],[50,49,41,47],[50,50,41,48],[52,4,43,2],[53,4,44,2],[53,8,44,6,"col"],[53,11,44,9],[53,14,44,12],[53,15,44,13],[53,19,44,17,"col"],[53,22,44,20],[53,26,44,24,"cols"],[53,30,44,28],[53,34,44,32,"row"],[53,37,44,35],[53,40,44,38],[53,41,44,39],[53,45,44,43,"row"],[53,48,44,46],[53,52,44,50,"rows"],[53,56,44,54],[53,58,44,56],[54,6,45,4],[54,13,45,11],[54,14,45,12],[54,15,45,13],[55,4,46,2],[57,4,48,2],[58,4,49,2],[58,10,49,8,"indexInPage"],[58,21,49,19],[58,24,49,22,"row"],[58,27,49,25],[58,30,49,28,"cols"],[58,34,49,32],[58,37,49,35,"col"],[58,40,49,38],[60,4,51,2],[61,4,52,2],[61,10,52,8,"widgetsPerPage"],[61,24,52,22],[61,27,52,25,"cols"],[61,31,52,29],[61,34,52,32,"rows"],[61,38,52,36],[63,4,54,2],[64,4,55,2],[64,11,55,9,"pageIndex"],[64,20,55,18],[64,23,55,21,"widgetsPerPage"],[64,37,55,35],[64,40,55,38,"indexInPage"],[64,51,55,49],[65,2,56,0],[67,2,58,0],[68,0,59,0],[69,0,60,0],[70,0,61,0],[71,0,62,0],[72,0,63,0],[73,0,64,0],[74,0,65,0],[75,0,66,0],[76,2,67,7],[76,11,67,16,"calculateTargetPage"],[76,30,67,35,"calculateTargetPage"],[76,31,68,2,"absoluteX"],[76,40,68,19],[76,42,69,2,"currentPage"],[76,53,69,21],[76,55,70,2,"totalPages"],[76,65,70,20],[76,67,71,2,"scrollViewWidth"],[76,82,71,25],[76,84,72,10],[77,4,73,2],[77,10,73,8,"edgeZoneWidth"],[77,23,73,21],[77,26,73,24,"scrollViewWidth"],[77,41,73,39],[77,45,73,43,"DRAG_CONFIG"],[77,71,73,43],[77,72,73,43,"DRAG_CONFIG"],[77,107,73,54],[77,108,73,55,"EDGE_ZONE_WIDTH_PERCENT"],[77,131,73,78],[77,134,73,81],[77,137,73,84],[77,138,73,85],[79,4,75,2],[80,4,76,2],[80,8,76,6,"absoluteX"],[80,17,76,15],[80,20,76,18,"edgeZoneWidth"],[80,33,76,31],[80,37,76,35,"currentPage"],[80,48,76,46],[80,51,76,49],[80,52,76,50],[80,54,76,52],[81,6,77,4],[81,13,77,11,"currentPage"],[81,24,77,22],[81,27,77,25],[81,28,77,26],[82,4,78,2],[84,4,80,2],[85,4,81,2],[85,8,81,6,"absoluteX"],[85,17,81,15],[85,20,81,18,"scrollViewWidth"],[85,35,81,33],[85,38,81,36,"edgeZoneWidth"],[85,51,81,49],[85,55,81,53,"currentPage"],[85,66,81,64],[85,69,81,67,"totalPages"],[85,79,81,77],[85,82,81,80],[85,83,81,81],[85,85,81,83],[86,6,82,4],[86,13,82,11,"currentPage"],[86,24,82,22],[86,27,82,25],[86,28,82,26],[87,4,83,2],[88,4,85,2],[88,11,85,9,"currentPage"],[88,22,85,20],[89,2,86,0],[91,2,88,0],[92,0,89,0],[93,0,90,0],[94,0,91,0],[95,0,92,0],[96,0,93,0],[97,0,94,0],[98,0,95,0],[99,2,96,7],[99,11,96,16,"isDragSignificant"],[99,28,96,33,"isDragSignificant"],[99,29,96,34,"translationX"],[99,41,96,54],[99,43,96,56,"translationY"],[99,55,96,76],[99,57,96,87],[100,4,97,2],[100,10,97,8,"distance"],[100,18,97,16],[100,21,97,19,"Math"],[100,25,97,23],[100,26,97,24,"sqrt"],[100,30,97,28],[100,31,97,29,"translationX"],[100,43,97,41],[100,47,97,45],[100,48,97,46],[100,51,97,49,"translationY"],[100,63,97,61],[100,67,97,65],[100,68,97,66],[100,69,97,67],[101,4,98,2],[101,11,98,9,"distance"],[101,19,98,17],[101,23,98,21,"DRAG_CONFIG"],[101,49,98,21],[101,50,98,21,"DRAG_CONFIG"],[101,85,98,32],[101,86,98,33,"MIN_DRAG_DISTANCE"],[101,103,98,50],[102,2,99,0],[104,2,101,0],[105,0,102,0],[106,0,103,0],[107,0,104,0],[108,0,105,0],[109,0,106,0],[110,0,107,0],[111,0,108,0],[112,2,109,7],[112,11,109,16,"calculateWidgetPosition"],[112,34,109,39,"calculateWidgetPosition"],[112,35,110,2,"widgetIndex"],[112,46,110,21],[112,48,111,2,"gridState"],[112,57,111,32],[112,59,112,2,"pageIndex"],[112,68,112,19],[112,70,113,28],[113,4,114,2],[113,10,114,8],[114,6,114,10,"layout"],[114,12,114,16],[115,6,114,18,"cols"],[116,4,114,23],[116,5,114,24],[116,8,114,27,"gridState"],[116,17,114,36],[117,4,115,2],[117,10,115,8],[118,6,115,10,"cellWidth"],[118,15,115,19],[119,6,115,21,"cellHeight"],[119,16,115,31],[120,6,115,33,"containerWidth"],[121,4,115,48],[121,5,115,49],[121,8,115,52,"layout"],[121,14,115,58],[122,4,117,2],[122,10,117,8,"row"],[122,13,117,11],[122,16,117,14,"Math"],[122,20,117,18],[122,21,117,19,"floor"],[122,26,117,24],[122,27,117,25,"widgetIndex"],[122,38,117,36],[122,41,117,39,"cols"],[122,45,117,43],[122,46,117,44],[123,4,118,2],[123,10,118,8,"col"],[123,13,118,11],[123,16,118,14,"widgetIndex"],[123,27,118,25],[123,30,118,28,"cols"],[123,34,118,32],[124,4,120,2],[124,11,120,9],[125,6,121,4,"x"],[125,7,121,5],[125,9,121,7,"pageIndex"],[125,18,121,16],[125,21,121,19,"containerWidth"],[125,35,121,33],[125,38,121,36,"col"],[125,41,121,39],[125,44,121,42,"cellWidth"],[125,53,121,51],[126,6,122,4,"y"],[126,7,122,5],[126,9,122,7,"row"],[126,12,122,10],[126,15,122,13,"cellHeight"],[127,4,123,2],[127,5,123,3],[128,2,124,0],[129,0,124,1],[129,3]],"functionMap":{"names":["<global>","calculateHoverIndex","calculateTargetPage","isDragSignificant","calculateWidgetPosition"],"mappings":"AAA;OCmB;CDoC;OEW;CFmB;OGU;CHG;OIU;CJe"}},"type":"js/module"}]}