{"dependencies":[{"name":"expo-asset","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":35,"index":35}},{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":35,"index":35}},{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":35,"index":35}},{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":35,"index":35}},{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":35,"index":35}},{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":35,"index":35}},{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":35,"index":35}},{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":35,"index":35}},{"start":{"line":1,"column":0,"index":0},"end":{"line":1,"column":35,"index":35}}],"key":"ZXJFWHziJpBZf3W7vl00wXf6fd8=","exportNames":["*"],"imports":9}},{"name":"expo-modules-core","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":2,"column":0,"index":36},"end":{"line":2,"column":45,"index":81}}],"key":"fU8WLIPqoAGygnPbZ/QJiQQfXEY=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.resolveSource = resolveSource;\n  exports.resolveSourceWithDownload = resolveSourceWithDownload;\n  function getAssetFromSource(source) {\n    if (!source) {\n      return null;\n    }\n    if (source instanceof require(_dependencyMap[0], \"expo-asset\").Asset) {\n      return source;\n    }\n    if (typeof source === 'number') {\n      return require(_dependencyMap[0], \"expo-asset\").Asset.fromModule(source);\n    }\n    if (typeof source === 'object') {\n      if ('assetId' in source && typeof source.assetId === 'number') {\n        return require(_dependencyMap[0], \"expo-asset\").Asset.fromModule(source.assetId);\n      }\n      if ('uri' in source && typeof source.uri === 'string') {\n        return require(_dependencyMap[0], \"expo-asset\").Asset.fromURI(source.uri);\n      }\n    }\n    if (typeof source === 'string') {\n      return require(_dependencyMap[0], \"expo-asset\").Asset.fromURI(source);\n    }\n    return null;\n  }\n  function createSourceFromAsset(asset, extras = {}) {\n    const uri = asset.localUri ?? asset.uri;\n    const result = {\n      uri\n    };\n    if (extras.assetId != null) {\n      result.assetId = extras.assetId;\n    }\n    if (extras.headers) {\n      result.headers = extras.headers;\n    }\n    return result;\n  }\n  function resolveSource(source) {\n    if (source == null) {\n      return null;\n    }\n    if (source instanceof require(_dependencyMap[0], \"expo-asset\").Asset) {\n      return createSourceFromAsset(source);\n    }\n    if (typeof source === 'string') {\n      return {\n        uri: source\n      };\n    }\n    if (typeof source === 'number') {\n      const asset = require(_dependencyMap[0], \"expo-asset\").Asset.fromModule(source);\n      return createSourceFromAsset(asset, {\n        assetId: source\n      });\n    }\n    if (typeof source === 'object') {\n      if ('assetId' in source && typeof source.assetId === 'number') {\n        const asset = require(_dependencyMap[0], \"expo-asset\").Asset.fromModule(source.assetId);\n        return {\n          ...source,\n          uri: asset.localUri ?? asset.uri\n        };\n      }\n      if ('uri' in source && typeof source.uri === 'string') {\n        return source;\n      }\n    }\n    return source ?? null;\n  }\n  /**\n   * Resolves and optionally downloads an audio source before loading.\n   * Similar to expo-av's getNativeSourceAndFullInitialStatusForLoadAsync but simplified for expo-audio.\n   */\n  async function resolveSourceWithDownload(source) {\n    const asset = getAssetFromSource(source);\n    const fallbackSource = resolveSource(source);\n    if (asset) {\n      let assetToDownload = asset;\n      try {\n        // iOS AVPlayer fails to load the asset if the type is not set or can't be inferred\n        // since this is an audio asset, we can safely set the type to mp3 or any other audio type\n        // and iOS will be able to download and play the asset\n        // Since expo-asset caches, this will only run once per asset, as long as the asset is not deleted from the cache\n        if (!assetToDownload.type) {\n          assetToDownload = new (require(_dependencyMap[0], \"expo-asset\").Asset)({\n            name: asset.name,\n            type: 'mp3',\n            uri: asset.uri\n          });\n        }\n        // FYI: downloadAsync is a no-op on web and immediately returns a promise that resolves to the original url\n        // TODO(@hirbod): evaluate if we should implement downloadAsync for web instead\n        await assetToDownload.downloadAsync();\n        // Use the local URI if available after download\n        if (assetToDownload.localUri) {\n          let finalUri = assetToDownload.localUri;\n          // On web, we need to fetch the audio file and create a blob URL\n          // this fully downloads the file to the user's device memory and makes it available for the user to play\n          // fetch() is subject to CORS restrictions, so we need to document this for the users on web\n          // TODO(@hirbod): evaluate if we should implement a downloadAsync for web instead of using fetch here\n          if (require(_dependencyMap[1], \"expo-modules-core\").Platform.OS === 'web') {\n            const response = await fetch(assetToDownload.localUri);\n            const blob = await response.blob();\n            finalUri = URL.createObjectURL(blob);\n          }\n          if (fallbackSource && typeof fallbackSource === 'object') {\n            return {\n              ...fallbackSource,\n              uri: finalUri\n            };\n          }\n          return {\n            uri: finalUri\n          };\n        } else {\n          console.warn('No localUri found, asset may not have downloaded properly, returning the original source');\n        }\n      } catch (error) {\n        // If download fails, fall back to original source\n        console.warn('expo-audio: Failed to download asset, falling back to original source:', error);\n      }\n    }\n    // Fallback to normal resolution\n    return fallbackSource;\n  }\n});","lineCount":131,"map":[[7,2,3,0],[7,11,3,9,"getAssetFromSource"],[7,29,3,27,"getAssetFromSource"],[7,30,3,28,"source"],[7,36,3,34],[7,38,3,36],[8,4,4,4],[8,8,4,8],[8,9,4,9,"source"],[8,15,4,15],[8,17,4,17],[9,6,5,8],[9,13,5,15],[9,17,5,19],[10,4,6,4],[11,4,7,4],[11,8,7,8,"source"],[11,14,7,14],[11,26,7,26,"Asset"],[11,52,7,26],[11,53,7,26,"Asset"],[11,72,7,31],[11,74,7,33],[12,6,8,8],[12,13,8,15,"source"],[12,19,8,21],[13,4,9,4],[14,4,10,4],[14,8,10,8],[14,15,10,15,"source"],[14,21,10,21],[14,26,10,26],[14,34,10,34],[14,36,10,36],[15,6,11,8],[15,13,11,15,"Asset"],[15,39,11,15],[15,40,11,15,"Asset"],[15,59,11,20],[15,60,11,21,"fromModule"],[15,70,11,31],[15,71,11,32,"source"],[15,77,11,38],[15,78,11,39],[16,4,12,4],[17,4,13,4],[17,8,13,8],[17,15,13,15,"source"],[17,21,13,21],[17,26,13,26],[17,34,13,34],[17,36,13,36],[18,6,14,8],[18,10,14,12],[18,19,14,21],[18,23,14,25,"source"],[18,29,14,31],[18,33,14,35],[18,40,14,42,"source"],[18,46,14,48],[18,47,14,49,"assetId"],[18,54,14,56],[18,59,14,61],[18,67,14,69],[18,69,14,71],[19,8,15,12],[19,15,15,19,"Asset"],[19,41,15,19],[19,42,15,19,"Asset"],[19,61,15,24],[19,62,15,25,"fromModule"],[19,72,15,35],[19,73,15,36,"source"],[19,79,15,42],[19,80,15,43,"assetId"],[19,87,15,50],[19,88,15,51],[20,6,16,8],[21,6,17,8],[21,10,17,12],[21,15,17,17],[21,19,17,21,"source"],[21,25,17,27],[21,29,17,31],[21,36,17,38,"source"],[21,42,17,44],[21,43,17,45,"uri"],[21,46,17,48],[21,51,17,53],[21,59,17,61],[21,61,17,63],[22,8,18,12],[22,15,18,19,"Asset"],[22,41,18,19],[22,42,18,19,"Asset"],[22,61,18,24],[22,62,18,25,"fromURI"],[22,69,18,32],[22,70,18,33,"source"],[22,76,18,39],[22,77,18,40,"uri"],[22,80,18,43],[22,81,18,44],[23,6,19,8],[24,4,20,4],[25,4,21,4],[25,8,21,8],[25,15,21,15,"source"],[25,21,21,21],[25,26,21,26],[25,34,21,34],[25,36,21,36],[26,6,22,8],[26,13,22,15,"Asset"],[26,39,22,15],[26,40,22,15,"Asset"],[26,59,22,20],[26,60,22,21,"fromURI"],[26,67,22,28],[26,68,22,29,"source"],[26,74,22,35],[26,75,22,36],[27,4,23,4],[28,4,24,4],[28,11,24,11],[28,15,24,15],[29,2,25,0],[30,2,26,0],[30,11,26,9,"createSourceFromAsset"],[30,32,26,30,"createSourceFromAsset"],[30,33,26,31,"asset"],[30,38,26,36],[30,40,26,38,"extras"],[30,46,26,44],[30,49,26,47],[30,50,26,48],[30,51,26,49],[30,53,26,51],[31,4,27,4],[31,10,27,10,"uri"],[31,13,27,13],[31,16,27,16,"asset"],[31,21,27,21],[31,22,27,22,"localUri"],[31,30,27,30],[31,34,27,34,"asset"],[31,39,27,39],[31,40,27,40,"uri"],[31,43,27,43],[32,4,28,4],[32,10,28,10,"result"],[32,16,28,16],[32,19,28,19],[33,6,28,21,"uri"],[34,4,28,25],[34,5,28,26],[35,4,29,4],[35,8,29,8,"extras"],[35,14,29,14],[35,15,29,15,"assetId"],[35,22,29,22],[35,26,29,26],[35,30,29,30],[35,32,29,32],[36,6,30,8,"result"],[36,12,30,14],[36,13,30,15,"assetId"],[36,20,30,22],[36,23,30,25,"extras"],[36,29,30,31],[36,30,30,32,"assetId"],[36,37,30,39],[37,4,31,4],[38,4,32,4],[38,8,32,8,"extras"],[38,14,32,14],[38,15,32,15,"headers"],[38,22,32,22],[38,24,32,24],[39,6,33,8,"result"],[39,12,33,14],[39,13,33,15,"headers"],[39,20,33,22],[39,23,33,25,"extras"],[39,29,33,31],[39,30,33,32,"headers"],[39,37,33,39],[40,4,34,4],[41,4,35,4],[41,11,35,11,"result"],[41,17,35,17],[42,2,36,0],[43,2,37,7],[43,11,37,16,"resolveSource"],[43,24,37,29,"resolveSource"],[43,25,37,30,"source"],[43,31,37,36],[43,33,37,38],[44,4,38,4],[44,8,38,8,"source"],[44,14,38,14],[44,18,38,18],[44,22,38,22],[44,24,38,24],[45,6,39,8],[45,13,39,15],[45,17,39,19],[46,4,40,4],[47,4,41,4],[47,8,41,8,"source"],[47,14,41,14],[47,26,41,26,"Asset"],[47,52,41,26],[47,53,41,26,"Asset"],[47,72,41,31],[47,74,41,33],[48,6,42,8],[48,13,42,15,"createSourceFromAsset"],[48,34,42,36],[48,35,42,37,"source"],[48,41,42,43],[48,42,42,44],[49,4,43,4],[50,4,44,4],[50,8,44,8],[50,15,44,15,"source"],[50,21,44,21],[50,26,44,26],[50,34,44,34],[50,36,44,36],[51,6,45,8],[51,13,45,15],[52,8,45,17,"uri"],[52,11,45,20],[52,13,45,22,"source"],[53,6,45,29],[53,7,45,30],[54,4,46,4],[55,4,47,4],[55,8,47,8],[55,15,47,15,"source"],[55,21,47,21],[55,26,47,26],[55,34,47,34],[55,36,47,36],[56,6,48,8],[56,12,48,14,"asset"],[56,17,48,19],[56,20,48,22,"Asset"],[56,46,48,22],[56,47,48,22,"Asset"],[56,66,48,27],[56,67,48,28,"fromModule"],[56,77,48,38],[56,78,48,39,"source"],[56,84,48,45],[56,85,48,46],[57,6,49,8],[57,13,49,15,"createSourceFromAsset"],[57,34,49,36],[57,35,49,37,"asset"],[57,40,49,42],[57,42,49,44],[58,8,49,46,"assetId"],[58,15,49,53],[58,17,49,55,"source"],[59,6,49,62],[59,7,49,63],[59,8,49,64],[60,4,50,4],[61,4,51,4],[61,8,51,8],[61,15,51,15,"source"],[61,21,51,21],[61,26,51,26],[61,34,51,34],[61,36,51,36],[62,6,52,8],[62,10,52,12],[62,19,52,21],[62,23,52,25,"source"],[62,29,52,31],[62,33,52,35],[62,40,52,42,"source"],[62,46,52,48],[62,47,52,49,"assetId"],[62,54,52,56],[62,59,52,61],[62,67,52,69],[62,69,52,71],[63,8,53,12],[63,14,53,18,"asset"],[63,19,53,23],[63,22,53,26,"Asset"],[63,48,53,26],[63,49,53,26,"Asset"],[63,68,53,31],[63,69,53,32,"fromModule"],[63,79,53,42],[63,80,53,43,"source"],[63,86,53,49],[63,87,53,50,"assetId"],[63,94,53,57],[63,95,53,58],[64,8,54,12],[64,15,54,19],[65,10,55,16],[65,13,55,19,"source"],[65,19,55,25],[66,10,56,16,"uri"],[66,13,56,19],[66,15,56,21,"asset"],[66,20,56,26],[66,21,56,27,"localUri"],[66,29,56,35],[66,33,56,39,"asset"],[66,38,56,44],[66,39,56,45,"uri"],[67,8,57,12],[67,9,57,13],[68,6,58,8],[69,6,59,8],[69,10,59,12],[69,15,59,17],[69,19,59,21,"source"],[69,25,59,27],[69,29,59,31],[69,36,59,38,"source"],[69,42,59,44],[69,43,59,45,"uri"],[69,46,59,48],[69,51,59,53],[69,59,59,61],[69,61,59,63],[70,8,60,12],[70,15,60,19,"source"],[70,21,60,25],[71,6,61,8],[72,4,62,4],[73,4,63,4],[73,11,63,11,"source"],[73,17,63,17],[73,21,63,21],[73,25,63,25],[74,2,64,0],[75,2,65,0],[76,0,66,0],[77,0,67,0],[78,0,68,0],[79,2,69,7],[79,17,69,22,"resolveSourceWithDownload"],[79,42,69,47,"resolveSourceWithDownload"],[79,43,69,48,"source"],[79,49,69,54],[79,51,69,56],[80,4,70,4],[80,10,70,10,"asset"],[80,15,70,15],[80,18,70,18,"getAssetFromSource"],[80,36,70,36],[80,37,70,37,"source"],[80,43,70,43],[80,44,70,44],[81,4,71,4],[81,10,71,10,"fallbackSource"],[81,24,71,24],[81,27,71,27,"resolveSource"],[81,40,71,40],[81,41,71,41,"source"],[81,47,71,47],[81,48,71,48],[82,4,72,4],[82,8,72,8,"asset"],[82,13,72,13],[82,15,72,15],[83,6,73,8],[83,10,73,12,"assetToDownload"],[83,25,73,27],[83,28,73,30,"asset"],[83,33,73,35],[84,6,74,8],[84,10,74,12],[85,8,75,12],[86,8,76,12],[87,8,77,12],[88,8,78,12],[89,8,79,12],[89,12,79,16],[89,13,79,17,"assetToDownload"],[89,28,79,32],[89,29,79,33,"type"],[89,33,79,37],[89,35,79,39],[90,10,80,16,"assetToDownload"],[90,25,80,31],[90,28,80,34],[90,33,80,38,"Asset"],[90,59,80,38],[90,60,80,38,"Asset"],[90,79,80,43],[90,81,80,44],[91,12,81,20,"name"],[91,16,81,24],[91,18,81,26,"asset"],[91,23,81,31],[91,24,81,32,"name"],[91,28,81,36],[92,12,82,20,"type"],[92,16,82,24],[92,18,82,26],[92,23,82,31],[93,12,83,20,"uri"],[93,15,83,23],[93,17,83,25,"asset"],[93,22,83,30],[93,23,83,31,"uri"],[94,10,84,16],[94,11,84,17],[94,12,84,18],[95,8,85,12],[96,8,86,12],[97,8,87,12],[98,8,88,12],[98,14,88,18,"assetToDownload"],[98,29,88,33],[98,30,88,34,"downloadAsync"],[98,43,88,47],[98,44,88,48],[98,45,88,49],[99,8,89,12],[100,8,90,12],[100,12,90,16,"assetToDownload"],[100,27,90,31],[100,28,90,32,"localUri"],[100,36,90,40],[100,38,90,42],[101,10,91,16],[101,14,91,20,"finalUri"],[101,22,91,28],[101,25,91,31,"assetToDownload"],[101,40,91,46],[101,41,91,47,"localUri"],[101,49,91,55],[102,10,92,16],[103,10,93,16],[104,10,94,16],[105,10,95,16],[106,10,96,16],[106,14,96,20,"Platform"],[106,40,96,20],[106,41,96,20,"Platform"],[106,70,96,28],[106,71,96,29,"OS"],[106,73,96,31],[106,78,96,36],[106,83,96,41],[106,85,96,43],[107,12,97,20],[107,18,97,26,"response"],[107,26,97,34],[107,29,97,37],[107,35,97,43,"fetch"],[107,40,97,48],[107,41,97,49,"assetToDownload"],[107,56,97,64],[107,57,97,65,"localUri"],[107,65,97,73],[107,66,97,74],[108,12,98,20],[108,18,98,26,"blob"],[108,22,98,30],[108,25,98,33],[108,31,98,39,"response"],[108,39,98,47],[108,40,98,48,"blob"],[108,44,98,52],[108,45,98,53],[108,46,98,54],[109,12,99,20,"finalUri"],[109,20,99,28],[109,23,99,31,"URL"],[109,26,99,34],[109,27,99,35,"createObjectURL"],[109,42,99,50],[109,43,99,51,"blob"],[109,47,99,55],[109,48,99,56],[110,10,100,16],[111,10,101,16],[111,14,101,20,"fallbackSource"],[111,28,101,34],[111,32,101,38],[111,39,101,45,"fallbackSource"],[111,53,101,59],[111,58,101,64],[111,66,101,72],[111,68,101,74],[112,12,102,20],[112,19,102,27],[113,14,103,24],[113,17,103,27,"fallbackSource"],[113,31,103,41],[114,14,104,24,"uri"],[114,17,104,27],[114,19,104,29,"finalUri"],[115,12,105,20],[115,13,105,21],[116,10,106,16],[117,10,107,16],[117,17,107,23],[118,12,107,25,"uri"],[118,15,107,28],[118,17,107,30,"finalUri"],[119,10,107,39],[119,11,107,40],[120,8,108,12],[120,9,108,13],[120,15,109,17],[121,10,110,16,"console"],[121,17,110,23],[121,18,110,24,"warn"],[121,22,110,28],[121,23,110,29],[121,113,110,119],[121,114,110,120],[122,8,111,12],[123,6,112,8],[123,7,112,9],[123,8,113,8],[123,15,113,15,"error"],[123,20,113,20],[123,22,113,22],[124,8,114,12],[125,8,115,12,"console"],[125,15,115,19],[125,16,115,20,"warn"],[125,20,115,24],[125,21,115,25],[125,93,115,97],[125,95,115,99,"error"],[125,100,115,104],[125,101,115,105],[126,6,116,8],[127,4,117,4],[128,4,118,4],[129,4,119,4],[129,11,119,11,"fallbackSource"],[129,25,119,25],[130,2,120,0],[131,0,120,1],[131,3]],"functionMap":{"names":["<global>","getAssetFromSource","createSourceFromAsset","resolveSource","resolveSourceWithDownload"],"mappings":"AAA;ACE;CDsB;AEC;CFU;OGC;CH2B;OIK;CJmD"}},"type":"js/module"}]}