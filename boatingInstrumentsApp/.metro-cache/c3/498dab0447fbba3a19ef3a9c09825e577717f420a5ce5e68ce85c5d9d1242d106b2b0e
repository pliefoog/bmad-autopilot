{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"kslwqCIsh6ew+I1KeA1rlVRjsAk=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/classCallCheck","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"yg7e6laZwmpbIvId5jovq9ugXp8=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/createClass","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"Z6pzkVZ2fvxBLkFTgVVOy4UDj30=","exportNames":["*"],"imports":1}},{"name":"./NativeBlobModule","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":14,"column":0},"end":{"line":14,"column":50}}],"key":"U6TvaDH8SXQ+L3uxoXKyiOMXH+8=","exportNames":["*"],"imports":1}},{"name":"invariant","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":15,"column":0},"end":{"line":15,"column":34}}],"key":"4HPAaDQ25ZwZ2dzTLatXuUucZUM=","exportNames":["*"],"imports":1}},{"name":"./Blob","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":17,"column":20},"end":{"line":17,"column":45}},{"start":{"line":17,"column":20},"end":{"line":17,"column":45}}],"key":"mgvDEIvsyYQQJCSt18UmaoHoX6k=","exportNames":["*"],"imports":2}},{"name":"./BlobRegistry","data":{"asyncType":null,"isESMImport":false,"locs":[{"start":{"line":18,"column":21},"end":{"line":18,"column":46}},{"start":{"line":18,"column":21},"end":{"line":18,"column":46}},{"start":{"line":18,"column":21},"end":{"line":18,"column":46}}],"key":"JHbMLLFwEH95R1ixWPXDXrku130=","exportNames":["*"],"imports":3}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = require(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\").default;\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.default = void 0;\n  var _classCallCheck2 = _interopRequireDefault(require(_dependencyMap[1], \"@babel/runtime/helpers/classCallCheck\"));\n  var _createClass2 = _interopRequireDefault(require(_dependencyMap[2], \"@babel/runtime/helpers/createClass\"));\n  var _NativeBlobModule = _interopRequireDefault(require(_dependencyMap[3], \"./NativeBlobModule\"));\n  var _invariant = _interopRequireDefault(require(_dependencyMap[4], \"invariant\"));\n  function uuidv4() {\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, c => {\n      var r = Math.random() * 16 | 0,\n        v = c == 'x' ? r : r & 0x3 | 0x8;\n      return v.toString(16);\n    });\n  }\n  function createBlobCollector(blobId) {\n    if (global.__blobCollectorProvider == null) {\n      return null;\n    } else {\n      return global.__blobCollectorProvider(blobId);\n    }\n  }\n  var BlobManager = /*#__PURE__*/function () {\n    function BlobManager() {\n      (0, _classCallCheck2.default)(this, BlobManager);\n    }\n    return (0, _createClass2.default)(BlobManager, null, [{\n      key: \"createFromParts\",\n      value: function createFromParts(parts, options) {\n        (0, _invariant.default)(_NativeBlobModule.default, 'NativeBlobModule is available.');\n        var blobId = uuidv4();\n        var items = parts.map(part => {\n          if (part instanceof ArrayBuffer || ArrayBuffer.isView(part)) {\n            throw new Error(\"Creating blobs from 'ArrayBuffer' and 'ArrayBufferView' are not supported\");\n          }\n          if (part instanceof require(_dependencyMap[5], \"./Blob\").default) {\n            return {\n              data: part.data,\n              type: 'blob'\n            };\n          } else {\n            return {\n              data: String(part),\n              type: 'string'\n            };\n          }\n        });\n        var size = items.reduce((acc, curr) => {\n          if (curr.type === 'string') {\n            return acc + global.unescape(encodeURI(curr.data)).length;\n          } else {\n            return acc + curr.data.size;\n          }\n        }, 0);\n        _NativeBlobModule.default.createFromParts(items, blobId);\n        return BlobManager.createFromOptions({\n          blobId,\n          offset: 0,\n          size,\n          type: options ? options.type : '',\n          lastModified: options ? options.lastModified : Date.now()\n        });\n      }\n    }, {\n      key: \"createFromOptions\",\n      value: function createFromOptions(options) {\n        require(_dependencyMap[6], \"./BlobRegistry\").register(options.blobId);\n        return Object.assign(Object.create(require(_dependencyMap[5], \"./Blob\").default.prototype), {\n          data: options.__collector == null ? {\n            ...options,\n            __collector: createBlobCollector(options.blobId)\n          } : options\n        });\n      }\n    }, {\n      key: \"release\",\n      value: function release(blobId) {\n        (0, _invariant.default)(_NativeBlobModule.default, 'NativeBlobModule is available.');\n        require(_dependencyMap[6], \"./BlobRegistry\").unregister(blobId);\n        if (require(_dependencyMap[6], \"./BlobRegistry\").has(blobId)) {\n          return;\n        }\n        _NativeBlobModule.default.release(blobId);\n      }\n    }, {\n      key: \"addNetworkingHandler\",\n      value: function addNetworkingHandler() {\n        (0, _invariant.default)(_NativeBlobModule.default, 'NativeBlobModule is available.');\n        _NativeBlobModule.default.addNetworkingHandler();\n      }\n    }, {\n      key: \"addWebSocketHandler\",\n      value: function addWebSocketHandler(socketId) {\n        (0, _invariant.default)(_NativeBlobModule.default, 'NativeBlobModule is available.');\n        _NativeBlobModule.default.addWebSocketHandler(socketId);\n      }\n    }, {\n      key: \"removeWebSocketHandler\",\n      value: function removeWebSocketHandler(socketId) {\n        (0, _invariant.default)(_NativeBlobModule.default, 'NativeBlobModule is available.');\n        _NativeBlobModule.default.removeWebSocketHandler(socketId);\n      }\n    }, {\n      key: \"sendOverSocket\",\n      value: function sendOverSocket(blob, socketId) {\n        (0, _invariant.default)(_NativeBlobModule.default, 'NativeBlobModule is available.');\n        _NativeBlobModule.default.sendOverSocket(blob.data, socketId);\n      }\n    }]);\n  }();\n  BlobManager.isAvailable = !!_NativeBlobModule.default;\n  var _default = exports.default = BlobManager;\n});","lineCount":115,"map":[[9,2,14,0],[9,6,14,0,"_NativeBlobModule"],[9,23,14,0],[9,26,14,0,"_interopRequireDefault"],[9,48,14,0],[9,49,14,0,"require"],[9,56,14,0],[9,57,14,0,"_dependencyMap"],[9,71,14,0],[10,2,15,0],[10,6,15,0,"_invariant"],[10,16,15,0],[10,19,15,0,"_interopRequireDefault"],[10,41,15,0],[10,42,15,0,"require"],[10,49,15,0],[10,50,15,0,"_dependencyMap"],[10,64,15,0],[11,2,27,0],[11,11,27,9,"uuidv4"],[11,17,27,15,"uuidv4"],[11,18,27,15],[11,20,27,26],[12,4,28,2],[12,11,28,9],[12,49,28,47],[12,50,28,48,"replace"],[12,57,28,55],[12,58,28,56],[12,65,28,63],[12,67,28,65,"c"],[12,68,28,66],[12,72,28,70],[13,6,29,4],[13,10,29,10,"r"],[13,11,29,11],[13,14,29,15,"Math"],[13,18,29,19],[13,19,29,20,"random"],[13,25,29,26],[13,26,29,27],[13,27,29,28],[13,30,29,31],[13,32,29,33],[13,35,29,37],[13,36,29,38],[14,8,30,6,"v"],[14,9,30,7],[14,12,30,10,"c"],[14,13,30,11],[14,17,30,15],[14,20,30,18],[14,23,30,21,"r"],[14,24,30,22],[14,27,30,26,"r"],[14,28,30,27],[14,31,30,30],[14,34,30,33],[14,37,30,37],[14,40,30,40],[15,6,31,4],[15,13,31,11,"v"],[15,14,31,12],[15,15,31,13,"toString"],[15,23,31,21],[15,24,31,22],[15,26,31,24],[15,27,31,25],[16,4,32,2],[16,5,32,3],[16,6,32,4],[17,2,33,0],[18,2,42,0],[18,11,42,9,"createBlobCollector"],[18,30,42,28,"createBlobCollector"],[18,31,42,29,"blobId"],[18,37,42,43],[18,39,42,67],[19,4,43,2],[19,8,43,6,"global"],[19,14,43,12],[19,15,43,13,"__blobCollectorProvider"],[19,38,43,36],[19,42,43,40],[19,46,43,44],[19,48,43,46],[20,6,44,4],[20,13,44,11],[20,17,44,15],[21,4,45,2],[21,5,45,3],[21,11,45,9],[22,6,46,4],[22,13,46,11,"global"],[22,19,46,17],[22,20,46,18,"__blobCollectorProvider"],[22,43,46,41],[22,44,46,42,"blobId"],[22,50,46,48],[22,51,46,49],[23,4,47,2],[24,2,48,0],[25,2,48,1],[25,6,53,6,"BlobManager"],[25,17,53,17],[26,4,53,17],[26,13,53,17,"BlobManager"],[26,25,53,17],[27,6,53,17],[27,10,53,17,"_classCallCheck2"],[27,26,53,17],[27,27,53,17,"default"],[27,34,53,17],[27,42,53,17,"BlobManager"],[27,53,53,17],[28,4,53,17],[29,4,53,17],[29,15,53,17,"_createClass2"],[29,28,53,17],[29,29,53,17,"default"],[29,36,53,17],[29,38,53,17,"BlobManager"],[29,49,53,17],[30,6,53,17,"key"],[30,9,53,17],[31,6,53,17,"value"],[31,11,53,17],[31,13,62,2],[31,22,62,9,"createFromParts"],[31,37,62,24,"createFromParts"],[31,38,63,4,"parts"],[31,43,63,31],[31,45,64,4,"options"],[31,52,64,25],[31,54,65,10],[32,8,66,4],[32,12,66,4,"invariant"],[32,30,66,13],[32,32,66,14,"NativeBlobModule"],[32,57,66,30],[32,59,66,32],[32,91,66,64],[32,92,66,65],[33,8,68,4],[33,12,68,10,"blobId"],[33,18,68,16],[33,21,68,19,"uuidv4"],[33,27,68,25],[33,28,68,26],[33,29,68,27],[34,8,69,4],[34,12,69,10,"items"],[34,17,69,15],[34,20,69,18,"parts"],[34,25,69,23],[34,26,69,24,"map"],[34,29,69,27],[34,30,69,28,"part"],[34,34,69,32],[34,38,69,36],[35,10,70,6],[35,14,70,10,"part"],[35,18,70,14],[35,30,70,26,"ArrayBuffer"],[35,41,70,37],[35,45,70,41,"ArrayBuffer"],[35,56,70,52],[35,57,70,53,"isView"],[35,63,70,59],[35,64,70,60,"part"],[35,68,70,64],[35,69,70,65],[35,71,70,67],[36,12,71,8],[36,18,71,14],[36,22,71,18,"Error"],[36,27,71,23],[36,28,72,10],[36,103,73,8],[36,104,73,9],[37,10,74,6],[38,10,75,6],[38,14,75,10,"part"],[38,18,75,14],[38,30,75,14,"require"],[38,37,75,14],[38,38,75,14,"_dependencyMap"],[38,52,75,14],[38,67,75,14,"default"],[38,74,75,30],[38,76,75,32],[39,12,76,8],[39,19,76,15],[40,14,77,10,"data"],[40,18,77,14],[40,20,77,16,"part"],[40,24,77,20],[40,25,77,21,"data"],[40,29,77,25],[41,14,78,10,"type"],[41,18,78,14],[41,20,78,16],[42,12,79,8],[42,13,79,9],[43,10,80,6],[43,11,80,7],[43,17,80,13],[44,12,81,8],[44,19,81,15],[45,14,82,10,"data"],[45,18,82,14],[45,20,82,16,"String"],[45,26,82,22],[45,27,82,23,"part"],[45,31,82,27],[45,32,82,28],[46,14,83,10,"type"],[46,18,83,14],[46,20,83,16],[47,12,84,8],[47,13,84,9],[48,10,85,6],[49,8,86,4],[49,9,86,5],[49,10,86,6],[50,8,87,4],[50,12,87,10,"size"],[50,16,87,14],[50,19,87,17,"items"],[50,24,87,22],[50,25,87,23,"reduce"],[50,31,87,29],[50,32,87,30],[50,33,87,31,"acc"],[50,36,87,34],[50,38,87,36,"curr"],[50,42,87,40],[50,47,87,45],[51,10,88,6],[51,14,88,10,"curr"],[51,18,88,14],[51,19,88,15,"type"],[51,23,88,19],[51,28,88,24],[51,36,88,32],[51,38,88,34],[52,12,91,8],[52,19,91,15,"acc"],[52,22,91,18],[52,25,91,21,"global"],[52,31,91,27],[52,32,91,28,"unescape"],[52,40,91,36],[52,41,91,37,"encodeURI"],[52,50,91,46],[52,51,91,47,"curr"],[52,55,91,51],[52,56,91,52,"data"],[52,60,91,56],[52,61,91,57],[52,62,91,58],[52,63,91,59,"length"],[52,69,91,65],[53,10,92,6],[53,11,92,7],[53,17,92,13],[54,12,95,8],[54,19,95,15,"acc"],[54,22,95,18],[54,25,95,21,"curr"],[54,29,95,25],[54,30,95,26,"data"],[54,34,95,30],[54,35,95,31,"size"],[54,39,95,35],[55,10,96,6],[56,8,97,4],[56,9,97,5],[56,11,97,7],[56,12,97,8],[56,13,97,9],[57,8,99,4,"NativeBlobModule"],[57,33,99,20],[57,34,99,21,"createFromParts"],[57,49,99,36],[57,50,99,37,"items"],[57,55,99,42],[57,57,99,44,"blobId"],[57,63,99,50],[57,64,99,51],[58,8,101,4],[58,15,101,11,"BlobManager"],[58,26,101,22],[58,27,101,23,"createFromOptions"],[58,44,101,40],[58,45,101,41],[59,10,102,6,"blobId"],[59,16,102,12],[60,10,103,6,"offset"],[60,16,103,12],[60,18,103,14],[60,19,103,15],[61,10,104,6,"size"],[61,14,104,10],[62,10,105,6,"type"],[62,14,105,10],[62,16,105,12,"options"],[62,23,105,19],[62,26,105,22,"options"],[62,33,105,29],[62,34,105,30,"type"],[62,38,105,34],[62,41,105,37],[62,43,105,39],[63,10,106,6,"lastModified"],[63,22,106,18],[63,24,106,20,"options"],[63,31,106,27],[63,34,106,30,"options"],[63,41,106,37],[63,42,106,38,"lastModified"],[63,54,106,50],[63,57,106,53,"Date"],[63,61,106,57],[63,62,106,58,"now"],[63,65,106,61],[63,66,106,62],[64,8,107,4],[64,9,107,5],[64,10,107,6],[65,6,108,2],[66,4,108,3],[67,6,108,3,"key"],[67,9,108,3],[68,6,108,3,"value"],[68,11,108,3],[68,13,114,2],[68,22,114,9,"createFromOptions"],[68,39,114,26,"createFromOptions"],[68,40,114,27,"options"],[68,47,114,44],[68,49,114,52],[69,8,115,4,"require"],[69,15,115,4],[69,16,115,4,"_dependencyMap"],[69,30,115,4],[69,53,115,17,"register"],[69,61,115,25],[69,62,115,26,"options"],[69,69,115,33],[69,70,115,34,"blobId"],[69,76,115,40],[69,77,115,41],[70,8,118,4],[70,15,118,11,"Object"],[70,21,118,17],[70,22,118,18,"assign"],[70,28,118,24],[70,29,118,25,"Object"],[70,35,118,31],[70,36,118,32,"create"],[70,42,118,38],[70,43,118,39,"require"],[70,50,118,39],[70,51,118,39,"_dependencyMap"],[70,65,118,39],[70,80,118,39,"default"],[70,87,118,39],[70,88,118,44,"prototype"],[70,97,118,53],[70,98,118,54],[70,100,118,56],[71,10,119,6,"data"],[71,14,119,10],[71,16,123,8,"options"],[71,23,123,15],[71,24,123,16,"__collector"],[71,35,123,27],[71,39,123,31],[71,43,123,35],[71,46,124,12],[72,12,125,14],[72,15,125,17,"options"],[72,22,125,24],[73,12,126,14,"__collector"],[73,23,126,25],[73,25,126,27,"createBlobCollector"],[73,44,126,46],[73,45,126,47,"options"],[73,52,126,54],[73,53,126,55,"blobId"],[73,59,126,61],[74,10,127,12],[74,11,127,13],[74,14,128,12,"options"],[75,8,129,4],[75,9,129,5],[75,10,129,6],[76,6,130,2],[77,4,130,3],[78,6,130,3,"key"],[78,9,130,3],[79,6,130,3,"value"],[79,11,130,3],[79,13,135,2],[79,22,135,9,"release"],[79,29,135,16,"release"],[79,30,135,17,"blobId"],[79,36,135,31],[79,38,135,39],[80,8,136,4],[80,12,136,4,"invariant"],[80,30,136,13],[80,32,136,14,"NativeBlobModule"],[80,57,136,30],[80,59,136,32],[80,91,136,64],[80,92,136,65],[81,8,138,4,"require"],[81,15,138,4],[81,16,138,4,"_dependencyMap"],[81,30,138,4],[81,53,138,17,"unregister"],[81,63,138,27],[81,64,138,28,"blobId"],[81,70,138,34],[81,71,138,35],[82,8,139,4],[82,12,139,8,"require"],[82,19,139,8],[82,20,139,8,"_dependencyMap"],[82,34,139,8],[82,57,139,21,"has"],[82,60,139,24],[82,61,139,25,"blobId"],[82,67,139,31],[82,68,139,32],[82,70,139,34],[83,10,140,6],[84,8,141,4],[85,8,142,4,"NativeBlobModule"],[85,33,142,20],[85,34,142,21,"release"],[85,41,142,28],[85,42,142,29,"blobId"],[85,48,142,35],[85,49,142,36],[86,6,143,2],[87,4,143,3],[88,6,143,3,"key"],[88,9,143,3],[89,6,143,3,"value"],[89,11,143,3],[89,13,149,2],[89,22,149,9,"addNetworkingHandler"],[89,42,149,29,"addNetworkingHandler"],[89,43,149,29],[89,45,149,38],[90,8,150,4],[90,12,150,4,"invariant"],[90,30,150,13],[90,32,150,14,"NativeBlobModule"],[90,57,150,30],[90,59,150,32],[90,91,150,64],[90,92,150,65],[91,8,152,4,"NativeBlobModule"],[91,33,152,20],[91,34,152,21,"addNetworkingHandler"],[91,54,152,41],[91,55,152,42],[91,56,152,43],[92,6,153,2],[93,4,153,3],[94,6,153,3,"key"],[94,9,153,3],[95,6,153,3,"value"],[95,11,153,3],[95,13,159,2],[95,22,159,9,"addWebSocketHandler"],[95,41,159,28,"addWebSocketHandler"],[95,42,159,29,"socketId"],[95,50,159,45],[95,52,159,53],[96,8,160,4],[96,12,160,4,"invariant"],[96,30,160,13],[96,32,160,14,"NativeBlobModule"],[96,57,160,30],[96,59,160,32],[96,91,160,64],[96,92,160,65],[97,8,162,4,"NativeBlobModule"],[97,33,162,20],[97,34,162,21,"addWebSocketHandler"],[97,53,162,40],[97,54,162,41,"socketId"],[97,62,162,49],[97,63,162,50],[98,6,163,2],[99,4,163,3],[100,6,163,3,"key"],[100,9,163,3],[101,6,163,3,"value"],[101,11,163,3],[101,13,169,2],[101,22,169,9,"removeWebSocketHandler"],[101,44,169,31,"removeWebSocketHandler"],[101,45,169,32,"socketId"],[101,53,169,48],[101,55,169,56],[102,8,170,4],[102,12,170,4,"invariant"],[102,30,170,13],[102,32,170,14,"NativeBlobModule"],[102,57,170,30],[102,59,170,32],[102,91,170,64],[102,92,170,65],[103,8,172,4,"NativeBlobModule"],[103,33,172,20],[103,34,172,21,"removeWebSocketHandler"],[103,56,172,43],[103,57,172,44,"socketId"],[103,65,172,52],[103,66,172,53],[104,6,173,2],[105,4,173,3],[106,6,173,3,"key"],[106,9,173,3],[107,6,173,3,"value"],[107,11,173,3],[107,13,178,2],[107,22,178,9,"sendOverSocket"],[107,36,178,23,"sendOverSocket"],[107,37,178,24,"blob"],[107,41,178,34],[107,43,178,36,"socketId"],[107,51,178,52],[107,53,178,60],[108,8,179,4],[108,12,179,4,"invariant"],[108,30,179,13],[108,32,179,14,"NativeBlobModule"],[108,57,179,30],[108,59,179,32],[108,91,179,64],[108,92,179,65],[109,8,181,4,"NativeBlobModule"],[109,33,181,20],[109,34,181,21,"sendOverSocket"],[109,48,181,35],[109,49,181,36,"blob"],[109,53,181,40],[109,54,181,41,"data"],[109,58,181,45],[109,60,181,47,"socketId"],[109,68,181,55],[109,69,181,56],[110,6,182,2],[111,4,182,3],[112,2,182,3],[113,2,53,6,"BlobManager"],[113,13,53,17],[113,14,57,9,"isAvailable"],[113,25,57,20],[113,28,57,32],[113,29,57,33],[113,30,57,34,"NativeBlobModule"],[113,55,57,50],[114,2,57,50],[114,6,57,50,"_default"],[114,14,57,50],[114,17,57,50,"exports"],[114,24,57,50],[114,25,57,50,"default"],[114,32,57,50],[114,35,185,15,"BlobManager"],[114,46,185,26],[115,0,185,26],[115,3]],"functionMap":{"names":["<global>","uuidv4","xxxxxxxxXxxx4xxxYxxxXxxxxxxxxxxx.replace$argument_1","createBlobCollector","BlobManager","createFromParts","parts.map$argument_0","items.reduce$argument_0","createFromOptions","release","addNetworkingHandler","addWebSocketHandler","removeWebSocketHandler","sendOverSocket"],"mappings":"AAA;AC0B;iECC;GDI;CDC;AGS;CHM;AIK;ECS;4BCO;KDiB;8BEC;KFU;GDW;EIM;GJgB;EKK;GLQ;EMM;GNI;EOM;GPI;EQM;GRI;ESK;GTI;CJC"}},"type":"js/module"}]}