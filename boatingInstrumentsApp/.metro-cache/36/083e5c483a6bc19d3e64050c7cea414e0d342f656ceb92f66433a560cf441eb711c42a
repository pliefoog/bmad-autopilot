{"dependencies":[{"name":"../interfaces","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":15},"end":{"line":3,"column":43,"index":58}},{"start":{"line":3,"column":0,"index":15},"end":{"line":3,"column":43,"index":58}},{"start":{"line":3,"column":0,"index":15},"end":{"line":3,"column":43,"index":58}},{"start":{"line":3,"column":0,"index":15},"end":{"line":3,"column":43,"index":58}},{"start":{"line":3,"column":0,"index":15},"end":{"line":3,"column":43,"index":58}}],"key":"GMKh3a5g5xNaAog15vl07v6pG2U=","exportNames":["*"],"imports":5}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.default = void 0;\n  class RotationGestureDetector {\n    currentTime = 0;\n    previousTime = 0;\n    previousAngle = 0;\n    _rotation = 0;\n    _anchorX = 0;\n    _anchorY = 0;\n    isInProgress = false;\n    keyPointers = [NaN, NaN];\n    constructor(callbacks) {\n      this.onRotationBegin = callbacks.onRotationBegin;\n      this.onRotation = callbacks.onRotation;\n      this.onRotationEnd = callbacks.onRotationEnd;\n    }\n    updateCurrent(event, tracker) {\n      this.previousTime = this.currentTime;\n      this.currentTime = event.time;\n      const [firstPointerID, secondPointerID] = this.keyPointers;\n      const firstPointerCoords = tracker.getLastAbsoluteCoords(firstPointerID);\n      const secondPointerCoords = tracker.getLastAbsoluteCoords(secondPointerID);\n      if (!firstPointerCoords || !secondPointerCoords) {\n        return;\n      }\n      const vectorX = secondPointerCoords.x - firstPointerCoords.x;\n      const vectorY = secondPointerCoords.y - firstPointerCoords.y;\n      this._anchorX = (firstPointerCoords.x + secondPointerCoords.x) / 2;\n      this._anchorY = (firstPointerCoords.y + secondPointerCoords.y) / 2;\n\n      // Angle diff should be positive when rotating in clockwise direction\n      const angle = -Math.atan2(vectorY, vectorX);\n      this._rotation = Number.isNaN(this.previousAngle) ? 0 : this.previousAngle - angle;\n      this.previousAngle = angle;\n      if (this.rotation > Math.PI) {\n        this._rotation -= Math.PI;\n      } else if (this.rotation < -Math.PI) {\n        this._rotation += Math.PI;\n      }\n      if (this.rotation > Math.PI / 2) {\n        this._rotation -= Math.PI;\n      } else if (this.rotation < -Math.PI / 2) {\n        this._rotation += Math.PI;\n      }\n    }\n    finish() {\n      if (!this.isInProgress) {\n        return;\n      }\n      this.isInProgress = false;\n      this.keyPointers = [NaN, NaN];\n      this.onRotationEnd(this);\n    }\n    setKeyPointers(tracker) {\n      if (this.keyPointers[0] && this.keyPointers[1]) {\n        return;\n      }\n      const pointerIDs = tracker.trackedPointers.keys();\n      this.keyPointers[0] = pointerIDs.next().value;\n      this.keyPointers[1] = pointerIDs.next().value;\n    }\n    onTouchEvent(event, tracker) {\n      switch (event.eventType) {\n        case require(_dependencyMap[0], \"../interfaces\").EventTypes.DOWN:\n          this.isInProgress = false;\n          break;\n        case require(_dependencyMap[0], \"../interfaces\").EventTypes.ADDITIONAL_POINTER_DOWN:\n          if (this.isInProgress) {\n            break;\n          }\n          this.isInProgress = true;\n          this.previousTime = event.time;\n          this.previousAngle = NaN;\n          this.setKeyPointers(tracker);\n          this.updateCurrent(event, tracker);\n          this.onRotationBegin(this);\n          break;\n        case require(_dependencyMap[0], \"../interfaces\").EventTypes.MOVE:\n          if (!this.isInProgress) {\n            break;\n          }\n          this.updateCurrent(event, tracker);\n          this.onRotation(this);\n          break;\n        case require(_dependencyMap[0], \"../interfaces\").EventTypes.ADDITIONAL_POINTER_UP:\n          if (!this.isInProgress) {\n            break;\n          }\n          if (this.keyPointers.indexOf(event.pointerId) >= 0) {\n            this.finish();\n          }\n          break;\n        case require(_dependencyMap[0], \"../interfaces\").EventTypes.UP:\n          if (this.isInProgress) {\n            this.finish();\n          }\n          break;\n      }\n      return true;\n    }\n    reset() {\n      this.keyPointers = [NaN, NaN];\n      this.isInProgress = false;\n    }\n    get anchorX() {\n      return this._anchorX;\n    }\n    get anchorY() {\n      return this._anchorY;\n    }\n    get rotation() {\n      return this._rotation;\n    }\n    get timeDelta() {\n      return this.currentTime + this.previousTime;\n    }\n  }\n  exports.default = RotationGestureDetector;\n});","lineCount":124,"map":[[2,2,1,0],[2,14,1,12],[4,2,1,13,"Object"],[4,8,1,13],[4,9,1,13,"defineProperty"],[4,23,1,13],[4,24,1,13,"exports"],[4,31,1,13],[5,4,1,13,"value"],[5,9,1,13],[6,2,1,13],[7,2,1,13,"exports"],[7,9,1,13],[7,10,1,13,"default"],[7,17,1,13],[8,2,4,15],[8,8,4,21,"RotationGestureDetector"],[8,31,4,44],[8,32,4,45],[9,4,5,2,"currentTime"],[9,15,5,13],[9,18,5,16],[9,19,5,17],[10,4,6,2,"previousTime"],[10,16,6,14],[10,19,6,17],[10,20,6,18],[11,4,7,2,"previousAngle"],[11,17,7,15],[11,20,7,18],[11,21,7,19],[12,4,8,2,"_rotation"],[12,13,8,11],[12,16,8,14],[12,17,8,15],[13,4,9,2,"_anchorX"],[13,12,9,10],[13,15,9,13],[13,16,9,14],[14,4,10,2,"_anchorY"],[14,12,10,10],[14,15,10,13],[14,16,10,14],[15,4,11,2,"isInProgress"],[15,16,11,14],[15,19,11,17],[15,24,11,22],[16,4,12,2,"keyPointers"],[16,15,12,13],[16,18,12,16],[16,19,12,17,"NaN"],[16,22,12,20],[16,24,12,22,"NaN"],[16,27,12,25],[16,28,12,26],[17,4,13,2,"constructor"],[17,15,13,13,"constructor"],[17,16,13,14,"callbacks"],[17,25,13,23],[17,27,13,25],[18,6,14,4],[18,10,14,8],[18,11,14,9,"onRotationBegin"],[18,26,14,24],[18,29,14,27,"callbacks"],[18,38,14,36],[18,39,14,37,"onRotationBegin"],[18,54,14,52],[19,6,15,4],[19,10,15,8],[19,11,15,9,"onRotation"],[19,21,15,19],[19,24,15,22,"callbacks"],[19,33,15,31],[19,34,15,32,"onRotation"],[19,44,15,42],[20,6,16,4],[20,10,16,8],[20,11,16,9,"onRotationEnd"],[20,24,16,22],[20,27,16,25,"callbacks"],[20,36,16,34],[20,37,16,35,"onRotationEnd"],[20,50,16,48],[21,4,17,2],[22,4,18,2,"updateCurrent"],[22,17,18,15,"updateCurrent"],[22,18,18,16,"event"],[22,23,18,21],[22,25,18,23,"tracker"],[22,32,18,30],[22,34,18,32],[23,6,19,4],[23,10,19,8],[23,11,19,9,"previousTime"],[23,23,19,21],[23,26,19,24],[23,30,19,28],[23,31,19,29,"currentTime"],[23,42,19,40],[24,6,20,4],[24,10,20,8],[24,11,20,9,"currentTime"],[24,22,20,20],[24,25,20,23,"event"],[24,30,20,28],[24,31,20,29,"time"],[24,35,20,33],[25,6,21,4],[25,12,21,10],[25,13,21,11,"firstPointerID"],[25,27,21,25],[25,29,21,27,"secondPointerID"],[25,44,21,42],[25,45,21,43],[25,48,21,46],[25,52,21,50],[25,53,21,51,"keyPointers"],[25,64,21,62],[26,6,22,4],[26,12,22,10,"firstPointerCoords"],[26,30,22,28],[26,33,22,31,"tracker"],[26,40,22,38],[26,41,22,39,"getLastAbsoluteCoords"],[26,62,22,60],[26,63,22,61,"firstPointerID"],[26,77,22,75],[26,78,22,76],[27,6,23,4],[27,12,23,10,"secondPointerCoords"],[27,31,23,29],[27,34,23,32,"tracker"],[27,41,23,39],[27,42,23,40,"getLastAbsoluteCoords"],[27,63,23,61],[27,64,23,62,"secondPointerID"],[27,79,23,77],[27,80,23,78],[28,6,24,4],[28,10,24,8],[28,11,24,9,"firstPointerCoords"],[28,29,24,27],[28,33,24,31],[28,34,24,32,"secondPointerCoords"],[28,53,24,51],[28,55,24,53],[29,8,25,6],[30,6,26,4],[31,6,27,4],[31,12,27,10,"vectorX"],[31,19,27,17],[31,22,27,20,"secondPointerCoords"],[31,41,27,39],[31,42,27,40,"x"],[31,43,27,41],[31,46,27,44,"firstPointerCoords"],[31,64,27,62],[31,65,27,63,"x"],[31,66,27,64],[32,6,28,4],[32,12,28,10,"vectorY"],[32,19,28,17],[32,22,28,20,"secondPointerCoords"],[32,41,28,39],[32,42,28,40,"y"],[32,43,28,41],[32,46,28,44,"firstPointerCoords"],[32,64,28,62],[32,65,28,63,"y"],[32,66,28,64],[33,6,29,4],[33,10,29,8],[33,11,29,9,"_anchorX"],[33,19,29,17],[33,22,29,20],[33,23,29,21,"firstPointerCoords"],[33,41,29,39],[33,42,29,40,"x"],[33,43,29,41],[33,46,29,44,"secondPointerCoords"],[33,65,29,63],[33,66,29,64,"x"],[33,67,29,65],[33,71,29,69],[33,72,29,70],[34,6,30,4],[34,10,30,8],[34,11,30,9,"_anchorY"],[34,19,30,17],[34,22,30,20],[34,23,30,21,"firstPointerCoords"],[34,41,30,39],[34,42,30,40,"y"],[34,43,30,41],[34,46,30,44,"secondPointerCoords"],[34,65,30,63],[34,66,30,64,"y"],[34,67,30,65],[34,71,30,69],[34,72,30,70],[36,6,32,4],[37,6,33,4],[37,12,33,10,"angle"],[37,17,33,15],[37,20,33,18],[37,21,33,19,"Math"],[37,25,33,23],[37,26,33,24,"atan2"],[37,31,33,29],[37,32,33,30,"vectorY"],[37,39,33,37],[37,41,33,39,"vectorX"],[37,48,33,46],[37,49,33,47],[38,6,34,4],[38,10,34,8],[38,11,34,9,"_rotation"],[38,20,34,18],[38,23,34,21,"Number"],[38,29,34,27],[38,30,34,28,"isNaN"],[38,35,34,33],[38,36,34,34],[38,40,34,38],[38,41,34,39,"previousAngle"],[38,54,34,52],[38,55,34,53],[38,58,34,56],[38,59,34,57],[38,62,34,60],[38,66,34,64],[38,67,34,65,"previousAngle"],[38,80,34,78],[38,83,34,81,"angle"],[38,88,34,86],[39,6,35,4],[39,10,35,8],[39,11,35,9,"previousAngle"],[39,24,35,22],[39,27,35,25,"angle"],[39,32,35,30],[40,6,36,4],[40,10,36,8],[40,14,36,12],[40,15,36,13,"rotation"],[40,23,36,21],[40,26,36,24,"Math"],[40,30,36,28],[40,31,36,29,"PI"],[40,33,36,31],[40,35,36,33],[41,8,37,6],[41,12,37,10],[41,13,37,11,"_rotation"],[41,22,37,20],[41,26,37,24,"Math"],[41,30,37,28],[41,31,37,29,"PI"],[41,33,37,31],[42,6,38,4],[42,7,38,5],[42,13,38,11],[42,17,38,15],[42,21,38,19],[42,22,38,20,"rotation"],[42,30,38,28],[42,33,38,31],[42,34,38,32,"Math"],[42,38,38,36],[42,39,38,37,"PI"],[42,41,38,39],[42,43,38,41],[43,8,39,6],[43,12,39,10],[43,13,39,11,"_rotation"],[43,22,39,20],[43,26,39,24,"Math"],[43,30,39,28],[43,31,39,29,"PI"],[43,33,39,31],[44,6,40,4],[45,6,41,4],[45,10,41,8],[45,14,41,12],[45,15,41,13,"rotation"],[45,23,41,21],[45,26,41,24,"Math"],[45,30,41,28],[45,31,41,29,"PI"],[45,33,41,31],[45,36,41,34],[45,37,41,35],[45,39,41,37],[46,8,42,6],[46,12,42,10],[46,13,42,11,"_rotation"],[46,22,42,20],[46,26,42,24,"Math"],[46,30,42,28],[46,31,42,29,"PI"],[46,33,42,31],[47,6,43,4],[47,7,43,5],[47,13,43,11],[47,17,43,15],[47,21,43,19],[47,22,43,20,"rotation"],[47,30,43,28],[47,33,43,31],[47,34,43,32,"Math"],[47,38,43,36],[47,39,43,37,"PI"],[47,41,43,39],[47,44,43,42],[47,45,43,43],[47,47,43,45],[48,8,44,6],[48,12,44,10],[48,13,44,11,"_rotation"],[48,22,44,20],[48,26,44,24,"Math"],[48,30,44,28],[48,31,44,29,"PI"],[48,33,44,31],[49,6,45,4],[50,4,46,2],[51,4,47,2,"finish"],[51,10,47,8,"finish"],[51,11,47,8],[51,13,47,11],[52,6,48,4],[52,10,48,8],[52,11,48,9],[52,15,48,13],[52,16,48,14,"isInProgress"],[52,28,48,26],[52,30,48,28],[53,8,49,6],[54,6,50,4],[55,6,51,4],[55,10,51,8],[55,11,51,9,"isInProgress"],[55,23,51,21],[55,26,51,24],[55,31,51,29],[56,6,52,4],[56,10,52,8],[56,11,52,9,"keyPointers"],[56,22,52,20],[56,25,52,23],[56,26,52,24,"NaN"],[56,29,52,27],[56,31,52,29,"NaN"],[56,34,52,32],[56,35,52,33],[57,6,53,4],[57,10,53,8],[57,11,53,9,"onRotationEnd"],[57,24,53,22],[57,25,53,23],[57,29,53,27],[57,30,53,28],[58,4,54,2],[59,4,55,2,"setKeyPointers"],[59,18,55,16,"setKeyPointers"],[59,19,55,17,"tracker"],[59,26,55,24],[59,28,55,26],[60,6,56,4],[60,10,56,8],[60,14,56,12],[60,15,56,13,"keyPointers"],[60,26,56,24],[60,27,56,25],[60,28,56,26],[60,29,56,27],[60,33,56,31],[60,37,56,35],[60,38,56,36,"keyPointers"],[60,49,56,47],[60,50,56,48],[60,51,56,49],[60,52,56,50],[60,54,56,52],[61,8,57,6],[62,6,58,4],[63,6,59,4],[63,12,59,10,"pointerIDs"],[63,22,59,20],[63,25,59,23,"tracker"],[63,32,59,30],[63,33,59,31,"trackedPointers"],[63,48,59,46],[63,49,59,47,"keys"],[63,53,59,51],[63,54,59,52],[63,55,59,53],[64,6,60,4],[64,10,60,8],[64,11,60,9,"keyPointers"],[64,22,60,20],[64,23,60,21],[64,24,60,22],[64,25,60,23],[64,28,60,26,"pointerIDs"],[64,38,60,36],[64,39,60,37,"next"],[64,43,60,41],[64,44,60,42],[64,45,60,43],[64,46,60,44,"value"],[64,51,60,49],[65,6,61,4],[65,10,61,8],[65,11,61,9,"keyPointers"],[65,22,61,20],[65,23,61,21],[65,24,61,22],[65,25,61,23],[65,28,61,26,"pointerIDs"],[65,38,61,36],[65,39,61,37,"next"],[65,43,61,41],[65,44,61,42],[65,45,61,43],[65,46,61,44,"value"],[65,51,61,49],[66,4,62,2],[67,4,63,2,"onTouchEvent"],[67,16,63,14,"onTouchEvent"],[67,17,63,15,"event"],[67,22,63,20],[67,24,63,22,"tracker"],[67,31,63,29],[67,33,63,31],[68,6,64,4],[68,14,64,12,"event"],[68,19,64,17],[68,20,64,18,"eventType"],[68,29,64,27],[69,8,65,6],[69,13,65,11,"EventTypes"],[69,39,65,11],[69,40,65,11,"EventTypes"],[69,67,65,21],[69,68,65,22,"DOWN"],[69,72,65,26],[70,10,66,8],[70,14,66,12],[70,15,66,13,"isInProgress"],[70,27,66,25],[70,30,66,28],[70,35,66,33],[71,10,67,8],[72,8,68,6],[72,13,68,11,"EventTypes"],[72,39,68,11],[72,40,68,11,"EventTypes"],[72,67,68,21],[72,68,68,22,"ADDITIONAL_POINTER_DOWN"],[72,91,68,45],[73,10,69,8],[73,14,69,12],[73,18,69,16],[73,19,69,17,"isInProgress"],[73,31,69,29],[73,33,69,31],[74,12,70,10],[75,10,71,8],[76,10,72,8],[76,14,72,12],[76,15,72,13,"isInProgress"],[76,27,72,25],[76,30,72,28],[76,34,72,32],[77,10,73,8],[77,14,73,12],[77,15,73,13,"previousTime"],[77,27,73,25],[77,30,73,28,"event"],[77,35,73,33],[77,36,73,34,"time"],[77,40,73,38],[78,10,74,8],[78,14,74,12],[78,15,74,13,"previousAngle"],[78,28,74,26],[78,31,74,29,"NaN"],[78,34,74,32],[79,10,75,8],[79,14,75,12],[79,15,75,13,"setKeyPointers"],[79,29,75,27],[79,30,75,28,"tracker"],[79,37,75,35],[79,38,75,36],[80,10,76,8],[80,14,76,12],[80,15,76,13,"updateCurrent"],[80,28,76,26],[80,29,76,27,"event"],[80,34,76,32],[80,36,76,34,"tracker"],[80,43,76,41],[80,44,76,42],[81,10,77,8],[81,14,77,12],[81,15,77,13,"onRotationBegin"],[81,30,77,28],[81,31,77,29],[81,35,77,33],[81,36,77,34],[82,10,78,8],[83,8,79,6],[83,13,79,11,"EventTypes"],[83,39,79,11],[83,40,79,11,"EventTypes"],[83,67,79,21],[83,68,79,22,"MOVE"],[83,72,79,26],[84,10,80,8],[84,14,80,12],[84,15,80,13],[84,19,80,17],[84,20,80,18,"isInProgress"],[84,32,80,30],[84,34,80,32],[85,12,81,10],[86,10,82,8],[87,10,83,8],[87,14,83,12],[87,15,83,13,"updateCurrent"],[87,28,83,26],[87,29,83,27,"event"],[87,34,83,32],[87,36,83,34,"tracker"],[87,43,83,41],[87,44,83,42],[88,10,84,8],[88,14,84,12],[88,15,84,13,"onRotation"],[88,25,84,23],[88,26,84,24],[88,30,84,28],[88,31,84,29],[89,10,85,8],[90,8,86,6],[90,13,86,11,"EventTypes"],[90,39,86,11],[90,40,86,11,"EventTypes"],[90,67,86,21],[90,68,86,22,"ADDITIONAL_POINTER_UP"],[90,89,86,43],[91,10,87,8],[91,14,87,12],[91,15,87,13],[91,19,87,17],[91,20,87,18,"isInProgress"],[91,32,87,30],[91,34,87,32],[92,12,88,10],[93,10,89,8],[94,10,90,8],[94,14,90,12],[94,18,90,16],[94,19,90,17,"keyPointers"],[94,30,90,28],[94,31,90,29,"indexOf"],[94,38,90,36],[94,39,90,37,"event"],[94,44,90,42],[94,45,90,43,"pointerId"],[94,54,90,52],[94,55,90,53],[94,59,90,57],[94,60,90,58],[94,62,90,60],[95,12,91,10],[95,16,91,14],[95,17,91,15,"finish"],[95,23,91,21],[95,24,91,22],[95,25,91,23],[96,10,92,8],[97,10,93,8],[98,8,94,6],[98,13,94,11,"EventTypes"],[98,39,94,11],[98,40,94,11,"EventTypes"],[98,67,94,21],[98,68,94,22,"UP"],[98,70,94,24],[99,10,95,8],[99,14,95,12],[99,18,95,16],[99,19,95,17,"isInProgress"],[99,31,95,29],[99,33,95,31],[100,12,96,10],[100,16,96,14],[100,17,96,15,"finish"],[100,23,96,21],[100,24,96,22],[100,25,96,23],[101,10,97,8],[102,10,98,8],[103,6,99,4],[104,6,100,4],[104,13,100,11],[104,17,100,15],[105,4,101,2],[106,4,102,2,"reset"],[106,9,102,7,"reset"],[106,10,102,7],[106,12,102,10],[107,6,103,4],[107,10,103,8],[107,11,103,9,"keyPointers"],[107,22,103,20],[107,25,103,23],[107,26,103,24,"NaN"],[107,29,103,27],[107,31,103,29,"NaN"],[107,34,103,32],[107,35,103,33],[108,6,104,4],[108,10,104,8],[108,11,104,9,"isInProgress"],[108,23,104,21],[108,26,104,24],[108,31,104,29],[109,4,105,2],[110,4,106,2],[110,8,106,6,"anchorX"],[110,15,106,13,"anchorX"],[110,16,106,13],[110,18,106,16],[111,6,107,4],[111,13,107,11],[111,17,107,15],[111,18,107,16,"_anchorX"],[111,26,107,24],[112,4,108,2],[113,4,109,2],[113,8,109,6,"anchorY"],[113,15,109,13,"anchorY"],[113,16,109,13],[113,18,109,16],[114,6,110,4],[114,13,110,11],[114,17,110,15],[114,18,110,16,"_anchorY"],[114,26,110,24],[115,4,111,2],[116,4,112,2],[116,8,112,6,"rotation"],[116,16,112,14,"rotation"],[116,17,112,14],[116,19,112,17],[117,6,113,4],[117,13,113,11],[117,17,113,15],[117,18,113,16,"_rotation"],[117,27,113,25],[118,4,114,2],[119,4,115,2],[119,8,115,6,"timeDelta"],[119,17,115,15,"timeDelta"],[119,18,115,15],[119,20,115,18],[120,6,116,4],[120,13,116,11],[120,17,116,15],[120,18,116,16,"currentTime"],[120,29,116,27],[120,32,116,30],[120,36,116,34],[120,37,116,35,"previousTime"],[120,49,116,47],[121,4,117,2],[122,2,118,0],[123,2,118,1,"exports"],[123,9,118,1],[123,10,118,1,"default"],[123,17,118,1],[123,20,118,1,"RotationGestureDetector"],[123,43,118,1],[124,0,118,1],[124,3]],"functionMap":{"names":["<global>","RotationGestureDetector","constructor","updateCurrent","finish","setKeyPointers","onTouchEvent","reset","get__anchorX","get__anchorY","get__rotation","get__timeDelta"],"mappings":"AAA;eCG;ECS;GDI;EEC;GF4B;EGC;GHO;EIC;GJO;EKC;GLsC;EMC;GNG;EOC;GPE;EQC;GRE;ESC;GTE;EUC;GVE;CDC"}},"type":"js/module"}]}