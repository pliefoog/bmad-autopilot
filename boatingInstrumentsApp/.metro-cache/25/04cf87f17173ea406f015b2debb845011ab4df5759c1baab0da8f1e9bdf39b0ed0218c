{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"kslwqCIsh6ew+I1KeA1rlVRjsAk=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/classCallCheck","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"yg7e6laZwmpbIvId5jovq9ugXp8=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/createClass","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"Z6pzkVZ2fvxBLkFTgVVOy4UDj30=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/callSuper","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"378KbBHdmndC3iMXZ2Ix8oB3LeE=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/inherits","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"y0uNg4LxF1CLscQChxzgo5dfjvA=","exportNames":["*"],"imports":1}},{"name":"react-native","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":15},"end":{"line":3,"column":52,"index":67}}],"key":"KyzuX10g6ixS9UfynhmjlvCIG3g=","exportNames":["*"],"imports":1}},{"name":"./Socket","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":110},"end":{"line":5,"column":30,"index":140}}],"key":"cfgE9Yw/a8X/959IwBnhH3A68To=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  'use strict';\n\n  var _interopRequireDefault = require(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\").default;\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.default = void 0;\n  var _classCallCheck2 = _interopRequireDefault(require(_dependencyMap[1], \"@babel/runtime/helpers/classCallCheck\"));\n  var _createClass2 = _interopRequireDefault(require(_dependencyMap[2], \"@babel/runtime/helpers/createClass\"));\n  var _callSuper2 = _interopRequireDefault(require(_dependencyMap[3], \"@babel/runtime/helpers/callSuper\"));\n  var _inherits2 = _interopRequireDefault(require(_dependencyMap[4], \"@babel/runtime/helpers/inherits\"));\n  var _reactNative = require(_dependencyMap[5], \"react-native\");\n  var _Socket2 = _interopRequireDefault(require(_dependencyMap[6], \"./Socket\"));\n  var Sockets = _reactNative.NativeModules.TcpSockets;\n  /**\n   * @typedef {object} TLSSocketOptions\n   * @property {any} [ca]\n   * @property {any} [key]\n   * @property {any} [cert]\n   * @property {string} [androidKeyStore]\n   * @property {string} [certAlias]\n   * @property {string} [keyAlias]\n   * @property {string[]} [resolvedKeys]\n   *\n   * @extends {Socket}\n   */\n  var TLSSocket = exports.default = /*#__PURE__*/function (_Socket) {\n    /**\n     * @param {Socket} socket Any instance of `Socket`.\n     * @param {TLSSocketOptions} [options] Options for the TLS socket.\n     */\n    function TLSSocket(socket) {\n      var _this;\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      (0, _classCallCheck2.default)(this, TLSSocket);\n      _this = (0, _callSuper2.default)(this, TLSSocket);\n      /** @private */\n      _this._options = {\n        ...options\n      };\n      TLSSocket.resolveAssetIfNeeded(_this._options, 'ca');\n      TLSSocket.resolveAssetIfNeeded(_this._options, 'key');\n      TLSSocket.resolveAssetIfNeeded(_this._options, 'cert');\n\n      /** @private */\n      _this._socket = socket;\n      // @ts-ignore\n      _this._setId(_this._socket._id);\n      _this._startTLS();\n      if (socket.pending || socket.connecting) socket.once('connect', () => _this._initialize());else _this._initialize();\n      return _this;\n    }\n\n    /**\n     * @private\n     */\n    (0, _inherits2.default)(TLSSocket, _Socket);\n    return (0, _createClass2.default)(TLSSocket, [{\n      key: \"_initialize\",\n      value: function _initialize() {\n        // Avoid calling twice destroy() if an error occurs\n        this._socket._errorListener?.remove();\n        this.on('error', error => this._socket.emit('error', error));\n        this._setConnected({\n          // @ts-ignore\n          localAddress: this._socket.localAddress,\n          // @ts-ignore\n          localPort: this._socket.localPort,\n          // @ts-ignore\n          remoteAddress: this._socket.remoteAddress,\n          // @ts-ignore\n          remotePort: this._socket.remotePort,\n          // @ts-ignore\n          remoteFamily: this._socket.remoteFamily\n        });\n      }\n\n      /**\n       * @private\n       */\n    }, {\n      key: \"_startTLS\",\n      value: function _startTLS() {\n        Sockets.startTLS(this._id, this._options);\n      }\n\n      /**\n       * Checks if a certificate identity exists in the keychain\n       * @param {object} options Object containing the identity aliases\n       * @param {string} [options.androidKeyStore] The android keystore type\n       * @param {string} [options.certAlias] The certificate alias\n       * @param {string} [options.keyAlias] The key alias\n       * @returns {Promise<boolean>} Promise resolving to true if identity exists\n       */\n    }, {\n      key: \"getCertificate\",\n      value: function getCertificate() {\n        return Sockets.getCertificate(this._id);\n      }\n    }, {\n      key: \"getPeerCertificate\",\n      value: function getPeerCertificate() {\n        return Sockets.getPeerCertificate(this._id);\n      }\n\n      /**\n       * @private\n       * Resolves the asset source if necessary and registers the resolved key.\n       * @param {TLSSocketOptions} options The options object containing the source to be resolved.\n       * @param {'ca' | 'key' | 'cert'} key The key name being resolved.\n       */\n    }], [{\n      key: \"hasIdentity\",\n      value: function hasIdentity() {\n        var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n        return Sockets.hasIdentity({\n          androidKeyStore: options.androidKeyStore,\n          certAlias: options.certAlias,\n          keyAlias: options.keyAlias\n        });\n      }\n    }, {\n      key: \"resolveAssetIfNeeded\",\n      value: function resolveAssetIfNeeded(options, key) {\n        var source = options[key];\n        if (source && typeof source !== 'string') {\n          if (!options.resolvedKeys) {\n            options.resolvedKeys = [];\n          }\n          options.resolvedKeys.push(key);\n          options[key] = _reactNative.Image.resolveAssetSource(source).uri;\n        }\n      }\n    }]);\n  }(_Socket2.default);\n});","lineCount":137,"map":[[2,2,1,0],[2,14,1,12],[4,2,1,13],[4,6,1,13,"_interopRequireDefault"],[4,28,1,13],[4,31,1,13,"require"],[4,38,1,13],[4,39,1,13,"_dependencyMap"],[4,53,1,13],[4,106,1,13,"default"],[4,113,1,13],[5,2,1,13,"Object"],[5,8,1,13],[5,9,1,13,"defineProperty"],[5,23,1,13],[5,24,1,13,"exports"],[5,31,1,13],[6,4,1,13,"value"],[6,9,1,13],[7,2,1,13],[8,2,1,13,"exports"],[8,9,1,13],[8,10,1,13,"default"],[8,17,1,13],[9,2,1,13],[9,6,1,13,"_classCallCheck2"],[9,22,1,13],[9,25,1,13,"_interopRequireDefault"],[9,47,1,13],[9,48,1,13,"require"],[9,55,1,13],[9,56,1,13,"_dependencyMap"],[9,70,1,13],[10,2,1,13],[10,6,1,13,"_createClass2"],[10,19,1,13],[10,22,1,13,"_interopRequireDefault"],[10,44,1,13],[10,45,1,13,"require"],[10,52,1,13],[10,53,1,13,"_dependencyMap"],[10,67,1,13],[11,2,1,13],[11,6,1,13,"_callSuper2"],[11,17,1,13],[11,20,1,13,"_interopRequireDefault"],[11,42,1,13],[11,43,1,13,"require"],[11,50,1,13],[11,51,1,13,"_dependencyMap"],[11,65,1,13],[12,2,1,13],[12,6,1,13,"_inherits2"],[12,16,1,13],[12,19,1,13,"_interopRequireDefault"],[12,41,1,13],[12,42,1,13,"require"],[12,49,1,13],[12,50,1,13,"_dependencyMap"],[12,64,1,13],[13,2,3,0],[13,6,3,0,"_reactNative"],[13,18,3,0],[13,21,3,0,"require"],[13,28,3,0],[13,29,3,0,"_dependencyMap"],[13,43,3,0],[14,2,5,0],[14,6,5,0,"_Socket2"],[14,14,5,0],[14,17,5,0,"_interopRequireDefault"],[14,39,5,0],[14,40,5,0,"require"],[14,47,5,0],[14,48,5,0,"_dependencyMap"],[14,62,5,0],[15,2,4,0],[15,6,4,6,"Sockets"],[15,13,4,13],[15,16,4,16,"NativeModules"],[15,42,4,29],[15,43,4,30,"TcpSockets"],[15,53,4,40],[16,2,7,0],[17,0,8,0],[18,0,9,0],[19,0,10,0],[20,0,11,0],[21,0,12,0],[22,0,13,0],[23,0,14,0],[24,0,15,0],[25,0,16,0],[26,0,17,0],[27,0,18,0],[28,2,7,0],[28,6,19,21,"TLSSocket"],[28,15,19,30],[28,18,19,30,"exports"],[28,25,19,30],[28,26,19,30,"default"],[28,33,19,30],[28,59,19,30,"_Socket"],[28,66,19,30],[29,4,20,4],[30,0,21,0],[31,0,22,0],[32,0,23,0],[33,4,24,4],[33,13,24,4,"TLSSocket"],[33,23,24,16,"socket"],[33,29,24,22],[33,31,24,38],[34,6,24,38],[34,10,24,38,"_this"],[34,15,24,38],[35,6,24,38],[35,10,24,24,"options"],[35,17,24,31],[35,20,24,31,"arguments"],[35,29,24,31],[35,30,24,31,"length"],[35,36,24,31],[35,44,24,31,"arguments"],[35,53,24,31],[35,61,24,31,"undefined"],[35,70,24,31],[35,73,24,31,"arguments"],[35,82,24,31],[35,88,24,34],[35,89,24,35],[35,90,24,36],[36,6,24,36],[36,10,24,36,"_classCallCheck2"],[36,26,24,36],[36,27,24,36,"default"],[36,34,24,36],[36,42,24,36,"TLSSocket"],[36,51,24,36],[37,6,25,8,"_this"],[37,11,25,8],[37,18,25,8,"_callSuper2"],[37,29,25,8],[37,30,25,8,"default"],[37,37,25,8],[37,45,25,8,"TLSSocket"],[37,54,25,8],[38,6,26,8],[39,6,27,8,"_this"],[39,11,27,8],[39,12,27,13,"_options"],[39,20,27,21],[39,23,27,24],[40,8,27,26],[40,11,27,29,"options"],[41,6,27,37],[41,7,27,38],[42,6,28,8,"TLSSocket"],[42,15,28,17],[42,16,28,18,"resolveAssetIfNeeded"],[42,36,28,38],[42,37,28,39,"_this"],[42,42,28,39],[42,43,28,44,"_options"],[42,51,28,52],[42,53,28,54],[42,57,28,58],[42,58,28,59],[43,6,29,8,"TLSSocket"],[43,15,29,17],[43,16,29,18,"resolveAssetIfNeeded"],[43,36,29,38],[43,37,29,39,"_this"],[43,42,29,39],[43,43,29,44,"_options"],[43,51,29,52],[43,53,29,54],[43,58,29,59],[43,59,29,60],[44,6,30,8,"TLSSocket"],[44,15,30,17],[44,16,30,18,"resolveAssetIfNeeded"],[44,36,30,38],[44,37,30,39,"_this"],[44,42,30,39],[44,43,30,44,"_options"],[44,51,30,52],[44,53,30,54],[44,59,30,60],[44,60,30,61],[46,6,32,8],[47,6,33,8,"_this"],[47,11,33,8],[47,12,33,13,"_socket"],[47,19,33,20],[47,22,33,23,"socket"],[47,28,33,29],[48,6,34,8],[49,6,35,8,"_this"],[49,11,35,8],[49,12,35,13,"_setId"],[49,18,35,19],[49,19,35,20,"_this"],[49,24,35,20],[49,25,35,25,"_socket"],[49,32,35,32],[49,33,35,33,"_id"],[49,36,35,36],[49,37,35,37],[50,6,36,8,"_this"],[50,11,36,8],[50,12,36,13,"_startTLS"],[50,21,36,22],[50,22,36,23],[50,23,36,24],[51,6,37,8],[51,10,37,12,"socket"],[51,16,37,18],[51,17,37,19,"pending"],[51,24,37,26],[51,28,37,30,"socket"],[51,34,37,36],[51,35,37,37,"connecting"],[51,45,37,47],[51,47,37,49,"socket"],[51,53,37,55],[51,54,37,56,"once"],[51,58,37,60],[51,59,37,61],[51,68,37,70],[51,70,37,72],[51,76,37,78,"_this"],[51,81,37,78],[51,82,37,83,"_initialize"],[51,93,37,94],[51,94,37,95],[51,95,37,96],[51,96,37,97],[51,97,37,98],[51,102,38,13,"_this"],[51,107,38,13],[51,108,38,18,"_initialize"],[51,119,38,29],[51,120,38,30],[51,121,38,31],[52,6,38,32],[52,13,38,32,"_this"],[52,18,38,32],[53,4,39,4],[55,4,41,4],[56,0,42,0],[57,0,43,0],[58,4,41,4],[58,8,41,4,"_inherits2"],[58,18,41,4],[58,19,41,4,"default"],[58,26,41,4],[58,28,41,4,"TLSSocket"],[58,37,41,4],[58,39,41,4,"_Socket"],[58,46,41,4],[59,4,41,4],[59,15,41,4,"_createClass2"],[59,28,41,4],[59,29,41,4,"default"],[59,36,41,4],[59,38,41,4,"TLSSocket"],[59,47,41,4],[60,6,41,4,"key"],[60,9,41,4],[61,6,41,4,"value"],[61,11,41,4],[61,13,44,4],[61,22,44,4,"_initialize"],[61,33,44,15,"_initialize"],[61,34,44,15],[61,36,44,18],[62,8,45,8],[63,8,46,8],[63,12,46,12],[63,13,46,13,"_socket"],[63,20,46,20],[63,21,46,21,"_errorListener"],[63,35,46,35],[63,37,46,37,"remove"],[63,43,46,43],[63,44,46,44],[63,45,46,45],[64,8,47,8],[64,12,47,12],[64,13,47,13,"on"],[64,15,47,15],[64,16,47,16],[64,23,47,23],[64,25,47,26,"error"],[64,30,47,31],[64,34,47,36],[64,38,47,40],[64,39,47,41,"_socket"],[64,46,47,48],[64,47,47,49,"emit"],[64,51,47,53],[64,52,47,54],[64,59,47,61],[64,61,47,63,"error"],[64,66,47,68],[64,67,47,69],[64,68,47,70],[65,8,48,8],[65,12,48,12],[65,13,48,13,"_setConnected"],[65,26,48,26],[65,27,48,27],[66,10,49,12],[67,10,50,12,"localAddress"],[67,22,50,24],[67,24,50,26],[67,28,50,30],[67,29,50,31,"_socket"],[67,36,50,38],[67,37,50,39,"localAddress"],[67,49,50,51],[68,10,51,12],[69,10,52,12,"localPort"],[69,19,52,21],[69,21,52,23],[69,25,52,27],[69,26,52,28,"_socket"],[69,33,52,35],[69,34,52,36,"localPort"],[69,43,52,45],[70,10,53,12],[71,10,54,12,"remoteAddress"],[71,23,54,25],[71,25,54,27],[71,29,54,31],[71,30,54,32,"_socket"],[71,37,54,39],[71,38,54,40,"remoteAddress"],[71,51,54,53],[72,10,55,12],[73,10,56,12,"remotePort"],[73,20,56,22],[73,22,56,24],[73,26,56,28],[73,27,56,29,"_socket"],[73,34,56,36],[73,35,56,37,"remotePort"],[73,45,56,47],[74,10,57,12],[75,10,58,12,"remoteFamily"],[75,22,58,24],[75,24,58,26],[75,28,58,30],[75,29,58,31,"_socket"],[75,36,58,38],[75,37,58,39,"remoteFamily"],[76,8,59,8],[76,9,59,9],[76,10,59,10],[77,6,60,4],[79,6,62,4],[80,0,63,0],[81,0,64,0],[82,4,62,4],[83,6,62,4,"key"],[83,9,62,4],[84,6,62,4,"value"],[84,11,62,4],[84,13,65,4],[84,22,65,4,"_startTLS"],[84,31,65,13,"_startTLS"],[84,32,65,13],[84,34,65,16],[85,8,66,8,"Sockets"],[85,15,66,15],[85,16,66,16,"startTLS"],[85,24,66,24],[85,25,66,25],[85,29,66,29],[85,30,66,30,"_id"],[85,33,66,33],[85,35,66,35],[85,39,66,39],[85,40,66,40,"_options"],[85,48,66,48],[85,49,66,49],[86,6,67,4],[88,6,69,4],[89,0,70,0],[90,0,71,0],[91,0,72,0],[92,0,73,0],[93,0,74,0],[94,0,75,0],[95,0,76,0],[96,4,69,4],[97,6,69,4,"key"],[97,9,69,4],[98,6,69,4,"value"],[98,11,69,4],[98,13,85,4],[98,22,85,4,"getCertificate"],[98,36,85,18,"getCertificate"],[98,37,85,18],[98,39,85,21],[99,8,86,8],[99,15,86,15,"Sockets"],[99,22,86,22],[99,23,86,23,"getCertificate"],[99,37,86,37],[99,38,86,38],[99,42,86,42],[99,43,86,43,"_id"],[99,46,86,46],[99,47,86,47],[100,6,87,4],[101,4,87,5],[102,6,87,5,"key"],[102,9,87,5],[103,6,87,5,"value"],[103,11,87,5],[103,13,89,4],[103,22,89,4,"getPeerCertificate"],[103,40,89,22,"getPeerCertificate"],[103,41,89,22],[103,43,89,25],[104,8,90,8],[104,15,90,15,"Sockets"],[104,22,90,22],[104,23,90,23,"getPeerCertificate"],[104,41,90,41],[104,42,90,42],[104,46,90,46],[104,47,90,47,"_id"],[104,50,90,50],[104,51,90,51],[105,6,91,4],[107,6,93,4],[108,0,94,0],[109,0,95,0],[110,0,96,0],[111,0,97,0],[112,0,98,0],[113,4,93,4],[114,6,93,4,"key"],[114,9,93,4],[115,6,93,4,"value"],[115,11,93,4],[115,13,77,4],[115,22,77,11,"hasIdentity"],[115,33,77,22,"hasIdentity"],[115,34,77,22],[115,36,77,37],[116,8,77,37],[116,12,77,23,"options"],[116,19,77,30],[116,22,77,30,"arguments"],[116,31,77,30],[116,32,77,30,"length"],[116,38,77,30],[116,46,77,30,"arguments"],[116,55,77,30],[116,63,77,30,"undefined"],[116,72,77,30],[116,75,77,30,"arguments"],[116,84,77,30],[116,90,77,33],[116,91,77,34],[116,92,77,35],[117,8,78,8],[117,15,78,15,"Sockets"],[117,22,78,22],[117,23,78,23,"hasIdentity"],[117,34,78,34],[117,35,78,35],[118,10,79,12,"androidKeyStore"],[118,25,79,27],[118,27,79,29,"options"],[118,34,79,36],[118,35,79,37,"androidKeyStore"],[118,50,79,52],[119,10,80,12,"certAlias"],[119,19,80,21],[119,21,80,23,"options"],[119,28,80,30],[119,29,80,31,"certAlias"],[119,38,80,40],[120,10,81,12,"keyAlias"],[120,18,81,20],[120,20,81,22,"options"],[120,27,81,29],[120,28,81,30,"keyAlias"],[121,8,82,8],[121,9,82,9],[121,10,82,10],[122,6,83,4],[123,4,83,5],[124,6,83,5,"key"],[124,9,83,5],[125,6,83,5,"value"],[125,11,83,5],[125,13,99,4],[125,22,99,11,"resolveAssetIfNeeded"],[125,42,99,31,"resolveAssetIfNeeded"],[125,43,99,32,"options"],[125,50,99,39],[125,52,99,41,"key"],[125,55,99,44],[125,57,99,46],[126,8,100,8],[126,12,100,14,"source"],[126,18,100,20],[126,21,100,23,"options"],[126,28,100,30],[126,29,100,31,"key"],[126,32,100,34],[126,33,100,35],[127,8,101,8],[127,12,101,12,"source"],[127,18,101,18],[127,22,101,22],[127,29,101,29,"source"],[127,35,101,35],[127,40,101,40],[127,48,101,48],[127,50,101,50],[128,10,102,12],[128,14,102,16],[128,15,102,17,"options"],[128,22,102,24],[128,23,102,25,"resolvedKeys"],[128,35,102,37],[128,37,102,39],[129,12,103,16,"options"],[129,19,103,23],[129,20,103,24,"resolvedKeys"],[129,32,103,36],[129,35,103,39],[129,37,103,41],[130,10,104,12],[131,10,105,12,"options"],[131,17,105,19],[131,18,105,20,"resolvedKeys"],[131,30,105,32],[131,31,105,33,"push"],[131,35,105,37],[131,36,105,38,"key"],[131,39,105,41],[131,40,105,42],[132,10,106,12,"options"],[132,17,106,19],[132,18,106,20,"key"],[132,21,106,23],[132,22,106,24],[132,25,106,27,"Image"],[132,43,106,32],[132,44,106,33,"resolveAssetSource"],[132,62,106,51],[132,63,106,52,"source"],[132,69,106,58],[132,70,106,59],[132,71,106,60,"uri"],[132,74,106,63],[133,8,107,8],[134,6,108,4],[135,4,108,5],[136,2,108,5],[136,4,19,39,"Socket"],[136,20,19,45],[137,0,19,45],[137,3]],"functionMap":{"names":["<global>","TLSSocket","constructor","socket.once$argument_1","_initialize","on$argument_1","_startTLS","hasIdentity","getCertificate","getPeerCertificate","resolveAssetIfNeeded"],"mappings":"AAA;eCkB;ICK;wECa,wBD;KDE;IGK;yBCG,4CD;KHa;IKK;KLE;IMU;KNM;IOE;KPE;IQE;KRE;ISQ;KTS;CDC"}},"type":"js/module"}]}