{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"kslwqCIsh6ew+I1KeA1rlVRjsAk=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/classCallCheck","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"yg7e6laZwmpbIvId5jovq9ugXp8=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/createClass","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"Z6pzkVZ2fvxBLkFTgVVOy4UDj30=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/callSuper","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"378KbBHdmndC3iMXZ2Ix8oB3LeE=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/superPropGet","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"b4Lel0pEiTM8mvZZX/d05uR+OmU=","exportNames":["*"],"imports":1}},{"name":"@babel/runtime/helpers/inherits","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"y0uNg4LxF1CLscQChxzgo5dfjvA=","exportNames":["*"],"imports":1}},{"name":"react-native","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":15},"end":{"line":3,"column":37,"index":52}}],"key":"KyzuX10g6ixS9UfynhmjlvCIG3g=","exportNames":["*"],"imports":1}},{"name":"./Server","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":53},"end":{"line":4,"column":30,"index":83}}],"key":"9sCYoHHemTc9PQk/ZqBB2lH9kmU=","exportNames":["*"],"imports":1}},{"name":"./TLSSocket","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":84},"end":{"line":5,"column":36,"index":120}}],"key":"j+SqCPeiy8nx9kYIyTVdQ4Gosfs=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  'use strict';\n\n  var _interopRequireDefault = require(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\").default;\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.default = void 0;\n  var _classCallCheck2 = _interopRequireDefault(require(_dependencyMap[1], \"@babel/runtime/helpers/classCallCheck\"));\n  var _createClass2 = _interopRequireDefault(require(_dependencyMap[2], \"@babel/runtime/helpers/createClass\"));\n  var _callSuper2 = _interopRequireDefault(require(_dependencyMap[3], \"@babel/runtime/helpers/callSuper\"));\n  var _superPropGet2 = _interopRequireDefault(require(_dependencyMap[4], \"@babel/runtime/helpers/superPropGet\"));\n  var _inherits2 = _interopRequireDefault(require(_dependencyMap[5], \"@babel/runtime/helpers/inherits\"));\n  var _reactNative = require(_dependencyMap[6], \"react-native\");\n  var _Server2 = _interopRequireDefault(require(_dependencyMap[7], \"./Server\"));\n  var _TLSSocket = _interopRequireDefault(require(_dependencyMap[8], \"./TLSSocket\"));\n  /**\n   * @typedef {object} TLSServerOptions\n   * @property {any} keystore\n   *\n   * @extends {Server}\n   */\n  var TLSServer = exports.default = /*#__PURE__*/function (_Server) {\n    /**\n     * @param {(socket: TLSSocket) => void} [secureConnectionListener] Automatically set as a listener for the `'secureConnection'` event.\n     */\n    function TLSServer(secureConnectionListener) {\n      var _this;\n      (0, _classCallCheck2.default)(this, TLSServer);\n      _this = (0, _callSuper2.default)(this, TLSServer);\n      if (secureConnectionListener) _this.on('secureConnection', secureConnectionListener);\n      _this._registerTLSEvents();\n      return _this;\n    }\n\n    /**\n     * @param {TLSServerOptions} options TLS server options\n     */\n    (0, _inherits2.default)(TLSServer, _Server);\n    return (0, _createClass2.default)(TLSServer, [{\n      key: \"setSecureContext\",\n      value: function setSecureContext(options) {\n        /** @private */\n        this._options = {\n          ...options\n        };\n        this._options.keystore = _reactNative.Image.resolveAssetSource(this._options.keystore).uri;\n      }\n\n      /**\n       * Start a server listening for connections.\n       *\n       * This function is asynchronous. When the server starts listening, the `'listening'` event will be emitted.\n       * The last parameter `callback` will be added as a listener for the `'listening'` event.\n       *\n       * The `server.listen()` method can be called again if and only if there was an error during the first\n       * `server.listen()` call or `server.close()` has been called. Otherwise, an `ERR_SERVER_ALREADY_LISTEN`\n       * error will be thrown.\n       *\n       * @param {{ port: number; host: string; reuseAddress?: boolean}} options\n       * @param {() => void} [callback]\n       * @override\n       */\n    }, {\n      key: \"listen\",\n      value: function listen(options, callback) {\n        var newOptions = {\n          ...options\n        };\n        // @ts-ignore\n        newOptions['tls'] = this._options;\n        return (0, _superPropGet2.default)(TLSServer, \"listen\", this, 3)([newOptions, callback]);\n      }\n\n      /**\n       * @private\n       */\n    }, {\n      key: \"_registerTLSEvents\",\n      value: function _registerTLSEvents() {\n        this._secureConnectionListener = this._eventEmitter.addListener('secureConnection', evt => {\n          if (evt.id !== this._id) return;\n          var standardSocket = this._buildSocket(evt.info);\n          standardSocket._unregisterEvents();\n          var tlsSocket = new _TLSSocket.default(standardSocket);\n          this._addConnection(tlsSocket);\n          this.emit('connection', standardSocket);\n          this.emit('secureConnection', tlsSocket);\n        });\n      }\n    }]);\n  }(_Server2.default);\n});","lineCount":93,"map":[[2,2,1,0],[2,14,1,12],[4,2,1,13],[4,6,1,13,"_interopRequireDefault"],[4,28,1,13],[4,31,1,13,"require"],[4,38,1,13],[4,39,1,13,"_dependencyMap"],[4,53,1,13],[4,106,1,13,"default"],[4,113,1,13],[5,2,1,13,"Object"],[5,8,1,13],[5,9,1,13,"defineProperty"],[5,23,1,13],[5,24,1,13,"exports"],[5,31,1,13],[6,4,1,13,"value"],[6,9,1,13],[7,2,1,13],[8,2,1,13,"exports"],[8,9,1,13],[8,10,1,13,"default"],[8,17,1,13],[9,2,1,13],[9,6,1,13,"_classCallCheck2"],[9,22,1,13],[9,25,1,13,"_interopRequireDefault"],[9,47,1,13],[9,48,1,13,"require"],[9,55,1,13],[9,56,1,13,"_dependencyMap"],[9,70,1,13],[10,2,1,13],[10,6,1,13,"_createClass2"],[10,19,1,13],[10,22,1,13,"_interopRequireDefault"],[10,44,1,13],[10,45,1,13,"require"],[10,52,1,13],[10,53,1,13,"_dependencyMap"],[10,67,1,13],[11,2,1,13],[11,6,1,13,"_callSuper2"],[11,17,1,13],[11,20,1,13,"_interopRequireDefault"],[11,42,1,13],[11,43,1,13,"require"],[11,50,1,13],[11,51,1,13,"_dependencyMap"],[11,65,1,13],[12,2,1,13],[12,6,1,13,"_superPropGet2"],[12,20,1,13],[12,23,1,13,"_interopRequireDefault"],[12,45,1,13],[12,46,1,13,"require"],[12,53,1,13],[12,54,1,13,"_dependencyMap"],[12,68,1,13],[13,2,1,13],[13,6,1,13,"_inherits2"],[13,16,1,13],[13,19,1,13,"_interopRequireDefault"],[13,41,1,13],[13,42,1,13,"require"],[13,49,1,13],[13,50,1,13,"_dependencyMap"],[13,64,1,13],[14,2,3,0],[14,6,3,0,"_reactNative"],[14,18,3,0],[14,21,3,0,"require"],[14,28,3,0],[14,29,3,0,"_dependencyMap"],[14,43,3,0],[15,2,4,0],[15,6,4,0,"_Server2"],[15,14,4,0],[15,17,4,0,"_interopRequireDefault"],[15,39,4,0],[15,40,4,0,"require"],[15,47,4,0],[15,48,4,0,"_dependencyMap"],[15,62,4,0],[16,2,5,0],[16,6,5,0,"_TLSSocket"],[16,16,5,0],[16,19,5,0,"_interopRequireDefault"],[16,41,5,0],[16,42,5,0,"require"],[16,49,5,0],[16,50,5,0,"_dependencyMap"],[16,64,5,0],[17,2,7,0],[18,0,8,0],[19,0,9,0],[20,0,10,0],[21,0,11,0],[22,0,12,0],[23,2,7,0],[23,6,13,21,"TLSServer"],[23,15,13,30],[23,18,13,30,"exports"],[23,25,13,30],[23,26,13,30,"default"],[23,33,13,30],[23,59,13,30,"_Server"],[23,66,13,30],[24,4,14,4],[25,0,15,0],[26,0,16,0],[27,4,17,4],[27,13,17,4,"TLSServer"],[27,23,17,16,"secureConnectionListener"],[27,47,17,40],[27,49,17,42],[28,6,17,42],[28,10,17,42,"_this"],[28,15,17,42],[29,6,17,42],[29,10,17,42,"_classCallCheck2"],[29,26,17,42],[29,27,17,42,"default"],[29,34,17,42],[29,42,17,42,"TLSServer"],[29,51,17,42],[30,6,18,8,"_this"],[30,11,18,8],[30,18,18,8,"_callSuper2"],[30,29,18,8],[30,30,18,8,"default"],[30,37,18,8],[30,45,18,8,"TLSServer"],[30,54,18,8],[31,6,19,8],[31,10,19,12,"secureConnectionListener"],[31,34,19,36],[31,36,19,38,"_this"],[31,41,19,38],[31,42,19,43,"on"],[31,44,19,45],[31,45,19,46],[31,63,19,64],[31,65,19,66,"secureConnectionListener"],[31,89,19,90],[31,90,19,91],[32,6,20,8,"_this"],[32,11,20,8],[32,12,20,13,"_registerTLSEvents"],[32,30,20,31],[32,31,20,32],[32,32,20,33],[33,6,20,34],[33,13,20,34,"_this"],[33,18,20,34],[34,4,21,4],[36,4,23,4],[37,0,24,0],[38,0,25,0],[39,4,23,4],[39,8,23,4,"_inherits2"],[39,18,23,4],[39,19,23,4,"default"],[39,26,23,4],[39,28,23,4,"TLSServer"],[39,37,23,4],[39,39,23,4,"_Server"],[39,46,23,4],[40,4,23,4],[40,15,23,4,"_createClass2"],[40,28,23,4],[40,29,23,4,"default"],[40,36,23,4],[40,38,23,4,"TLSServer"],[40,47,23,4],[41,6,23,4,"key"],[41,9,23,4],[42,6,23,4,"value"],[42,11,23,4],[42,13,26,4],[42,22,26,4,"setSecureContext"],[42,38,26,20,"setSecureContext"],[42,39,26,21,"options"],[42,46,26,28],[42,48,26,30],[43,8,27,8],[44,8,28,8],[44,12,28,12],[44,13,28,13,"_options"],[44,21,28,21],[44,24,28,24],[45,10,28,26],[45,13,28,29,"options"],[46,8,28,37],[46,9,28,38],[47,8,29,8],[47,12,29,12],[47,13,29,13,"_options"],[47,21,29,21],[47,22,29,22,"keystore"],[47,30,29,30],[47,33,29,33,"Image"],[47,51,29,38],[47,52,29,39,"resolveAssetSource"],[47,70,29,57],[47,71,29,58],[47,75,29,62],[47,76,29,63,"_options"],[47,84,29,71],[47,85,29,72,"keystore"],[47,93,29,80],[47,94,29,81],[47,95,29,82,"uri"],[47,98,29,85],[48,6,30,4],[50,6,32,4],[51,0,33,0],[52,0,34,0],[53,0,35,0],[54,0,36,0],[55,0,37,0],[56,0,38,0],[57,0,39,0],[58,0,40,0],[59,0,41,0],[60,0,42,0],[61,0,43,0],[62,0,44,0],[63,0,45,0],[64,4,32,4],[65,6,32,4,"key"],[65,9,32,4],[66,6,32,4,"value"],[66,11,32,4],[66,13,46,4],[66,22,46,4,"listen"],[66,28,46,10,"listen"],[66,29,46,11,"options"],[66,36,46,18],[66,38,46,20,"callback"],[66,46,46,28],[66,48,46,30],[67,8,47,8],[67,12,47,14,"newOptions"],[67,22,47,24],[67,25,47,27],[68,10,47,29],[68,13,47,32,"options"],[69,8,47,40],[69,9,47,41],[70,8,48,8],[71,8,49,8,"newOptions"],[71,18,49,18],[71,19,49,19],[71,24,49,24],[71,25,49,25],[71,28,49,28],[71,32,49,32],[71,33,49,33,"_options"],[71,41,49,41],[72,8,50,8],[72,19,50,8,"_superPropGet2"],[72,33,50,8],[72,34,50,8,"default"],[72,41,50,8],[72,43,50,8,"TLSServer"],[72,52,50,8],[72,74,50,28,"newOptions"],[72,84,50,38],[72,86,50,40,"callback"],[72,94,50,48],[73,6,51,4],[75,6,53,4],[76,0,54,0],[77,0,55,0],[78,4,53,4],[79,6,53,4,"key"],[79,9,53,4],[80,6,53,4,"value"],[80,11,53,4],[80,13,56,4],[80,22,56,4,"_registerTLSEvents"],[80,40,56,22,"_registerTLSEvents"],[80,41,56,22],[80,43,56,25],[81,8,57,8],[81,12,57,12],[81,13,57,13,"_secureConnectionListener"],[81,38,57,38],[81,41,57,41],[81,45,57,45],[81,46,57,46,"_eventEmitter"],[81,59,57,59],[81,60,57,60,"addListener"],[81,71,57,71],[81,72,58,12],[81,90,58,30],[81,92,59,13,"evt"],[81,95,59,16],[81,99,59,21],[82,10,60,16],[82,14,60,20,"evt"],[82,17,60,23],[82,18,60,24,"id"],[82,20,60,26],[82,25,60,31],[82,29,60,35],[82,30,60,36,"_id"],[82,33,60,39],[82,35,60,41],[83,10,61,16],[83,14,61,22,"standardSocket"],[83,28,61,36],[83,31,61,39],[83,35,61,43],[83,36,61,44,"_buildSocket"],[83,48,61,56],[83,49,61,57,"evt"],[83,52,61,60],[83,53,61,61,"info"],[83,57,61,65],[83,58,61,66],[84,10,62,16,"standardSocket"],[84,24,62,30],[84,25,62,31,"_unregisterEvents"],[84,42,62,48],[84,43,62,49],[84,44,62,50],[85,10,63,16],[85,14,63,22,"tlsSocket"],[85,23,63,31],[85,26,63,34],[85,30,63,38,"TLSSocket"],[85,48,63,47],[85,49,63,48,"standardSocket"],[85,63,63,62],[85,64,63,63],[86,10,64,16],[86,14,64,20],[86,15,64,21,"_addConnection"],[86,29,64,35],[86,30,64,36,"tlsSocket"],[86,39,64,45],[86,40,64,46],[87,10,65,16],[87,14,65,20],[87,15,65,21,"emit"],[87,19,65,25],[87,20,65,26],[87,32,65,38],[87,34,65,40,"standardSocket"],[87,48,65,54],[87,49,65,55],[88,10,66,16],[88,14,66,20],[88,15,66,21,"emit"],[88,19,66,25],[88,20,66,26],[88,38,66,44],[88,40,66,46,"tlsSocket"],[88,49,66,55],[88,50,66,56],[89,8,67,12],[89,9,68,8],[89,10,68,9],[90,6,69,4],[91,4,69,5],[92,2,69,5],[92,4,13,39,"Server"],[92,20,13,45],[93,0,13,45],[93,3]],"functionMap":{"names":["<global>","TLSServer","constructor","setSecureContext","listen","_registerTLSEvents","_eventEmitter.addListener$argument_1"],"mappings":"AAA;eCY;ICI;KDI;IEK;KFI;IGgB;KHK;IIK;YCG;aDQ;KJE;CDC"}},"type":"js/module"}]}