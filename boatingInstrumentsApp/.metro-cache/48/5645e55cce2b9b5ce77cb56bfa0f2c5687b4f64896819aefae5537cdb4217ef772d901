{"dependencies":[{"name":"../constants","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":15},"end":{"line":3,"column":50,"index":65}}],"key":"eTOOXVNPpMK2U8dOAmBWjbEJ4yE=","exportNames":["*"],"imports":1}},{"name":"../interfaces","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":66},"end":{"line":4,"column":43,"index":109}},{"start":{"line":4,"column":0,"index":66},"end":{"line":4,"column":43,"index":109}},{"start":{"line":4,"column":0,"index":66},"end":{"line":4,"column":43,"index":109}},{"start":{"line":4,"column":0,"index":66},"end":{"line":4,"column":43,"index":109}},{"start":{"line":4,"column":0,"index":66},"end":{"line":4,"column":43,"index":109}},{"start":{"line":4,"column":0,"index":66},"end":{"line":4,"column":43,"index":109}},{"start":{"line":4,"column":0,"index":66},"end":{"line":4,"column":43,"index":109}},{"start":{"line":4,"column":0,"index":66},"end":{"line":4,"column":43,"index":109}},{"start":{"line":4,"column":0,"index":66},"end":{"line":4,"column":43,"index":109}}],"key":"GMKh3a5g5xNaAog15vl07v6pG2U=","exportNames":["*"],"imports":9}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.default = void 0;\n  class ScaleGestureDetector {\n    inProgress = false;\n    constructor(callbacks) {\n      this.onScaleBegin = callbacks.onScaleBegin;\n      this.onScale = callbacks.onScale;\n      this.onScaleEnd = callbacks.onScaleEnd;\n      this.spanSlop = require(_dependencyMap[0], \"../constants\").DEFAULT_TOUCH_SLOP * 2;\n      this.minSpan = 0;\n    }\n    onTouchEvent(event, tracker) {\n      this.currentTime = event.time;\n      const action = event.eventType;\n      const numOfPointers = tracker.trackedPointersCount;\n      const streamComplete = action === require(_dependencyMap[1], \"../interfaces\").EventTypes.UP || action === require(_dependencyMap[1], \"../interfaces\").EventTypes.ADDITIONAL_POINTER_UP || action === require(_dependencyMap[1], \"../interfaces\").EventTypes.CANCEL;\n      if (action === require(_dependencyMap[1], \"../interfaces\").EventTypes.DOWN || streamComplete) {\n        if (this.inProgress) {\n          this.onScaleEnd(this);\n          this.inProgress = false;\n          this.initialSpan = 0;\n        }\n        if (streamComplete) {\n          return true;\n        }\n      }\n      const configChanged = action === require(_dependencyMap[1], \"../interfaces\").EventTypes.DOWN || action === require(_dependencyMap[1], \"../interfaces\").EventTypes.ADDITIONAL_POINTER_UP || action === require(_dependencyMap[1], \"../interfaces\").EventTypes.ADDITIONAL_POINTER_DOWN;\n      const pointerUp = action === require(_dependencyMap[1], \"../interfaces\").EventTypes.ADDITIONAL_POINTER_UP;\n      const ignoredPointer = pointerUp ? event.pointerId : undefined;\n\n      // Determine focal point\n\n      const div = pointerUp ? numOfPointers - 1 : numOfPointers;\n      const coordsSum = tracker.getAbsoluteCoordsSum();\n      const focusX = coordsSum.x / div;\n      const focusY = coordsSum.y / div;\n\n      // Determine average deviation from focal point\n\n      let devSumX = 0;\n      let devSumY = 0;\n      tracker.trackedPointers.forEach((value, key) => {\n        if (key === ignoredPointer) {\n          return;\n        }\n        devSumX += Math.abs(value.abosoluteCoords.x - focusX);\n        devSumY += Math.abs(value.abosoluteCoords.y - focusY);\n      });\n      const devX = devSumX / div;\n      const devY = devSumY / div;\n      const spanX = devX * 2;\n      const spanY = devY * 2;\n      const span = Math.hypot(spanX, spanY);\n\n      // Begin/end events\n      const wasInProgress = this.inProgress;\n      this._focusX = focusX;\n      this._focusY = focusY;\n      if (this.inProgress && (span < this.minSpan || configChanged)) {\n        this.onScaleEnd(this);\n        this.inProgress = false;\n        this.initialSpan = span;\n      }\n      if (configChanged) {\n        this.initialSpan = this.prevSpan = this._currentSpan = span;\n      }\n      if (!this.inProgress && span >= this.minSpan && (wasInProgress || Math.abs(span - this.initialSpan) > this.spanSlop)) {\n        this.prevSpan = this._currentSpan = span;\n        this.prevTime = this.currentTime;\n        this.inProgress = this.onScaleBegin(this);\n      }\n\n      // Handle motion\n      if (action !== require(_dependencyMap[1], \"../interfaces\").EventTypes.MOVE) {\n        return true;\n      }\n      this._currentSpan = span;\n      if (this.inProgress && !this.onScale(this)) {\n        return true;\n      }\n      this.prevSpan = this.currentSpan;\n      this.prevTime = this.currentTime;\n      return true;\n    }\n    calculateScaleFactor(numOfPointers) {\n      if (numOfPointers < 2) {\n        return 1;\n      }\n      return this.prevSpan > 0 ? this.currentSpan / this.prevSpan : 1;\n    }\n    get currentSpan() {\n      return this._currentSpan;\n    }\n    get focusX() {\n      return this._focusX;\n    }\n    get focusY() {\n      return this._focusY;\n    }\n    get timeDelta() {\n      return this.currentTime - this.prevTime;\n    }\n  }\n  exports.default = ScaleGestureDetector;\n});","lineCount":110,"map":[[2,2,1,0],[2,14,1,12],[4,2,1,13,"Object"],[4,8,1,13],[4,9,1,13,"defineProperty"],[4,23,1,13],[4,24,1,13,"exports"],[4,31,1,13],[5,4,1,13,"value"],[5,9,1,13],[6,2,1,13],[7,2,1,13,"exports"],[7,9,1,13],[7,10,1,13,"default"],[7,17,1,13],[8,2,5,15],[8,8,5,21,"ScaleGestureDetector"],[8,28,5,41],[8,29,5,42],[9,4,6,2,"inProgress"],[9,14,6,12],[9,17,6,15],[9,22,6,20],[10,4,7,2,"constructor"],[10,15,7,13,"constructor"],[10,16,7,14,"callbacks"],[10,25,7,23],[10,27,7,25],[11,6,8,4],[11,10,8,8],[11,11,8,9,"onScaleBegin"],[11,23,8,21],[11,26,8,24,"callbacks"],[11,35,8,33],[11,36,8,34,"onScaleBegin"],[11,48,8,46],[12,6,9,4],[12,10,9,8],[12,11,9,9,"onScale"],[12,18,9,16],[12,21,9,19,"callbacks"],[12,30,9,28],[12,31,9,29,"onScale"],[12,38,9,36],[13,6,10,4],[13,10,10,8],[13,11,10,9,"onScaleEnd"],[13,21,10,19],[13,24,10,22,"callbacks"],[13,33,10,31],[13,34,10,32,"onScaleEnd"],[13,44,10,42],[14,6,11,4],[14,10,11,8],[14,11,11,9,"spanSlop"],[14,19,11,17],[14,22,11,20,"DEFAULT_TOUCH_SLOP"],[14,48,11,20],[14,49,11,20,"DEFAULT_TOUCH_SLOP"],[14,83,11,38],[14,86,11,41],[14,87,11,42],[15,6,12,4],[15,10,12,8],[15,11,12,9,"minSpan"],[15,18,12,16],[15,21,12,19],[15,22,12,20],[16,4,13,2],[17,4,14,2,"onTouchEvent"],[17,16,14,14,"onTouchEvent"],[17,17,14,15,"event"],[17,22,14,20],[17,24,14,22,"tracker"],[17,31,14,29],[17,33,14,31],[18,6,15,4],[18,10,15,8],[18,11,15,9,"currentTime"],[18,22,15,20],[18,25,15,23,"event"],[18,30,15,28],[18,31,15,29,"time"],[18,35,15,33],[19,6,16,4],[19,12,16,10,"action"],[19,18,16,16],[19,21,16,19,"event"],[19,26,16,24],[19,27,16,25,"eventType"],[19,36,16,34],[20,6,17,4],[20,12,17,10,"numOfPointers"],[20,25,17,23],[20,28,17,26,"tracker"],[20,35,17,33],[20,36,17,34,"trackedPointersCount"],[20,56,17,54],[21,6,18,4],[21,12,18,10,"streamComplete"],[21,26,18,24],[21,29,18,27,"action"],[21,35,18,33],[21,40,18,38,"EventTypes"],[21,66,18,38],[21,67,18,38,"EventTypes"],[21,94,18,48],[21,95,18,49,"UP"],[21,97,18,51],[21,101,18,55,"action"],[21,107,18,61],[21,112,18,66,"EventTypes"],[21,138,18,66],[21,139,18,66,"EventTypes"],[21,166,18,76],[21,167,18,77,"ADDITIONAL_POINTER_UP"],[21,188,18,98],[21,192,18,102,"action"],[21,198,18,108],[21,203,18,113,"EventTypes"],[21,229,18,113],[21,230,18,113,"EventTypes"],[21,257,18,123],[21,258,18,124,"CANCEL"],[21,264,18,130],[22,6,19,4],[22,10,19,8,"action"],[22,16,19,14],[22,21,19,19,"EventTypes"],[22,47,19,19],[22,48,19,19,"EventTypes"],[22,75,19,29],[22,76,19,30,"DOWN"],[22,80,19,34],[22,84,19,38,"streamComplete"],[22,98,19,52],[22,100,19,54],[23,8,20,6],[23,12,20,10],[23,16,20,14],[23,17,20,15,"inProgress"],[23,27,20,25],[23,29,20,27],[24,10,21,8],[24,14,21,12],[24,15,21,13,"onScaleEnd"],[24,25,21,23],[24,26,21,24],[24,30,21,28],[24,31,21,29],[25,10,22,8],[25,14,22,12],[25,15,22,13,"inProgress"],[25,25,22,23],[25,28,22,26],[25,33,22,31],[26,10,23,8],[26,14,23,12],[26,15,23,13,"initialSpan"],[26,26,23,24],[26,29,23,27],[26,30,23,28],[27,8,24,6],[28,8,25,6],[28,12,25,10,"streamComplete"],[28,26,25,24],[28,28,25,26],[29,10,26,8],[29,17,26,15],[29,21,26,19],[30,8,27,6],[31,6,28,4],[32,6,29,4],[32,12,29,10,"configChanged"],[32,25,29,23],[32,28,29,26,"action"],[32,34,29,32],[32,39,29,37,"EventTypes"],[32,65,29,37],[32,66,29,37,"EventTypes"],[32,93,29,47],[32,94,29,48,"DOWN"],[32,98,29,52],[32,102,29,56,"action"],[32,108,29,62],[32,113,29,67,"EventTypes"],[32,139,29,67],[32,140,29,67,"EventTypes"],[32,167,29,77],[32,168,29,78,"ADDITIONAL_POINTER_UP"],[32,189,29,99],[32,193,29,103,"action"],[32,199,29,109],[32,204,29,114,"EventTypes"],[32,230,29,114],[32,231,29,114,"EventTypes"],[32,258,29,124],[32,259,29,125,"ADDITIONAL_POINTER_DOWN"],[32,282,29,148],[33,6,30,4],[33,12,30,10,"pointerUp"],[33,21,30,19],[33,24,30,22,"action"],[33,30,30,28],[33,35,30,33,"EventTypes"],[33,61,30,33],[33,62,30,33,"EventTypes"],[33,89,30,43],[33,90,30,44,"ADDITIONAL_POINTER_UP"],[33,111,30,65],[34,6,31,4],[34,12,31,10,"ignoredPointer"],[34,26,31,24],[34,29,31,27,"pointerUp"],[34,38,31,36],[34,41,31,39,"event"],[34,46,31,44],[34,47,31,45,"pointerId"],[34,56,31,54],[34,59,31,57,"undefined"],[34,68,31,66],[36,6,33,4],[38,6,35,4],[38,12,35,10,"div"],[38,15,35,13],[38,18,35,16,"pointerUp"],[38,27,35,25],[38,30,35,28,"numOfPointers"],[38,43,35,41],[38,46,35,44],[38,47,35,45],[38,50,35,48,"numOfPointers"],[38,63,35,61],[39,6,36,4],[39,12,36,10,"coordsSum"],[39,21,36,19],[39,24,36,22,"tracker"],[39,31,36,29],[39,32,36,30,"getAbsoluteCoordsSum"],[39,52,36,50],[39,53,36,51],[39,54,36,52],[40,6,37,4],[40,12,37,10,"focusX"],[40,18,37,16],[40,21,37,19,"coordsSum"],[40,30,37,28],[40,31,37,29,"x"],[40,32,37,30],[40,35,37,33,"div"],[40,38,37,36],[41,6,38,4],[41,12,38,10,"focusY"],[41,18,38,16],[41,21,38,19,"coordsSum"],[41,30,38,28],[41,31,38,29,"y"],[41,32,38,30],[41,35,38,33,"div"],[41,38,38,36],[43,6,40,4],[45,6,42,4],[45,10,42,8,"devSumX"],[45,17,42,15],[45,20,42,18],[45,21,42,19],[46,6,43,4],[46,10,43,8,"devSumY"],[46,17,43,15],[46,20,43,18],[46,21,43,19],[47,6,44,4,"tracker"],[47,13,44,11],[47,14,44,12,"trackedPointers"],[47,29,44,27],[47,30,44,28,"forEach"],[47,37,44,35],[47,38,44,36],[47,39,44,37,"value"],[47,44,44,42],[47,46,44,44,"key"],[47,49,44,47],[47,54,44,52],[48,8,45,6],[48,12,45,10,"key"],[48,15,45,13],[48,20,45,18,"ignoredPointer"],[48,34,45,32],[48,36,45,34],[49,10,46,8],[50,8,47,6],[51,8,48,6,"devSumX"],[51,15,48,13],[51,19,48,17,"Math"],[51,23,48,21],[51,24,48,22,"abs"],[51,27,48,25],[51,28,48,26,"value"],[51,33,48,31],[51,34,48,32,"abosoluteCoords"],[51,49,48,47],[51,50,48,48,"x"],[51,51,48,49],[51,54,48,52,"focusX"],[51,60,48,58],[51,61,48,59],[52,8,49,6,"devSumY"],[52,15,49,13],[52,19,49,17,"Math"],[52,23,49,21],[52,24,49,22,"abs"],[52,27,49,25],[52,28,49,26,"value"],[52,33,49,31],[52,34,49,32,"abosoluteCoords"],[52,49,49,47],[52,50,49,48,"y"],[52,51,49,49],[52,54,49,52,"focusY"],[52,60,49,58],[52,61,49,59],[53,6,50,4],[53,7,50,5],[53,8,50,6],[54,6,51,4],[54,12,51,10,"devX"],[54,16,51,14],[54,19,51,17,"devSumX"],[54,26,51,24],[54,29,51,27,"div"],[54,32,51,30],[55,6,52,4],[55,12,52,10,"devY"],[55,16,52,14],[55,19,52,17,"devSumY"],[55,26,52,24],[55,29,52,27,"div"],[55,32,52,30],[56,6,53,4],[56,12,53,10,"spanX"],[56,17,53,15],[56,20,53,18,"devX"],[56,24,53,22],[56,27,53,25],[56,28,53,26],[57,6,54,4],[57,12,54,10,"spanY"],[57,17,54,15],[57,20,54,18,"devY"],[57,24,54,22],[57,27,54,25],[57,28,54,26],[58,6,55,4],[58,12,55,10,"span"],[58,16,55,14],[58,19,55,17,"Math"],[58,23,55,21],[58,24,55,22,"hypot"],[58,29,55,27],[58,30,55,28,"spanX"],[58,35,55,33],[58,37,55,35,"spanY"],[58,42,55,40],[58,43,55,41],[60,6,57,4],[61,6,58,4],[61,12,58,10,"wasInProgress"],[61,25,58,23],[61,28,58,26],[61,32,58,30],[61,33,58,31,"inProgress"],[61,43,58,41],[62,6,59,4],[62,10,59,8],[62,11,59,9,"_focusX"],[62,18,59,16],[62,21,59,19,"focusX"],[62,27,59,25],[63,6,60,4],[63,10,60,8],[63,11,60,9,"_focusY"],[63,18,60,16],[63,21,60,19,"focusY"],[63,27,60,25],[64,6,61,4],[64,10,61,8],[64,14,61,12],[64,15,61,13,"inProgress"],[64,25,61,23],[64,30,61,28,"span"],[64,34,61,32],[64,37,61,35],[64,41,61,39],[64,42,61,40,"minSpan"],[64,49,61,47],[64,53,61,51,"configChanged"],[64,66,61,64],[64,67,61,65],[64,69,61,67],[65,8,62,6],[65,12,62,10],[65,13,62,11,"onScaleEnd"],[65,23,62,21],[65,24,62,22],[65,28,62,26],[65,29,62,27],[66,8,63,6],[66,12,63,10],[66,13,63,11,"inProgress"],[66,23,63,21],[66,26,63,24],[66,31,63,29],[67,8,64,6],[67,12,64,10],[67,13,64,11,"initialSpan"],[67,24,64,22],[67,27,64,25,"span"],[67,31,64,29],[68,6,65,4],[69,6,66,4],[69,10,66,8,"configChanged"],[69,23,66,21],[69,25,66,23],[70,8,67,6],[70,12,67,10],[70,13,67,11,"initialSpan"],[70,24,67,22],[70,27,67,25],[70,31,67,29],[70,32,67,30,"prevSpan"],[70,40,67,38],[70,43,67,41],[70,47,67,45],[70,48,67,46,"_currentSpan"],[70,60,67,58],[70,63,67,61,"span"],[70,67,67,65],[71,6,68,4],[72,6,69,4],[72,10,69,8],[72,11,69,9],[72,15,69,13],[72,16,69,14,"inProgress"],[72,26,69,24],[72,30,69,28,"span"],[72,34,69,32],[72,38,69,36],[72,42,69,40],[72,43,69,41,"minSpan"],[72,50,69,48],[72,55,69,53,"wasInProgress"],[72,68,69,66],[72,72,69,70,"Math"],[72,76,69,74],[72,77,69,75,"abs"],[72,80,69,78],[72,81,69,79,"span"],[72,85,69,83],[72,88,69,86],[72,92,69,90],[72,93,69,91,"initialSpan"],[72,104,69,102],[72,105,69,103],[72,108,69,106],[72,112,69,110],[72,113,69,111,"spanSlop"],[72,121,69,119],[72,122,69,120],[72,124,69,122],[73,8,70,6],[73,12,70,10],[73,13,70,11,"prevSpan"],[73,21,70,19],[73,24,70,22],[73,28,70,26],[73,29,70,27,"_currentSpan"],[73,41,70,39],[73,44,70,42,"span"],[73,48,70,46],[74,8,71,6],[74,12,71,10],[74,13,71,11,"prevTime"],[74,21,71,19],[74,24,71,22],[74,28,71,26],[74,29,71,27,"currentTime"],[74,40,71,38],[75,8,72,6],[75,12,72,10],[75,13,72,11,"inProgress"],[75,23,72,21],[75,26,72,24],[75,30,72,28],[75,31,72,29,"onScaleBegin"],[75,43,72,41],[75,44,72,42],[75,48,72,46],[75,49,72,47],[76,6,73,4],[78,6,75,4],[79,6,76,4],[79,10,76,8,"action"],[79,16,76,14],[79,21,76,19,"EventTypes"],[79,47,76,19],[79,48,76,19,"EventTypes"],[79,75,76,29],[79,76,76,30,"MOVE"],[79,80,76,34],[79,82,76,36],[80,8,77,6],[80,15,77,13],[80,19,77,17],[81,6,78,4],[82,6,79,4],[82,10,79,8],[82,11,79,9,"_currentSpan"],[82,23,79,21],[82,26,79,24,"span"],[82,30,79,28],[83,6,80,4],[83,10,80,8],[83,14,80,12],[83,15,80,13,"inProgress"],[83,25,80,23],[83,29,80,27],[83,30,80,28],[83,34,80,32],[83,35,80,33,"onScale"],[83,42,80,40],[83,43,80,41],[83,47,80,45],[83,48,80,46],[83,50,80,48],[84,8,81,6],[84,15,81,13],[84,19,81,17],[85,6,82,4],[86,6,83,4],[86,10,83,8],[86,11,83,9,"prevSpan"],[86,19,83,17],[86,22,83,20],[86,26,83,24],[86,27,83,25,"currentSpan"],[86,38,83,36],[87,6,84,4],[87,10,84,8],[87,11,84,9,"prevTime"],[87,19,84,17],[87,22,84,20],[87,26,84,24],[87,27,84,25,"currentTime"],[87,38,84,36],[88,6,85,4],[88,13,85,11],[88,17,85,15],[89,4,86,2],[90,4,87,2,"calculateScaleFactor"],[90,24,87,22,"calculateScaleFactor"],[90,25,87,23,"numOfPointers"],[90,38,87,36],[90,40,87,38],[91,6,88,4],[91,10,88,8,"numOfPointers"],[91,23,88,21],[91,26,88,24],[91,27,88,25],[91,29,88,27],[92,8,89,6],[92,15,89,13],[92,16,89,14],[93,6,90,4],[94,6,91,4],[94,13,91,11],[94,17,91,15],[94,18,91,16,"prevSpan"],[94,26,91,24],[94,29,91,27],[94,30,91,28],[94,33,91,31],[94,37,91,35],[94,38,91,36,"currentSpan"],[94,49,91,47],[94,52,91,50],[94,56,91,54],[94,57,91,55,"prevSpan"],[94,65,91,63],[94,68,91,66],[94,69,91,67],[95,4,92,2],[96,4,93,2],[96,8,93,6,"currentSpan"],[96,19,93,17,"currentSpan"],[96,20,93,17],[96,22,93,20],[97,6,94,4],[97,13,94,11],[97,17,94,15],[97,18,94,16,"_currentSpan"],[97,30,94,28],[98,4,95,2],[99,4,96,2],[99,8,96,6,"focusX"],[99,14,96,12,"focusX"],[99,15,96,12],[99,17,96,15],[100,6,97,4],[100,13,97,11],[100,17,97,15],[100,18,97,16,"_focusX"],[100,25,97,23],[101,4,98,2],[102,4,99,2],[102,8,99,6,"focusY"],[102,14,99,12,"focusY"],[102,15,99,12],[102,17,99,15],[103,6,100,4],[103,13,100,11],[103,17,100,15],[103,18,100,16,"_focusY"],[103,25,100,23],[104,4,101,2],[105,4,102,2],[105,8,102,6,"timeDelta"],[105,17,102,15,"timeDelta"],[105,18,102,15],[105,20,102,18],[106,6,103,4],[106,13,103,11],[106,17,103,15],[106,18,103,16,"currentTime"],[106,29,103,27],[106,32,103,30],[106,36,103,34],[106,37,103,35,"prevTime"],[106,45,103,43],[107,4,104,2],[108,2,105,0],[109,2,105,1,"exports"],[109,9,105,1],[109,10,105,1,"default"],[109,17,105,1],[109,20,105,1,"ScaleGestureDetector"],[109,40,105,1],[110,0,105,1],[110,3]],"functionMap":{"names":["<global>","ScaleGestureDetector","constructor","onTouchEvent","tracker.trackedPointers.forEach$argument_0","calculateScaleFactor","get__currentSpan","get__focusX","get__focusY","get__timeDelta"],"mappings":"AAA;eCI;ECE;GDM;EEC;oCC8B;KDM;GFoC;EIC;GJK;EKC;GLE;EMC;GNE;EOC;GPE;EQC;GRE;CDC"}},"type":"js/module"}]}