{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":52},"end":{"line":5,"column":65,"index":117}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  // Copyright Â© 2024 650 Industries.\n\n  'use client';\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.createPermissionHook = createPermissionHook;\n  var _react = require(_dependencyMap[0], \"react\");\n  // These types are identical, but improves the readability for suggestions in editors\n\n  /**\n   * Get or request permission for protected functionality within the app.\n   * It uses separate permission requesters to interact with a single permission.\n   * By default, the hook will only retrieve the permission status.\n   */\n  function usePermission(methods, options) {\n    const isMounted = (0, _react.useRef)(true);\n    const [status, setStatus] = (0, _react.useState)(null);\n    const {\n      get = true,\n      request = false,\n      ...permissionOptions\n    } = options || {};\n    const getPermission = (0, _react.useCallback)(async () => {\n      let response;\n      if (Object.keys(permissionOptions).length > 0) {\n        response = await methods.getMethod(permissionOptions);\n      } else {\n        response = await methods.getMethod();\n      }\n      if (isMounted.current) setStatus(response);\n      return response;\n    }, [methods.getMethod]);\n    const requestPermission = (0, _react.useCallback)(async () => {\n      let response;\n      if (Object.keys(permissionOptions).length > 0) {\n        response = await methods.requestMethod(permissionOptions);\n      } else {\n        response = await methods.requestMethod();\n      }\n      if (isMounted.current) setStatus(response);\n      return response;\n    }, [methods.requestMethod]);\n    (0, _react.useEffect)(function runMethods() {\n      if (request) requestPermission();\n      if (!request && get) getPermission();\n    }, [get, request, requestPermission, getPermission]);\n\n    // Workaround for unmounting components receiving state updates\n    (0, _react.useEffect)(function didMount() {\n      isMounted.current = true;\n      return () => {\n        isMounted.current = false;\n      };\n    }, []);\n    return [status, requestPermission, getPermission];\n  }\n\n  /**\n   * Create a new permission hook with the permission methods built-in.\n   * This can be used to quickly create specific permission hooks in every module.\n   */\n  function createPermissionHook(methods) {\n    return options => usePermission(methods, options);\n  }\n});","lineCount":68,"map":[[2,2,1,0],[4,2,3,0],[4,14,3,12],[6,2,3,13,"Object"],[6,8,3,13],[6,9,3,13,"defineProperty"],[6,23,3,13],[6,24,3,13,"exports"],[6,31,3,13],[7,4,3,13,"value"],[7,9,3,13],[8,2,3,13],[9,2,3,13,"exports"],[9,9,3,13],[9,10,3,13,"createPermissionHook"],[9,30,3,13],[9,33,3,13,"createPermissionHook"],[9,53,3,13],[10,2,5,0],[10,6,5,0,"_react"],[10,12,5,0],[10,15,5,0,"require"],[10,22,5,0],[10,23,5,0,"_dependencyMap"],[10,37,5,0],[11,2,9,0],[13,2,29,0],[14,0,30,0],[15,0,31,0],[16,0,32,0],[17,0,33,0],[18,2,34,0],[18,11,34,9,"usePermission"],[18,24,34,22,"usePermission"],[18,25,35,2,"methods"],[18,32,35,53],[18,34,36,2,"options"],[18,41,36,42],[18,43,37,93],[19,4,38,2],[19,10,38,8,"isMounted"],[19,19,38,17],[19,22,38,20],[19,26,38,20,"useRef"],[19,39,38,26],[19,41,38,27],[19,45,38,31],[19,46,38,32],[20,4,39,2],[20,10,39,8],[20,11,39,9,"status"],[20,17,39,15],[20,19,39,17,"setStatus"],[20,28,39,26],[20,29,39,27],[20,32,39,30],[20,36,39,30,"useState"],[20,51,39,38],[20,53,39,58],[20,57,39,62],[20,58,39,63],[21,4,40,2],[21,10,40,8],[22,6,40,10,"get"],[22,9,40,13],[22,12,40,16],[22,16,40,20],[23,6,40,22,"request"],[23,13,40,29],[23,16,40,32],[23,21,40,37],[24,6,40,39],[24,9,40,42,"permissionOptions"],[25,4,40,60],[25,5,40,61],[25,8,40,64,"options"],[25,15,40,71],[25,19,40,75],[25,20,40,76],[25,21,40,77],[26,4,42,2],[26,10,42,8,"getPermission"],[26,23,42,21],[26,26,42,24],[26,30,42,24,"useCallback"],[26,48,42,35],[26,50,42,36],[26,62,42,48],[27,6,43,4],[27,10,43,8,"response"],[27,18,43,28],[28,6,44,4],[28,10,44,8,"Object"],[28,16,44,14],[28,17,44,15,"keys"],[28,21,44,19],[28,22,44,20,"permissionOptions"],[28,39,44,37],[28,40,44,38],[28,41,44,39,"length"],[28,47,44,45],[28,50,44,48],[28,51,44,49],[28,53,44,51],[29,8,45,6,"response"],[29,16,45,14],[29,19,45,17],[29,25,45,23,"methods"],[29,32,45,30],[29,33,45,31,"getMethod"],[29,42,45,40],[29,43,45,41,"permissionOptions"],[29,60,45,69],[29,61,45,70],[30,6,46,4],[30,7,46,5],[30,13,46,11],[31,8,47,6,"response"],[31,16,47,14],[31,19,47,17],[31,25,47,23,"methods"],[31,32,47,30],[31,33,47,31,"getMethod"],[31,42,47,40],[31,43,47,41],[31,44,47,42],[32,6,48,4],[33,6,49,4],[33,10,49,8,"isMounted"],[33,19,49,17],[33,20,49,18,"current"],[33,27,49,25],[33,29,49,27,"setStatus"],[33,38,49,36],[33,39,49,37,"response"],[33,47,49,45],[33,48,49,46],[34,6,50,4],[34,13,50,11,"response"],[34,21,50,19],[35,4,51,2],[35,5,51,3],[35,7,51,5],[35,8,51,6,"methods"],[35,15,51,13],[35,16,51,14,"getMethod"],[35,25,51,23],[35,26,51,24],[35,27,51,25],[36,4,53,2],[36,10,53,8,"requestPermission"],[36,27,53,25],[36,30,53,28],[36,34,53,28,"useCallback"],[36,52,53,39],[36,54,53,40],[36,66,53,52],[37,6,54,4],[37,10,54,8,"response"],[37,18,54,28],[38,6,55,4],[38,10,55,8,"Object"],[38,16,55,14],[38,17,55,15,"keys"],[38,21,55,19],[38,22,55,20,"permissionOptions"],[38,39,55,37],[38,40,55,38],[38,41,55,39,"length"],[38,47,55,45],[38,50,55,48],[38,51,55,49],[38,53,55,51],[39,8,56,6,"response"],[39,16,56,14],[39,19,56,17],[39,25,56,23,"methods"],[39,32,56,30],[39,33,56,31,"requestMethod"],[39,46,56,44],[39,47,56,45,"permissionOptions"],[39,64,56,73],[39,65,56,74],[40,6,57,4],[40,7,57,5],[40,13,57,11],[41,8,58,6,"response"],[41,16,58,14],[41,19,58,17],[41,25,58,23,"methods"],[41,32,58,30],[41,33,58,31,"requestMethod"],[41,46,58,44],[41,47,58,45],[41,48,58,46],[42,6,59,4],[43,6,60,4],[43,10,60,8,"isMounted"],[43,19,60,17],[43,20,60,18,"current"],[43,27,60,25],[43,29,60,27,"setStatus"],[43,38,60,36],[43,39,60,37,"response"],[43,47,60,45],[43,48,60,46],[44,6,61,4],[44,13,61,11,"response"],[44,21,61,19],[45,4,62,2],[45,5,62,3],[45,7,62,5],[45,8,62,6,"methods"],[45,15,62,13],[45,16,62,14,"requestMethod"],[45,29,62,27],[45,30,62,28],[45,31,62,29],[46,4,64,2],[46,8,64,2,"useEffect"],[46,24,64,11],[46,26,65,4],[46,35,65,13,"runMethods"],[46,45,65,23,"runMethods"],[46,46,65,23],[46,48,65,26],[47,6,66,6],[47,10,66,10,"request"],[47,17,66,17],[47,19,66,19,"requestPermission"],[47,36,66,36],[47,37,66,37],[47,38,66,38],[48,6,67,6],[48,10,67,10],[48,11,67,11,"request"],[48,18,67,18],[48,22,67,22,"get"],[48,25,67,25],[48,27,67,27,"getPermission"],[48,40,67,40],[48,41,67,41],[48,42,67,42],[49,4,68,4],[49,5,68,5],[49,7,69,4],[49,8,69,5,"get"],[49,11,69,8],[49,13,69,10,"request"],[49,20,69,17],[49,22,69,19,"requestPermission"],[49,39,69,36],[49,41,69,38,"getPermission"],[49,54,69,51],[49,55,70,2],[49,56,70,3],[51,4,72,2],[52,4,73,2],[52,8,73,2,"useEffect"],[52,24,73,11],[52,26,73,12],[52,35,73,21,"didMount"],[52,43,73,29,"didMount"],[52,44,73,29],[52,46,73,32],[53,6,74,4,"isMounted"],[53,15,74,13],[53,16,74,14,"current"],[53,23,74,21],[53,26,74,24],[53,30,74,28],[54,6,75,4],[54,13,75,11],[54,19,75,17],[55,8,76,6,"isMounted"],[55,17,76,15],[55,18,76,16,"current"],[55,25,76,23],[55,28,76,26],[55,33,76,31],[56,6,77,4],[56,7,77,5],[57,4,78,2],[57,5,78,3],[57,7,78,5],[57,9,78,7],[57,10,78,8],[58,4,80,2],[58,11,80,9],[58,12,80,10,"status"],[58,18,80,16],[58,20,80,18,"requestPermission"],[58,37,80,35],[58,39,80,37,"getPermission"],[58,52,80,50],[58,53,80,51],[59,2,81,0],[61,2,83,0],[62,0,84,0],[63,0,85,0],[64,0,86,0],[65,2,87,7],[65,11,87,16,"createPermissionHook"],[65,31,87,36,"createPermissionHook"],[65,32,88,2,"methods"],[65,39,88,53],[65,41,89,2],[66,4,90,2],[66,11,90,10,"options"],[66,18,90,50],[66,22,91,4,"usePermission"],[66,35,91,17],[66,36,91,39,"methods"],[66,43,91,46],[66,45,91,48,"options"],[66,52,91,55],[66,53,91,56],[67,2,92,0],[68,0,92,1],[68,3]],"functionMap":{"names":["<global>","usePermission","getPermission","requestPermission","runMethods","didMount","<anonymous>","createPermissionHook"],"mappings":"AAA;ACiC;oCCQ;GDS;wCEE;GFS;IGG;KHG;YIK;WCE;KDE;GJC;CDG;OOM;SDG;wDCC;CPC"}},"type":"js/module"}]}