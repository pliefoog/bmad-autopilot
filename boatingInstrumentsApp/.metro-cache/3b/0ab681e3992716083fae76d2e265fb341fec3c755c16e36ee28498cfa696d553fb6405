{"dependencies":[{"name":"react","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":36,"column":0,"index":1431},"end":{"line":36,"column":57,"index":1488}}],"key":"RtGiGa+/H7VrI7GDQDLhO1UbpU8=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.SensorContext = void 0;\n  exports.useSensorContext = useSensorContext;\n  var _react = require(_dependencyMap[0], \"react\");\n  var _s = $RefreshSig$();\n  /**\n   * SensorContext - Context Provider for Auto-Fetch Widget Pattern\n   *\n   * Provides sensor instance and type to all metric cells within a widget.\n   * Eliminates prop drilling and enables auto-fetch pattern where cells\n   * independently retrieve their data using metricKey + context.\n   *\n   * **Registry-First Architecture:**\n   * Cells call `useSensorContext()` to get sensor instance,\n   * then `instance.getMetric(metricKey)` + `getSensorFieldConfig(sensorType, metricKey)`\n   * to auto-fetch all display properties (mnemonic, value, unit, alarmState).\n   *\n   * **For AI Agents:**\n   * - TemplatedWidget creates this context wrapping all cells\n   * - Cells use useSensorContext() hook to access sensor data\n   * - No manual prop passing - everything auto-fetched from context\n   *\n   * **Example Usage:**\n   * ```typescript\n   * // Widget provides context\n   * <SensorContext.Provider value={{ sensorInstance: instance, sensorType: 'battery' }}>\n   *   <PrimaryMetricCell metricKey=\"voltage\" />\n   *   <PrimaryMetricCell metricKey=\"current\" />\n   * </SensorContext.Provider>\n   *\n   * // Cell consumes context\n   * function PrimaryMetricCell({ metricKey }: { metricKey: string }) {\n   *   const { sensorInstance, sensorType } = useSensorContext();\n   *   const metric = sensorInstance?.getMetric(metricKey);\n   *   const fieldConfig = getSensorFieldConfig(sensorType, metricKey);\n   *   // Now have everything: metric.formattedValue, fieldConfig.mnemonic, etc.\n   * }\n   * ```\n   */\n  /**\n   * Sensor context value\n   *\n   * Contains the sensor instance being displayed and its type.\n   * Provided by TemplatedWidget, consumed by metric cells.\n   *\n   * **Multi-Sensor Support:**\n   * `additionalSensors` allows widgets to access multiple sensor types\n   * (e.g., SpeedWidget needs both 'speed' and 'gps' sensors).\n   */\n\n  /**\n   * React Context for sensor data\n   *\n   * Created by TemplatedWidget, consumed by PrimaryMetricCell/SecondaryMetricCell.\n   */\n  var SensorContext = exports.SensorContext = /*#__PURE__*/(0, _react.createContext)(undefined);\n\n  /**\n   * Hook to access sensor context\n   *\n   * **Auto-Fetch Pattern:**\n   * 1. Call this hook to get sensor instance + type\n   * 2. Call `instance.getMetric(metricKey)` to get MetricValue\n   * 3. Call `getSensorFieldConfig(sensorType, metricKey)` to get field config\n   * 4. Access `metric.formattedValue`, `fieldConfig.mnemonic`, etc.\n   *\n   * **Multi-Sensor Support:**\n   * Pass optional `sensorKey` to access secondary sensors:\n   * ```typescript\n   * const { sensorInstance, sensorType } = useSensorContext('gps');\n   * ```\n   *\n   * **For AI Agents:**\n   * This is THE primary way cells access sensor data.\n   * No props needed except metricKey - everything else auto-fetched.\n   *\n   * @param sensorKey Optional sensor type key for multi-sensor widgets (defaults to primary)\n   * @returns Sensor context value\n   * @throws Error if called outside SensorContext.Provider or sensorKey not found\n   *\n   * @example\n   * ```typescript\n   * // Primary sensor (default)\n   * const { sensorInstance, sensorType } = useSensorContext();\n   *\n   * // Secondary sensor (multi-sensor widgets)\n   * const { sensorInstance, sensorType } = useSensorContext('gps');\n   * ```\n   */\n  function useSensorContext(sensorKey) {\n    _s();\n    var context = (0, _react.useContext)(SensorContext);\n    if (context === undefined) {\n      throw new Error('useSensorContext must be used within a SensorContext.Provider\\n' + 'Metric cells must be wrapped by TemplatedWidget or manual provider.');\n    }\n\n    // If no sensorKey specified, return primary sensor\n    if (!sensorKey) {\n      return context;\n    }\n\n    // For multi-sensor widgets, lookup secondary sensor\n    // Check if the sensor key is registered in the map\n    if (!context.additionalSensors || !context.additionalSensors.has(sensorKey)) {\n      throw new Error(`useSensorContext: Sensor \"${sensorKey}\" not found in context.\\n` + `Available sensors: primary (${context.sensorType})` + (context.additionalSensors ? `, additional: ${Array.from(context.additionalSensors.keys()).join(', ')}` : ''));\n    }\n\n    // Get the sensor instance (may be null/undefined if data hasn't arrived yet)\n    var additionalSensor = context.additionalSensors.get(sensorKey);\n    return {\n      sensorInstance: additionalSensor,\n      sensorType: sensorKey,\n      additionalSensors: context.additionalSensors\n    };\n  }\n  _s(useSensorContext, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\n});","lineCount":120,"map":[[7,2,36,0],[7,6,36,0,"_react"],[7,12,36,0],[7,15,36,0,"require"],[7,22,36,0],[7,23,36,0,"_dependencyMap"],[7,37,36,0],[8,2,36,57],[8,6,36,57,"_s"],[8,8,36,57],[8,11,36,57,"$RefreshSig$"],[8,23,36,57],[9,2,1,0],[10,0,2,0],[11,0,3,0],[12,0,4,0],[13,0,5,0],[14,0,6,0],[15,0,7,0],[16,0,8,0],[17,0,9,0],[18,0,10,0],[19,0,11,0],[20,0,12,0],[21,0,13,0],[22,0,14,0],[23,0,15,0],[24,0,16,0],[25,0,17,0],[26,0,18,0],[27,0,19,0],[28,0,20,0],[29,0,21,0],[30,0,22,0],[31,0,23,0],[32,0,24,0],[33,0,25,0],[34,0,26,0],[35,0,27,0],[36,0,28,0],[37,0,29,0],[38,0,30,0],[39,0,31,0],[40,0,32,0],[41,0,33,0],[42,0,34,0],[43,2,40,0],[44,0,41,0],[45,0,42,0],[46,0,43,0],[47,0,44,0],[48,0,45,0],[49,0,46,0],[50,0,47,0],[51,0,48,0],[52,0,49,0],[54,2,61,0],[55,0,62,0],[56,0,63,0],[57,0,64,0],[58,0,65,0],[59,2,66,7],[59,6,66,13,"SensorContext"],[59,19,66,26],[59,22,66,26,"exports"],[59,29,66,26],[59,30,66,26,"SensorContext"],[59,43,66,26],[59,59,66,29],[59,63,66,29,"createContext"],[59,83,66,42],[59,85,66,75,"undefined"],[59,94,66,84],[59,95,66,85],[61,2,68,0],[62,0,69,0],[63,0,70,0],[64,0,71,0],[65,0,72,0],[66,0,73,0],[67,0,74,0],[68,0,75,0],[69,0,76,0],[70,0,77,0],[71,0,78,0],[72,0,79,0],[73,0,80,0],[74,0,81,0],[75,0,82,0],[76,0,83,0],[77,0,84,0],[78,0,85,0],[79,0,86,0],[80,0,87,0],[81,0,88,0],[82,0,89,0],[83,0,90,0],[84,0,91,0],[85,0,92,0],[86,0,93,0],[87,0,94,0],[88,0,95,0],[89,0,96,0],[90,0,97,0],[91,0,98,0],[92,0,99,0],[93,2,100,7],[93,11,100,16,"useSensorContext"],[93,27,100,32,"useSensorContext"],[93,28,100,33,"sensorKey"],[93,37,100,55],[93,39,100,77],[94,4,100,77,"_s"],[94,6,100,77],[95,4,101,2],[95,8,101,8,"context"],[95,15,101,15],[95,18,101,18],[95,22,101,18,"useContext"],[95,39,101,28],[95,41,101,29,"SensorContext"],[95,54,101,42],[95,55,101,43],[96,4,103,2],[96,8,103,6,"context"],[96,15,103,13],[96,20,103,18,"undefined"],[96,29,103,27],[96,31,103,29],[97,6,104,4],[97,12,104,10],[97,16,104,14,"Error"],[97,21,104,19],[97,22,105,6],[97,87,105,71],[97,90,106,8],[97,159,107,4],[97,160,107,5],[98,4,108,2],[100,4,110,2],[101,4,111,2],[101,8,111,6],[101,9,111,7,"sensorKey"],[101,18,111,16],[101,20,111,18],[102,6,112,4],[102,13,112,11,"context"],[102,20,112,18],[103,4,113,2],[105,4,115,2],[106,4,116,2],[107,4,117,2],[107,8,117,6],[107,9,117,7,"context"],[107,16,117,14],[107,17,117,15,"additionalSensors"],[107,34,117,32],[107,38,117,36],[107,39,117,37,"context"],[107,46,117,44],[107,47,117,45,"additionalSensors"],[107,64,117,62],[107,65,117,63,"has"],[107,68,117,66],[107,69,117,67,"sensorKey"],[107,78,117,76],[107,79,117,77],[107,81,117,79],[108,6,118,4],[108,12,118,10],[108,16,118,14,"Error"],[108,21,118,19],[108,22,119,6],[108,51,119,35,"sensorKey"],[108,60,119,44],[108,87,119,71],[108,90,120,8],[108,121,120,39,"context"],[108,128,120,46],[108,129,120,47,"sensorType"],[108,139,120,57],[108,142,120,60],[108,146,121,9,"context"],[108,153,121,16],[108,154,121,17,"additionalSensors"],[108,171,121,34],[108,174,122,12],[108,191,122,29,"Array"],[108,196,122,34],[108,197,122,35,"from"],[108,201,122,39],[108,202,122,40,"context"],[108,209,122,47],[108,210,122,48,"additionalSensors"],[108,227,122,65],[108,228,122,66,"keys"],[108,232,122,70],[108,233,122,71],[108,234,122,72],[108,235,122,73],[108,236,122,74,"join"],[108,240,122,78],[108,241,122,79],[108,245,122,83],[108,246,122,84],[108,248,122,86],[108,251,123,12],[108,253,123,14],[108,254,124,4],[108,255,124,5],[109,4,125,2],[111,4,127,2],[112,4,128,2],[112,8,128,8,"additionalSensor"],[112,24,128,24],[112,27,128,27,"context"],[112,34,128,34],[112,35,128,35,"additionalSensors"],[112,52,128,52],[112,53,128,53,"get"],[112,56,128,56],[112,57,128,57,"sensorKey"],[112,66,128,66],[112,67,128,67],[113,4,130,2],[113,11,130,9],[114,6,131,4,"sensorInstance"],[114,20,131,18],[114,22,131,20,"additionalSensor"],[114,38,131,36],[115,6,132,4,"sensorType"],[115,16,132,14],[115,18,132,16,"sensorKey"],[115,27,132,25],[116,6,133,4,"additionalSensors"],[116,23,133,21],[116,25,133,23,"context"],[116,32,133,30],[116,33,133,31,"additionalSensors"],[117,4,134,2],[117,5,134,3],[118,2,135,0],[119,2,135,1,"_s"],[119,4,135,1],[119,5,100,16,"useSensorContext"],[119,21,100,32],[120,0,100,32],[120,3]],"functionMap":{"names":["<global>","useSensorContext"],"mappings":"AAA;OCmG;CDmC"}},"type":"js/module"}]}