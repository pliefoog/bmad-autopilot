{"dependencies":[],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.calculateTrueWind = calculateTrueWind;\n  /**\n   * Wind calculation utilities\n   * Pure functions for calculating derived wind metrics\n   */\n\n  /**\n   * Calculate true wind speed and direction from apparent wind and vessel motion\n   *\n   * @param aws Apparent Wind Speed in knots (from wind sensor)\n   * @param awa Apparent Wind Angle in degrees relative to bow (from wind sensor)\n   * @param sog Speed Over Ground in knots (from GPS)\n   * @param cog Course Over Ground in degrees (from GPS)\n   * @param heading Vessel heading in degrees (from compass)\n   * @returns True wind speed (knots) and direction (degrees, 0-360Â° absolute bearing)\n   */\n  function calculateTrueWind(aws, awa, sog, cog, heading) {\n    // Convert to radians\n    const awaRadians = awa * Math.PI / 180;\n    const headingRadians = heading * Math.PI / 180;\n    const cogRadians = cog * Math.PI / 180;\n\n    // Convert AWA (relative to bow/heading) to absolute apparent wind direction\n    // Absolute Apparent Wind Direction = Heading + AWA\n    const absoluteApparentWindAngle = headingRadians + awaRadians;\n\n    // Apparent wind vector components (absolute, using heading + AWA)\n    const apparentWindX = aws * Math.sin(absoluteApparentWindAngle);\n    const apparentWindY = aws * Math.cos(absoluteApparentWindAngle);\n\n    // Vessel velocity vector components (absolute, using COG for actual movement)\n    const vesselSpeedX = sog * Math.sin(cogRadians);\n    const vesselSpeedY = sog * Math.cos(cogRadians);\n\n    // True wind = Apparent wind - Vessel velocity\n    const trueWindX = apparentWindX - vesselSpeedX;\n    const trueWindY = apparentWindY - vesselSpeedY;\n\n    // Convert back to polar coordinates (magnitude and direction)\n    const trueWindSpeed = Math.sqrt(trueWindX * trueWindX + trueWindY * trueWindY);\n    let trueWindDirection = Math.atan2(trueWindX, trueWindY) * 180 / Math.PI;\n\n    // Normalize angle to 0-360\n    if (trueWindDirection < 0) trueWindDirection += 360;\n    return {\n      speed: trueWindSpeed,\n      direction: trueWindDirection\n    };\n  }\n});","lineCount":54,"map":[[6,2,1,0],[7,0,2,0],[8,0,3,0],[9,0,4,0],[11,2,6,0],[12,0,7,0],[13,0,8,0],[14,0,9,0],[15,0,10,0],[16,0,11,0],[17,0,12,0],[18,0,13,0],[19,0,14,0],[20,0,15,0],[21,2,16,7],[21,11,16,16,"calculateTrueWind"],[21,28,16,33,"calculateTrueWind"],[21,29,17,2,"aws"],[21,32,17,13],[21,34,18,2,"awa"],[21,37,18,13],[21,39,19,2,"sog"],[21,42,19,13],[21,44,20,2,"cog"],[21,47,20,13],[21,49,21,2,"heading"],[21,56,21,17],[21,58,22,40],[22,4,23,2],[23,4,24,2],[23,10,24,8,"awaRadians"],[23,20,24,18],[23,23,24,22,"awa"],[23,26,24,25],[23,29,24,28,"Math"],[23,33,24,32],[23,34,24,33,"PI"],[23,36,24,35],[23,39,24,39],[23,42,24,42],[24,4,25,2],[24,10,25,8,"headingRadians"],[24,24,25,22],[24,27,25,26,"heading"],[24,34,25,33],[24,37,25,36,"Math"],[24,41,25,40],[24,42,25,41,"PI"],[24,44,25,43],[24,47,25,47],[24,50,25,50],[25,4,26,2],[25,10,26,8,"cogRadians"],[25,20,26,18],[25,23,26,22,"cog"],[25,26,26,25],[25,29,26,28,"Math"],[25,33,26,32],[25,34,26,33,"PI"],[25,36,26,35],[25,39,26,39],[25,42,26,42],[27,4,28,2],[28,4,29,2],[29,4,30,2],[29,10,30,8,"absoluteApparentWindAngle"],[29,35,30,33],[29,38,30,36,"headingRadians"],[29,52,30,50],[29,55,30,53,"awaRadians"],[29,65,30,63],[31,4,32,2],[32,4,33,2],[32,10,33,8,"apparentWindX"],[32,23,33,21],[32,26,33,24,"aws"],[32,29,33,27],[32,32,33,30,"Math"],[32,36,33,34],[32,37,33,35,"sin"],[32,40,33,38],[32,41,33,39,"absoluteApparentWindAngle"],[32,66,33,64],[32,67,33,65],[33,4,34,2],[33,10,34,8,"apparentWindY"],[33,23,34,21],[33,26,34,24,"aws"],[33,29,34,27],[33,32,34,30,"Math"],[33,36,34,34],[33,37,34,35,"cos"],[33,40,34,38],[33,41,34,39,"absoluteApparentWindAngle"],[33,66,34,64],[33,67,34,65],[35,4,36,2],[36,4,37,2],[36,10,37,8,"vesselSpeedX"],[36,22,37,20],[36,25,37,23,"sog"],[36,28,37,26],[36,31,37,29,"Math"],[36,35,37,33],[36,36,37,34,"sin"],[36,39,37,37],[36,40,37,38,"cogRadians"],[36,50,37,48],[36,51,37,49],[37,4,38,2],[37,10,38,8,"vesselSpeedY"],[37,22,38,20],[37,25,38,23,"sog"],[37,28,38,26],[37,31,38,29,"Math"],[37,35,38,33],[37,36,38,34,"cos"],[37,39,38,37],[37,40,38,38,"cogRadians"],[37,50,38,48],[37,51,38,49],[39,4,40,2],[40,4,41,2],[40,10,41,8,"trueWindX"],[40,19,41,17],[40,22,41,20,"apparentWindX"],[40,35,41,33],[40,38,41,36,"vesselSpeedX"],[40,50,41,48],[41,4,42,2],[41,10,42,8,"trueWindY"],[41,19,42,17],[41,22,42,20,"apparentWindY"],[41,35,42,33],[41,38,42,36,"vesselSpeedY"],[41,50,42,48],[43,4,44,2],[44,4,45,2],[44,10,45,8,"trueWindSpeed"],[44,23,45,21],[44,26,45,24,"Math"],[44,30,45,28],[44,31,45,29,"sqrt"],[44,35,45,33],[44,36,45,34,"trueWindX"],[44,45,45,43],[44,48,45,46,"trueWindX"],[44,57,45,55],[44,60,45,58,"trueWindY"],[44,69,45,67],[44,72,45,70,"trueWindY"],[44,81,45,79],[44,82,45,80],[45,4,46,2],[45,8,46,6,"trueWindDirection"],[45,25,46,23],[45,28,46,27,"Math"],[45,32,46,31],[45,33,46,32,"atan2"],[45,38,46,37],[45,39,46,38,"trueWindX"],[45,48,46,47],[45,50,46,49,"trueWindY"],[45,59,46,58],[45,60,46,59],[45,63,46,62],[45,66,46,65],[45,69,46,69,"Math"],[45,73,46,73],[45,74,46,74,"PI"],[45,76,46,76],[47,4,48,2],[48,4,49,2],[48,8,49,6,"trueWindDirection"],[48,25,49,23],[48,28,49,26],[48,29,49,27],[48,31,49,29,"trueWindDirection"],[48,48,49,46],[48,52,49,50],[48,55,49,53],[49,4,51,2],[49,11,51,9],[50,6,52,4,"speed"],[50,11,52,9],[50,13,52,11,"trueWindSpeed"],[50,26,52,24],[51,6,53,4,"direction"],[51,15,53,13],[51,17,53,15,"trueWindDirection"],[52,4,54,2],[52,5,54,3],[53,2,55,0],[54,0,55,1],[54,3]],"functionMap":{"names":["<global>","calculateTrueWind"],"mappings":"AAA;OCe;CDuC"}},"type":"js/module"}]}