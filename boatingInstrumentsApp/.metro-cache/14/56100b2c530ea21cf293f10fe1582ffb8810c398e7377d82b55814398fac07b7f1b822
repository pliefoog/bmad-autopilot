{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"asyncType":null,"isESMImport":false,"locs":[],"key":"kslwqCIsh6ew+I1KeA1rlVRjsAk=","exportNames":["*"],"imports":1}},{"name":"../../../RNGestureHandlerModule","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":4,"column":0,"index":73},"end":{"line":4,"column":69,"index":142}}],"key":"2BYIjnTRSFId8SRJ7sJFxLD1BD4=","exportNames":["*"],"imports":1}},{"name":"./utils","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":7,"column":0,"index":274},"end":{"line":7,"column":99,"index":373}},{"start":{"line":7,"column":0,"index":274},"end":{"line":7,"column":99,"index":373}},{"start":{"line":7,"column":0,"index":274},"end":{"line":7,"column":99,"index":373}}],"key":"fIqjJ6Rx8c7Khc/wm9kX7hQXC5I=","exportNames":["*"],"imports":3}},{"name":"../../../ghQueueMicrotask","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":6,"column":0,"index":212},"end":{"line":6,"column":61,"index":273}}],"key":"6QYiO8x9sAoDBctSRJ19A8sqUNk=","exportNames":["*"],"imports":1}},{"name":"../../utils","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":5,"column":0,"index":143},"end":{"line":5,"column":68,"index":211}},{"start":{"line":5,"column":0,"index":143},"end":{"line":5,"column":68,"index":211}}],"key":"ByXat9lt9duIJLDmSeH0V+tRq1s=","exportNames":["*"],"imports":2}},{"name":"../../handlersRegistry","data":{"asyncType":null,"isESMImport":true,"locs":[{"start":{"line":3,"column":0,"index":15},"end":{"line":3,"column":57,"index":72}}],"key":"Q8MtNj8/mrt1iN8Kay94o881ERE=","exportNames":["*"],"imports":1}}],"output":[{"data":{"code":"__d(function (global, require, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  \"use strict\";\n\n  var _interopRequireDefault = require(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.updateHandlers = updateHandlers;\n  var _RNGestureHandlerModule = _interopRequireDefault(require(_dependencyMap[1], \"../../../RNGestureHandlerModule\"));\n  function updateHandlers(preparedGesture, gestureConfig, newGestures) {\n    gestureConfig.prepare();\n    for (let i = 0; i < newGestures.length; i++) {\n      const handler = preparedGesture.attachedGestures[i];\n      (0, require(_dependencyMap[2], \"./utils\").checkGestureCallbacksForWorklets)(handler);\n\n      // Only update handlerTag when it's actually different, it may be the same\n      // if gesture config object is wrapped with useMemo\n      if (newGestures[i].handlerTag !== handler.handlerTag) {\n        newGestures[i].handlerTag = handler.handlerTag;\n        newGestures[i].handlers.handlerTag = handler.handlerTag;\n      }\n    }\n\n    // Store attached gestures to avoid crash when gestures changed after queueing micro task\n    const attachedGestures = preparedGesture.attachedGestures;\n\n    // Use queueMicrotask to extract handlerTags, because when it's ran, all refs should be updated\n    // and handlerTags in BaseGesture references should be updated in the loop above (we need to wait\n    // in case of external relations)\n    (0, require(_dependencyMap[3], \"../../../ghQueueMicrotask\").ghQueueMicrotask)(() => {\n      if (!preparedGesture.isMounted) {\n        return;\n      }\n\n      // Stop if attached gestures changed after queueing micro task\n      if (attachedGestures !== preparedGesture.attachedGestures) {\n        return;\n      }\n\n      // If amount of gesture configs changes, we need to update the callbacks in shared value\n      let shouldUpdateSharedValueIfUsed = attachedGestures.length !== newGestures.length;\n      for (let i = 0; i < newGestures.length; i++) {\n        const handler = attachedGestures[i];\n\n        // If the gestureId is different (gesture isn't wrapped with useMemo or its dependencies changed),\n        // we need to update the shared value, assuming the gesture runs on UI thread or the thread changed\n        if (handler.handlers.gestureId !== newGestures[i].handlers.gestureId && (newGestures[i].shouldUseReanimated || handler.shouldUseReanimated)) {\n          shouldUpdateSharedValueIfUsed = true;\n        }\n        handler.config = newGestures[i].config;\n        handler.handlers = newGestures[i].handlers;\n        _RNGestureHandlerModule.default.updateGestureHandler(handler.handlerTag, (0, require(_dependencyMap[4], \"../../utils\").filterConfig)(handler.config, require(_dependencyMap[2], \"./utils\").ALLOWED_PROPS, (0, require(_dependencyMap[2], \"./utils\").extractGestureRelations)(handler)));\n        (0, require(_dependencyMap[5], \"../../handlersRegistry\").registerHandler)(handler.handlerTag, handler, handler.config.testId);\n      }\n      if (preparedGesture.animatedHandlers && shouldUpdateSharedValueIfUsed) {\n        const newHandlersValue = attachedGestures.filter(g => g.shouldUseReanimated) // Ignore gestures that shouldn't run on UI\n        .map(g => g.handlers);\n        preparedGesture.animatedHandlers.value = newHandlersValue;\n      }\n      (0, require(_dependencyMap[4], \"../../utils\").scheduleFlushOperations)();\n    });\n  }\n});","lineCount":63,"map":[[2,2,1,0],[2,14,1,12],[4,2,1,13],[4,6,1,13,"_interopRequireDefault"],[4,28,1,13],[4,31,1,13,"require"],[4,38,1,13],[4,39,1,13,"_dependencyMap"],[4,53,1,13],[5,2,1,13,"Object"],[5,8,1,13],[5,9,1,13,"defineProperty"],[5,23,1,13],[5,24,1,13,"exports"],[5,31,1,13],[6,4,1,13,"value"],[6,9,1,13],[7,2,1,13],[8,2,1,13,"exports"],[8,9,1,13],[8,10,1,13,"updateHandlers"],[8,24,1,13],[8,27,1,13,"updateHandlers"],[8,41,1,13],[9,2,4,0],[9,6,4,0,"_RNGestureHandlerModule"],[9,29,4,0],[9,32,4,0,"_interopRequireDefault"],[9,54,4,0],[9,55,4,0,"require"],[9,62,4,0],[9,63,4,0,"_dependencyMap"],[9,77,4,0],[10,2,8,7],[10,11,8,16,"updateHandlers"],[10,25,8,30,"updateHandlers"],[10,26,8,31,"preparedGesture"],[10,41,8,46],[10,43,8,48,"gestureConfig"],[10,56,8,61],[10,58,8,63,"newGestures"],[10,69,8,74],[10,71,8,76],[11,4,9,2,"gestureConfig"],[11,17,9,15],[11,18,9,16,"prepare"],[11,25,9,23],[11,26,9,24],[11,27,9,25],[12,4,10,2],[12,9,10,7],[12,13,10,11,"i"],[12,14,10,12],[12,17,10,15],[12,18,10,16],[12,20,10,18,"i"],[12,21,10,19],[12,24,10,22,"newGestures"],[12,35,10,33],[12,36,10,34,"length"],[12,42,10,40],[12,44,10,42,"i"],[12,45,10,43],[12,47,10,45],[12,49,10,47],[13,6,11,4],[13,12,11,10,"handler"],[13,19,11,17],[13,22,11,20,"preparedGesture"],[13,37,11,35],[13,38,11,36,"attachedGestures"],[13,54,11,52],[13,55,11,53,"i"],[13,56,11,54],[13,57,11,55],[14,6,12,4],[14,10,12,4,"checkGestureCallbacksForWorklets"],[14,36,12,4],[14,37,12,4,"checkGestureCallbacksForWorklets"],[14,80,12,36],[14,82,12,37,"handler"],[14,89,12,44],[14,90,12,45],[16,6,14,4],[17,6,15,4],[18,6,16,4],[18,10,16,8,"newGestures"],[18,21,16,19],[18,22,16,20,"i"],[18,23,16,21],[18,24,16,22],[18,25,16,23,"handlerTag"],[18,35,16,33],[18,40,16,38,"handler"],[18,47,16,45],[18,48,16,46,"handlerTag"],[18,58,16,56],[18,60,16,58],[19,8,17,6,"newGestures"],[19,19,17,17],[19,20,17,18,"i"],[19,21,17,19],[19,22,17,20],[19,23,17,21,"handlerTag"],[19,33,17,31],[19,36,17,34,"handler"],[19,43,17,41],[19,44,17,42,"handlerTag"],[19,54,17,52],[20,8,18,6,"newGestures"],[20,19,18,17],[20,20,18,18,"i"],[20,21,18,19],[20,22,18,20],[20,23,18,21,"handlers"],[20,31,18,29],[20,32,18,30,"handlerTag"],[20,42,18,40],[20,45,18,43,"handler"],[20,52,18,50],[20,53,18,51,"handlerTag"],[20,63,18,61],[21,6,19,4],[22,4,20,2],[24,4,22,2],[25,4,23,2],[25,10,23,8,"attachedGestures"],[25,26,23,24],[25,29,23,27,"preparedGesture"],[25,44,23,42],[25,45,23,43,"attachedGestures"],[25,61,23,59],[27,4,25,2],[28,4,26,2],[29,4,27,2],[30,4,28,2],[30,8,28,2,"ghQueueMicrotask"],[30,34,28,2],[30,35,28,2,"ghQueueMicrotask"],[30,80,28,18],[30,82,28,19],[30,88,28,25],[31,6,29,4],[31,10,29,8],[31,11,29,9,"preparedGesture"],[31,26,29,24],[31,27,29,25,"isMounted"],[31,36,29,34],[31,38,29,36],[32,8,30,6],[33,6,31,4],[35,6,33,4],[36,6,34,4],[36,10,34,8,"attachedGestures"],[36,26,34,24],[36,31,34,29,"preparedGesture"],[36,46,34,44],[36,47,34,45,"attachedGestures"],[36,63,34,61],[36,65,34,63],[37,8,35,6],[38,6,36,4],[40,6,38,4],[41,6,39,4],[41,10,39,8,"shouldUpdateSharedValueIfUsed"],[41,39,39,37],[41,42,39,40,"attachedGestures"],[41,58,39,56],[41,59,39,57,"length"],[41,65,39,63],[41,70,39,68,"newGestures"],[41,81,39,79],[41,82,39,80,"length"],[41,88,39,86],[42,6,40,4],[42,11,40,9],[42,15,40,13,"i"],[42,16,40,14],[42,19,40,17],[42,20,40,18],[42,22,40,20,"i"],[42,23,40,21],[42,26,40,24,"newGestures"],[42,37,40,35],[42,38,40,36,"length"],[42,44,40,42],[42,46,40,44,"i"],[42,47,40,45],[42,49,40,47],[42,51,40,49],[43,8,41,6],[43,14,41,12,"handler"],[43,21,41,19],[43,24,41,22,"attachedGestures"],[43,40,41,38],[43,41,41,39,"i"],[43,42,41,40],[43,43,41,41],[45,8,43,6],[46,8,44,6],[47,8,45,6],[47,12,45,10,"handler"],[47,19,45,17],[47,20,45,18,"handlers"],[47,28,45,26],[47,29,45,27,"gestureId"],[47,38,45,36],[47,43,45,41,"newGestures"],[47,54,45,52],[47,55,45,53,"i"],[47,56,45,54],[47,57,45,55],[47,58,45,56,"handlers"],[47,66,45,64],[47,67,45,65,"gestureId"],[47,76,45,74],[47,81,45,79,"newGestures"],[47,92,45,90],[47,93,45,91,"i"],[47,94,45,92],[47,95,45,93],[47,96,45,94,"shouldUseReanimated"],[47,115,45,113],[47,119,45,117,"handler"],[47,126,45,124],[47,127,45,125,"shouldUseReanimated"],[47,146,45,144],[47,147,45,145],[47,149,45,147],[48,10,46,8,"shouldUpdateSharedValueIfUsed"],[48,39,46,37],[48,42,46,40],[48,46,46,44],[49,8,47,6],[50,8,48,6,"handler"],[50,15,48,13],[50,16,48,14,"config"],[50,22,48,20],[50,25,48,23,"newGestures"],[50,36,48,34],[50,37,48,35,"i"],[50,38,48,36],[50,39,48,37],[50,40,48,38,"config"],[50,46,48,44],[51,8,49,6,"handler"],[51,15,49,13],[51,16,49,14,"handlers"],[51,24,49,22],[51,27,49,25,"newGestures"],[51,38,49,36],[51,39,49,37,"i"],[51,40,49,38],[51,41,49,39],[51,42,49,40,"handlers"],[51,50,49,48],[52,8,50,6,"RNGestureHandlerModule"],[52,39,50,28],[52,40,50,29,"updateGestureHandler"],[52,60,50,49],[52,61,50,50,"handler"],[52,68,50,57],[52,69,50,58,"handlerTag"],[52,79,50,68],[52,81,50,70],[52,85,50,70,"filterConfig"],[52,111,50,70],[52,112,50,70,"filterConfig"],[52,139,50,82],[52,141,50,83,"handler"],[52,148,50,90],[52,149,50,91,"config"],[52,155,50,97],[52,157,50,99,"ALLOWED_PROPS"],[52,183,50,99],[52,184,50,99,"ALLOWED_PROPS"],[52,208,50,112],[52,210,50,114],[52,214,50,114,"extractGestureRelations"],[52,240,50,114],[52,241,50,114,"extractGestureRelations"],[52,275,50,137],[52,277,50,138,"handler"],[52,284,50,145],[52,285,50,146],[52,286,50,147],[52,287,50,148],[53,8,51,6],[53,12,51,6,"registerHandler"],[53,38,51,6],[53,39,51,6,"registerHandler"],[53,80,51,21],[53,82,51,22,"handler"],[53,89,51,29],[53,90,51,30,"handlerTag"],[53,100,51,40],[53,102,51,42,"handler"],[53,109,51,49],[53,111,51,51,"handler"],[53,118,51,58],[53,119,51,59,"config"],[53,125,51,65],[53,126,51,66,"testId"],[53,132,51,72],[53,133,51,73],[54,6,52,4],[55,6,53,4],[55,10,53,8,"preparedGesture"],[55,25,53,23],[55,26,53,24,"animatedHandlers"],[55,42,53,40],[55,46,53,44,"shouldUpdateSharedValueIfUsed"],[55,75,53,73],[55,77,53,75],[56,8,54,6],[56,14,54,12,"newHandlersValue"],[56,30,54,28],[56,33,54,31,"attachedGestures"],[56,49,54,47],[56,50,54,48,"filter"],[56,56,54,54],[56,57,54,55,"g"],[56,58,54,56],[56,62,54,60,"g"],[56,63,54,61],[56,64,54,62,"shouldUseReanimated"],[56,83,54,81],[56,84,54,82],[56,85,54,83],[57,8,54,83],[57,9,55,7,"map"],[57,12,55,10],[57,13,55,11,"g"],[57,14,55,12],[57,18,55,16,"g"],[57,19,55,17],[57,20,55,18,"handlers"],[57,28,55,26],[57,29,55,27],[58,8,56,6,"preparedGesture"],[58,23,56,21],[58,24,56,22,"animatedHandlers"],[58,40,56,38],[58,41,56,39,"value"],[58,46,56,44],[58,49,56,47,"newHandlersValue"],[58,65,56,63],[59,6,57,4],[60,6,58,4],[60,10,58,4,"scheduleFlushOperations"],[60,36,58,4],[60,37,58,4,"scheduleFlushOperations"],[60,75,58,27],[60,77,58,28],[60,78,58,29],[61,4,59,2],[61,5,59,3],[61,6,59,4],[62,2,60,0],[63,0,60,1],[63,3]],"functionMap":{"names":["<global>","updateHandlers","ghQueueMicrotask$argument_0","attachedGestures.filter$argument_0","attachedGestures.filter.map$argument_0"],"mappings":"AAA;OCO;mBCoB;uDC0B,0BD;WEC,eF;GDI;CDC"}},"type":"js/module"}]}