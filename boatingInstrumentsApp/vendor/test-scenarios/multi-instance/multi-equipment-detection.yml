name: "Multi-Instance Equipment Detection Test"
description: "Progressive detection of multiple engines, batteries, and tanks with instance handling validation"
duration: 300
bridge_mode: "nmea0183"
messageRate: 1.0
scenario_type: "multi-instance"
vessel_type: "Large Motor Yacht - Multi System"
test_coverage: ["multi-instance", "engine", "battery", "tank", "detection"]

conditions:
  scenario: "system startup with progressive equipment detection"
  complexity: "maximum instances"

equipment:
  engines: 3
  batteries: 4
  tanks: 6

tags: ["multi-instance", "progressive", "detection", "validation"]
related_stories: ["story-7.4", "story-6.10"]

nmea_sentences:
  # Engine Instance 0
  - sentence: "$IIRPM,E,0,{rpm0},A,*XX"
    sentence_type: "RPM"
    description: "Engine 0 RPM"
    source: "ENGINE_0"
    parameters:
      rpm0:
        type: "linear"
        start: 0
        rate: 10
        format: "0000"

  # Engine Instance 1  
  - sentence: "$IIRPM,E,1,{rpm1},A,*XX"
    sentence_type: "RPM"
    description: "Engine 1 RPM"
    source: "ENGINE_1"
    parameters:
      rpm1:
        type: "linear"
        start: 0
        rate: 9
        format: "0000"

  # Engine Instance 2
  - sentence: "$IIRPM,E,2,{rpm2},A,*XX"
    sentence_type: "RPM"
    description: "Engine 2 RPM"
    source: "ENGINE_2"
    parameters:
      rpm2:
        type: "linear"
        start: 0
        rate: 11
        format: "0000"

  # Battery Instance 0
  - sentence: "$IIXDR,U,{volt0},V,BAT_0*XX"
    sentence_type: "XDR"
    description: "Battery 0 Voltage"
    source: "BATTERY_0"
    parameters:
      volt0:
        type: "random"
        min: 12.8
        max: 13.2
        format: "00.0"

  # Battery Instance 1
  - sentence: "$IIXDR,U,{volt1},V,BAT_1*XX"
    sentence_type: "XDR"
    description: "Battery 1 Voltage"
    source: "BATTERY_1"
    parameters:
      volt1:
        type: "random"
        min: 12.6
        max: 13.0
        format: "00.0"

  # Battery Instance 2
  - sentence: "$IIXDR,U,{volt2},V,BAT_2*XX"
    sentence_type: "XDR"
    description: "Battery 2 Voltage"
    source: "BATTERY_2"
    parameters:
      volt2:
        type: "random"
        min: 12.7
        max: 13.1
        format: "00.0"

  # Battery Instance 3
  - sentence: "$IIXDR,U,{volt3},V,BAT_3*XX"
    sentence_type: "XDR"
    description: "Battery 3 Voltage"
    source: "BATTERY_3"
    parameters:
      volt3:
        type: "random"
        min: 12.9
        max: 13.3
        format: "00.0"

  # Tank Instance 0 (Fuel)
  - sentence: "$IIXDR,V,{fuel0},P,FUEL_0*XX"
    sentence_type: "XDR"
    description: "Fuel Tank 0 Level"
    source: "TANK_FUEL_0"
    parameters:
      fuel0:
        type: "linear"
        start: 85.0
        rate: -0.02
        format: "00.0"

  # Tank Instance 1 (Fuel)
  - sentence: "$IIXDR,V,{fuel1},P,FUEL_1*XX"
    sentence_type: "XDR"
    description: "Fuel Tank 1 Level"
    source: "TANK_FUEL_1"
    parameters:
      fuel1:
        type: "linear"
        start: 78.0
        rate: -0.018
        format: "00.0"

  # Tank Instance 2 (Water)
  - sentence: "$IIXDR,V,{water0},P,WATR_0*XX"
    sentence_type: "XDR"
    description: "Fresh Water Tank 0 Level"
    source: "TANK_WATER_0"
    parameters:
      water0:
        type: "linear"
        start: 92.0
        rate: -0.005
        format: "00.0"

  # Tank Instance 3 (Water)
  - sentence: "$IIXDR,V,{water1},P,WATR_1*XX"
    sentence_type: "XDR"
    description: "Fresh Water Tank 1 Level"
    source: "TANK_WATER_1"
    parameters:
      water1:
        type: "linear"
        start: 88.0
        rate: -0.007
        format: "00.0"

  # Tank Instance 4 (Waste)
  - sentence: "$IIXDR,V,{waste0},P,WAST_0*XX"
    sentence_type: "XDR"
    description: "Waste Tank 0 Level"
    source: "TANK_WASTE_0"
    parameters:
      waste0:
        type: "linear"
        start: 25.0
        rate: 0.003
        format: "00.0"

  # Tank Instance 5 (Ballast)
  - sentence: "$IIXDR,V,{ballast0},P,BALL_0*XX"
    sentence_type: "XDR"
    description: "Ballast Tank 0 Level"
    source: "TANK_BALLAST_0"
    parameters:
      ballast0:
        type: "constant"
        value: 50.0
        format: "00.0"
